(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+IsV":function(Qr,ta,w){(function(b){/** @license React v0.26.1
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/b.exports=function(ve){var Be={};"use strict";var Ye=w("MgzW"),Tt=w("q1tI"),dt=w("QCnb");function me(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ft=Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,et=60103,Jt=60106,vn=60107,Wn=60108,Ra=60114,Lt=60109,_e=60110,dn=60112,Re=60113,De=60120,pe=60115,Ge=60116,jn=60121,uo=60129,$t=60130,Pa=60131;if(typeof Symbol=="function"&&Symbol.for){var sn=Symbol.for;et=sn("react.element"),Jt=sn("react.portal"),vn=sn("react.fragment"),Wn=sn("react.strict_mode"),Ra=sn("react.profiler"),Lt=sn("react.provider"),_e=sn("react.context"),dn=sn("react.forward_ref"),Re=sn("react.suspense"),De=sn("react.suspense_list"),pe=sn("react.memo"),Ge=sn("react.lazy"),jn=sn("react.block"),sn("react.scope"),uo=sn("react.debug_trace_mode"),$t=sn("react.offscreen"),Pa=sn("react.legacy_hidden")}var na=typeof Symbol=="function"&&Symbol.iterator;function ra(s){return s===null||typeof s!="object"?null:(s=na&&s[na]||s["@@iterator"],typeof s=="function"?s:null)}function Or(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case vn:return"Fragment";case Jt:return"Portal";case Ra:return"Profiler";case Wn:return"StrictMode";case Re:return"Suspense";case De:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case _e:return(s.displayName||"Context")+".Consumer";case Lt:return(s._context.displayName||"Context")+".Provider";case dn:var u=s.render;return u=u.displayName||u.name||"",s.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case pe:return Or(s.type);case jn:return Or(s._render);case Ge:u=s._payload,s=s._init;try{return Or(s(u))}catch(f){}}return null}function lo(s){var u=s,f=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&1026)!=0&&(f=u.return),s=u.return;while(s)}return u.tag===3?f:null}function Oa(s){if(lo(s)!==s)throw Error(me(188))}function Kr(s){var u=s.alternate;if(!u){if(u=lo(s),u===null)throw Error(me(188));return u!==s?null:s}for(var f=s,g=u;;){var E=f.return;if(E===null)break;var T=E.alternate;if(T===null){if(g=E.return,g!==null){f=g;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===f)return Oa(E),s;if(T===g)return Oa(E),u;T=T.sibling}throw Error(me(188))}if(f.return!==g.return)f=E,g=T;else{for(var B=!1,k=E.child;k;){if(k===f){B=!0,f=E,g=T;break}if(k===g){B=!0,g=E,f=T;break}k=k.sibling}if(!B){for(k=T.child;k;){if(k===f){B=!0,f=T,g=E;break}if(k===g){B=!0,g=T,f=E;break}k=k.sibling}if(!B)throw Error(me(189))}}if(f.alternate!==g)throw Error(me(190))}if(f.tag!==3)throw Error(me(188));return f.stateNode.current===f?s:u}function Ir(s){if(s=Kr(s),!s)return null;for(var u=s;;){if(u.tag===5||u.tag===6)return u;if(u.child)u.child.return=u,u=u.child;else{if(u===s)break;for(;!u.sibling;){if(!u.return||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}}return null}function Ei(s){if(s=Kr(s),!s)return null;for(var u=s;;){if(u.tag===5||u.tag===6)return u;if(u.child&&u.tag!==4)u.child.return=u,u=u.child;else{if(u===s)break;for(;!u.sibling;){if(!u.return||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}}return null}function un(s,u){for(var f=s.alternate;u!==null;){if(u===s||u===f)return!0;u=u.return}return!1}var mn=ve.getPublicInstance,Ti=ve.getRootHostContext,$r=ve.getChildHostContext,Br=ve.prepareForCommit,ia=ve.resetAfterCommit,us=ve.createInstance,Ia=ve.appendInitialChild,co=ve.finalizeInitialChildren,ls=ve.prepareUpdate,Dr=ve.shouldSetTextContent,cs=ve.createTextInstance,Ba=ve.scheduleTimeout,hl=ve.cancelTimeout,fs=ve.noTimeout,aa=ve.isPrimaryRenderer,gr=ve.supportsMutation,fo=ve.supportsPersistence,yr=ve.supportsHydration,dl=ve.getInstanceFromNode,pl=ve.makeOpaqueHydratingObject,ou=ve.makeClientId,vl=ve.beforeActiveInstanceBlur,Ic=ve.afterActiveInstanceBlur,Bc=ve.preparePortalMount,ho=ve.supportsTestSelectors,Dc=ve.findFiberRoot,Fc=ve.getBoundingRect,Nc=ve.getTextContent,oa=ve.isHiddenSubtree,zc=ve.matchAccessibilityRole,Gc=ve.setFocusIfFocusable,Uc=ve.setupIntersectionObserver,Hc=ve.appendChild,hs=ve.appendChildToContainer,kc=ve.commitTextUpdate,Vc=ve.commitMount,Da=ve.commitUpdate,_c=ve.insertBefore,Wc=ve.insertInContainerBefore,jc=ve.removeChild,ml=ve.removeChildFromContainer,gl=ve.resetTextContent,su=ve.hideInstance,ds=ve.hideTextInstance,ps=ve.unhideInstance,uu=ve.unhideTextInstance,po=ve.clearContainer,vo=ve.cloneInstance,mo=ve.createContainerChildSet,go=ve.appendChildToContainerChildSet,Un=ve.finalizeContainerChildren,yo=ve.replaceContainerChildren,gn=ve.cloneHiddenInstance,vs=ve.cloneHiddenTextInstance,Hh=ve.canHydrateInstance,lu=ve.canHydrateTextInstance,kh=ve.isSuspenseInstancePending,Tn=ve.isSuspenseInstanceFallback,ms=ve.getNextHydratableSibling,Xc=ve.getFirstHydratableChild,xo=ve.hydrateInstance,Vh=ve.hydrateTextInstance,Mo=ve.getNextHydratableInstanceAfterSuspenseInstance,yl=ve.commitHydratedContainer,Yc=ve.commitHydratedSuspenseInstance,Fa;function So(s){if(Fa===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);Fa=u&&u[1]||""}return`
`+Fa+s}var Na=!1;function xr(s,u){if(!s||Na)return"";Na=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Z){var g=Z}Reflect.construct(s,[],u)}else{try{u.call()}catch(Z){g=Z}s.call(u.prototype)}else{try{throw Error()}catch(Z){g=Z}s()}}catch(Z){if(Z&&g&&typeof Z.stack=="string"){for(var E=Z.stack.split(`
`),T=g.stack.split(`
`),B=E.length-1,k=T.length-1;1<=B&&0<=k&&E[B]!==T[k];)k--;for(;1<=B&&0<=k;B--,k--)if(E[B]!==T[k]){if(B!==1||k!==1)do if(B--,k--,0>k||E[B]!==T[k])return`
`+E[B].replace(" at new "," at ");while(1<=B&&0<=k);break}}}finally{Na=!1,Error.prepareStackTrace=f}return(s=s?s.displayName||s.name:"")?So(s):""}var za=[],Ga=-1;function Ai(s){return{current:s}}function _t(s){0>Ga||(s.current=za[Ga],za[Ga]=null,Ga--)}function Gt(s,u){Ga++,za[Ga]=s.current,s.current=u}var Li={},qt=Ai(Li),Wt=Ai(!1),sa=Li;function Ua(s,u){var f=s.type.contextTypes;if(!f)return Li;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var E={},T;for(T in f)E[T]=u[T];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=u,s.__reactInternalMemoizedMaskedChildContext=E),E}function Hn(s){return s=s.childContextTypes,s!=null}function qr(){_t(Wt),_t(qt)}function Ha(s,u,f){if(qt.current!==Li)throw Error(me(168));Gt(qt,u),Gt(Wt,f)}function xl(s,u,f){var g=s.stateNode;if(s=u.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var E in g)if(!(E in s))throw Error(me(108,Or(u)||"Unknown",E));return Ye({},f,g)}function gs(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Li,sa=qt.current,Gt(qt,s),Gt(Wt,Wt.current),!0}function Ml(s,u,f){var g=s.stateNode;if(!g)throw Error(me(169));f?(s=xl(s,u,sa),g.__reactInternalMemoizedMergedChildContext=s,_t(Wt),_t(qt),Gt(qt,s)):_t(Wt),Gt(Wt,f)}var cu=null,ua=null,Jc=dt.unstable_now;Jc();var wo=0,Nt=8;function Ci(s){if((1&s)!=0)return Nt=15,1;if((2&s)!=0)return Nt=14,2;if((4&s)!=0)return Nt=13,4;var u=24&s;return u!==0?(Nt=12,u):(s&32)!=0?(Nt=11,32):(u=192&s,u!==0?(Nt=10,u):(s&256)!=0?(Nt=9,256):(u=3584&s,u!==0?(Nt=8,u):(s&4096)!=0?(Nt=7,4096):(u=4186112&s,u!==0?(Nt=6,u):(u=62914560&s,u!==0?(Nt=5,u):s&67108864?(Nt=4,67108864):(s&134217728)!=0?(Nt=3,134217728):(u=805306368&s,u!==0?(Nt=2,u):(1073741824&s)!=0?(Nt=1,1073741824):(Nt=8,s))))))}function Sl(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function wl(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(me(358,s))}}function ka(s,u){var f=s.pendingLanes;if(f===0)return Nt=0;var g=0,E=0,T=s.expiredLanes,B=s.suspendedLanes,k=s.pingedLanes;if(T!==0)g=T,E=Nt=15;else if(T=f&134217727,T!==0){var Z=T&~B;Z!==0?(g=Ci(Z),E=Nt):(k&=T,k!==0&&(g=Ci(k),E=Nt))}else T=f&~B,T!==0?(g=Ci(T),E=Nt):k!==0&&(g=Ci(k),E=Nt);if(g===0)return 0;if(g=31-Ri(g),g=f&((0>g?0:1<<g)<<1)-1,u!==0&&u!==g&&(u&B)==0){if(Ci(u),E<=Nt)return u;Nt=E}if(u=s.entangledLanes,u!==0)for(s=s.entanglements,u&=g;0<u;)f=31-Ri(u),E=1<<f,g|=s[f],u&=~E;return g}function fu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bo(s,u){switch(s){case 15:return 1;case 14:return 2;case 12:return s=Va(24&~u),s===0?bo(10,u):s;case 10:return s=Va(192&~u),s===0?bo(8,u):s;case 8:return s=Va(3584&~u),s===0&&(s=Va(4186112&~u),s===0&&(s=512)),s;case 2:return u=Va(805306368&~u),u===0&&(u=268435456),u}throw Error(me(358,s))}function Va(s){return s&-s}function ys(s){for(var u=[],f=0;31>f;f++)u.push(s);return u}function Eo(s,u,f){s.pendingLanes|=u;var g=u-1;s.suspendedLanes&=g,s.pingedLanes&=g,s=s.eventTimes,u=31-Ri(u),s[u]=f}var Ri=Math.clz32?Math.clz32:Kc,Zc=Math.log,Qc=Math.LN2;function Kc(s){return s===0?32:31-(Zc(s)/Qc|0)|0}var $c=dt.unstable_runWithPriority,hu=dt.unstable_scheduleCallback,du=dt.unstable_cancelCallback,qc=dt.unstable_shouldYield,bl=dt.unstable_requestPaint,pu=dt.unstable_now,ef=dt.unstable_getCurrentPriorityLevel,xs=dt.unstable_ImmediatePriority,El=dt.unstable_UserBlockingPriority,Tl=dt.unstable_NormalPriority,Al=dt.unstable_LowPriority,Ll=dt.unstable_IdlePriority,vu={},tf=bl!==void 0?bl:function(){},ei=null,Ms=null,mu=!1,Cl=pu(),An=1e4>Cl?pu:function(){return pu()-Cl};function _a(){switch(ef()){case xs:return 99;case El:return 98;case Tl:return 97;case Al:return 96;case Ll:return 95;default:throw Error(me(332))}}function Rl(s){switch(s){case 99:return xs;case 98:return El;case 97:return Tl;case 96:return Al;case 95:return Ll;default:throw Error(me(332))}}function ti(s,u){return s=Rl(s),$c(s,u)}function To(s,u,f){return s=Rl(s),hu(s,u,f)}function ir(){if(Ms!==null){var s=Ms;Ms=null,du(s)}Pl()}function Pl(){if(!mu&&ei!==null){mu=!0;var s=0;try{var u=ei;ti(99,function(){for(;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}}),ei=null}catch(f){throw ei!==null&&(ei=ei.slice(s+1)),hu(xs,ir),f}finally{mu=!1}}}var nf=Ft.ReactCurrentBatchConfig;function rf(s,u){return s===u&&(s!==0||1/s==1/u)||s!==s&&u!==u}var ar=typeof Object.is=="function"?Object.is:rf,Ss=Object.prototype.hasOwnProperty;function la(s,u){if(ar(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var f=Object.keys(s),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++)if(!Ss.call(u,f[g])||!ar(s[f[g]],u[f[g]]))return!1;return!0}function gu(s){switch(s.tag){case 5:return So(s.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return s=xr(s.type,!1),s;case 11:return s=xr(s.type.render,!1),s;case 22:return s=xr(s.type._render,!1),s;case 1:return s=xr(s.type,!0),s;default:return""}}function On(s,u){if(s&&s.defaultProps){u=Ye({},u),s=s.defaultProps;for(var f in s)u[f]===void 0&&(u[f]=s[f]);return u}return u}var ni=Ai(null),ca=null,Pi=null,Ao=null;function yu(){Ao=Pi=ca=null}function af(s,u){s=s.type._context,aa?(Gt(ni,s._currentValue),s._currentValue=u):(Gt(ni,s._currentValue2),s._currentValue2=u)}function Ol(s){var u=ni.current;_t(ni),s=s.type._context,aa?s._currentValue=u:s._currentValue2=u}function Bn(s,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&u)===u){if(f===null||(f.childLanes&u)===u)break;f.childLanes|=u}else s.childLanes|=u,f!==null&&(f.childLanes|=u);s=s.return}}function Mr(s,u){ca=s,Ao=Pi=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&u)!=0&&(Ur=!0),s.firstContext=null)}function kn(s,u){if(Ao!==s&&u!==!1&&u!==0)if((typeof u!="number"||u===1073741823)&&(Ao=s,u=1073741823),u={context:s,observedBits:u,next:null},Pi===null){if(ca===null)throw Error(me(308));Pi=u,ca.dependencies={lanes:0,firstContext:u,responders:null}}else Pi=Pi.next=u;return aa?s._currentValue:s._currentValue2}var Fr=!1;function xu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Mu(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ri(s,u){return{eventTime:s,lane:u,tag:0,payload:null,callback:null,next:null}}function ii(s,u){if(s=s.updateQueue,s!==null){s=s.shared;var f=s.pending;f===null?u.next=u:(u.next=f.next,f.next=u),s.pending=u}}function Il(s,u){var f=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var E=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var B={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?E=T=B:T=T.next=B,f=f.next}while(f!==null);T===null?E=T=u:T=T.next=u}else E=T=u;f={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:g.shared,effects:g.effects},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=u}function Lo(s,u,f,g){var E=s.updateQueue;Fr=!1;var T=E.firstBaseUpdate,B=E.lastBaseUpdate,k=E.shared.pending;if(k!==null){E.shared.pending=null;var Z=k,Oe=Z.next;Z.next=null,B===null?T=Oe:B.next=Oe,B=Z;var Le=s.alternate;if(Le!==null){Le=Le.updateQueue;var tt=Le.lastBaseUpdate;tt!==B&&(tt===null?Le.firstBaseUpdate=Oe:tt.next=Oe,Le.lastBaseUpdate=Z)}}if(T!==null){tt=E.baseState,B=0,Le=Oe=Z=null;do{k=T.lane;var Ce=T.eventTime;if((g&k)===k){Le!==null&&(Le=Le.next={eventTime:Ce,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var kt=s,Zt=T;switch(k=u,Ce=f,Zt.tag){case 1:if(kt=Zt.payload,typeof kt=="function"){tt=kt.call(Ce,tt,k);break e}tt=kt;break e;case 3:kt.flags=kt.flags&-4097|64;case 0:if(kt=Zt.payload,k=typeof kt=="function"?kt.call(Ce,tt,k):kt,k==null)break e;tt=Ye({},tt,k);break e;case 2:Fr=!0}}T.callback!==null&&(s.flags|=32,k=E.effects,k===null?E.effects=[T]:k.push(T))}else Ce={eventTime:Ce,lane:k,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Le===null?(Oe=Le=Ce,Z=tt):Le=Le.next=Ce,B|=k;if(T=T.next,T===null){if(k=E.shared.pending,k===null)break;T=k.next,k.next=null,E.lastBaseUpdate=k,E.shared.pending=null}}while(1);Le===null&&(Z=tt),E.baseState=Z,E.firstBaseUpdate=Oe,E.lastBaseUpdate=Le,Ar|=B,s.lanes=B,s.memoizedState=tt}}function fa(s,u,f){if(s=u.effects,u.effects=null,s!==null)for(u=0;u<s.length;u++){var g=s[u],E=g.callback;if(E!==null){if(g.callback=null,g=f,typeof E!="function")throw Error(me(191,E));E.call(g)}}}var Bl=new Tt.Component().refs;function Su(s,u,f,g){u=s.memoizedState,f=f(g,u),f=f==null?u:Ye({},u,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Wa={isMounted:function(u){return(u=u._reactInternals)?lo(u)===u:!1},enqueueSetState:function(u,f,g){u=u._reactInternals;var E=xt(),T=cr(u),B=ri(E,T);B.payload=f,g!=null&&(B.callback=g),ii(u,B),$n(u,T,E)},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var E=xt(),T=cr(u),B=ri(E,T);B.tag=1,B.payload=f,g!=null&&(B.callback=g),ii(u,B),$n(u,T,E)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=xt(),E=cr(u),T=ri(g,E);T.tag=2,f!=null&&(T.callback=f),ii(u,T),$n(u,E,g)}};function of(s,u,f,g,E,T,B){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,T,B):u.prototype&&u.prototype.isPureReactComponent?!la(f,g)||!la(E,T):!0}function sf(s,u,f){var g=!1,E=Li,T=u.contextType;return typeof T=="object"&&T!==null?T=kn(T):(E=Hn(u)?sa:qt.current,g=u.contextTypes,T=(g=g!=null)?Ua(s,E):Li),u=new u(f,T),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Wa,s.stateNode=u,u._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=E,s.__reactInternalMemoizedMaskedChildContext=T),u}function uf(s,u,f,g){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==s&&Wa.enqueueReplaceState(u,u.state,null)}function Dl(s,u,f,g){var E=s.stateNode;E.props=f,E.state=s.memoizedState,E.refs=Bl,xu(s);var T=u.contextType;typeof T=="object"&&T!==null?E.context=kn(T):(T=Hn(u)?sa:qt.current,E.context=Ua(s,T)),Lo(s,f,E,g),E.state=s.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Su(s,u,T,f),E.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(u=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),u!==E.state&&Wa.enqueueReplaceState(E,E.state,null),Lo(s,f,E,g),E.state=s.memoizedState),typeof E.componentDidMount=="function"&&(s.flags|=4)}var wu=Array.isArray;function ws(s,u,f){if(s=f.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(me(309));var g=f.stateNode}if(!g)throw Error(me(147,s));var E=""+s;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===E?u.ref:(u=function(B){var k=g.refs;k===Bl&&(k=g.refs={}),B===null?delete k[E]:k[E]=B},u._stringRef=E,u)}if(typeof s!="string")throw Error(me(284));if(!f._owner)throw Error(me(290,s))}return s}function bu(s,u){if(s.type!=="textarea")throw Error(me(31,Object.prototype.toString.call(u)==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":u))}function lf(s){function u(K,Y){if(s){var ne=K.lastEffect;ne!==null?(ne.nextEffect=Y,K.lastEffect=Y):K.firstEffect=K.lastEffect=Y,Y.nextEffect=null,Y.flags=8}}function f(K,Y){if(!s)return null;for(;Y!==null;)u(K,Y),Y=Y.sibling;return null}function g(K,Y){for(K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function E(K,Y){return K=Sa(K,Y),K.index=0,K.sibling=null,K}function T(K,Y,ne){return K.index=ne,s?(ne=K.alternate,ne!==null?(ne=ne.index,ne<Y?(K.flags=2,Y):ne):(K.flags=2,Y)):Y}function B(K){return s&&K.alternate===null&&(K.flags=2),K}function k(K,Y,ne,Te){return Y===null||Y.tag!==6?(Y=Kl(ne,K.mode,Te),Y.return=K,Y):(Y=E(Y,ne),Y.return=K,Y)}function Z(K,Y,ne,Te){return Y!==null&&Y.elementType===ne.type?(Te=E(Y,ne.props),Te.ref=ws(K,Y,ne),Te.return=K,Te):(Te=_u(ne.type,ne.key,ne.props,null,K.mode,Te),Te.ref=ws(K,Y,ne),Te.return=K,Te)}function Oe(K,Y,ne,Te){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=$l(ne,K.mode,Te),Y.return=K,Y):(Y=E(Y,ne.children||[]),Y.return=K,Y)}function Le(K,Y,ne,Te,ke){return Y===null||Y.tag!==7?(Y=Yo(ne,K.mode,Te,ke),Y.return=K,Y):(Y=E(Y,ne),Y.return=K,Y)}function tt(K,Y,ne){if(typeof Y=="string"||typeof Y=="number")return Y=Kl(""+Y,K.mode,ne),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case et:return ne=_u(Y.type,Y.key,Y.props,null,K.mode,ne),ne.ref=ws(K,null,Y),ne.return=K,ne;case Jt:return Y=$l(Y,K.mode,ne),Y.return=K,Y}if(wu(Y)||ra(Y))return Y=Yo(Y,K.mode,ne,null),Y.return=K,Y;bu(K,Y)}return null}function Ce(K,Y,ne,Te){var ke=Y!==null?Y.key:null;if(typeof ne=="string"||typeof ne=="number")return ke!==null?null:k(K,Y,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case et:return ne.key===ke?ne.type===vn?Le(K,Y,ne.props.children,Te,ke):Z(K,Y,ne,Te):null;case Jt:return ne.key===ke?Oe(K,Y,ne,Te):null}if(wu(ne)||ra(ne))return ke!==null?null:Le(K,Y,ne,Te,null);bu(K,ne)}return null}function kt(K,Y,ne,Te,ke){if(typeof Te=="string"||typeof Te=="number")return K=K.get(ne)||null,k(Y,K,""+Te,ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case et:return K=K.get(Te.key===null?ne:Te.key)||null,Te.type===vn?Le(Y,K,Te.props.children,ke,Te.key):Z(Y,K,Te,ke);case Jt:return K=K.get(Te.key===null?ne:Te.key)||null,Oe(Y,K,Te,ke)}if(wu(Te)||ra(Te))return K=K.get(ne)||null,Le(Y,K,Te,ke,null);bu(Y,Te)}return null}function Zt(K,Y,ne,Te){for(var ke=null,jt=null,nt=Y,Ct=Y=0,yn=null;nt!==null&&Ct<ne.length;Ct++){nt.index>Ct?(yn=nt,nt=null):yn=nt.sibling;var Mt=Ce(K,nt,ne[Ct],Te);if(Mt===null){nt===null&&(nt=yn);break}s&&nt&&Mt.alternate===null&&u(K,nt),Y=T(Mt,Y,Ct),jt===null?ke=Mt:jt.sibling=Mt,jt=Mt,nt=yn}if(Ct===ne.length)return f(K,nt),ke;if(nt===null){for(;Ct<ne.length;Ct++)nt=tt(K,ne[Ct],Te),nt!==null&&(Y=T(nt,Y,Ct),jt===null?ke=nt:jt.sibling=nt,jt=nt);return ke}for(nt=g(K,nt);Ct<ne.length;Ct++)yn=kt(nt,K,Ct,ne[Ct],Te),yn!==null&&(s&&yn.alternate!==null&&nt.delete(yn.key===null?Ct:yn.key),Y=T(yn,Y,Ct),jt===null?ke=yn:jt.sibling=yn,jt=yn);return s&&nt.forEach(function(wa){return u(K,wa)}),ke}function Rr(K,Y,ne,Te){var ke=ra(ne);if(typeof ke!="function")throw Error(me(150));if(ne=ke.call(ne),ne==null)throw Error(me(151));for(var jt=ke=null,nt=Y,Ct=Y=0,yn=null,Mt=ne.next();nt!==null&&!Mt.done;Ct++,Mt=ne.next()){nt.index>Ct?(yn=nt,nt=null):yn=nt.sibling;var wa=Ce(K,nt,Mt.value,Te);if(wa===null){nt===null&&(nt=yn);break}s&&nt&&wa.alternate===null&&u(K,nt),Y=T(wa,Y,Ct),jt===null?ke=wa:jt.sibling=wa,jt=wa,nt=yn}if(Mt.done)return f(K,nt),ke;if(nt===null){for(;!Mt.done;Ct++,Mt=ne.next())Mt=tt(K,Mt.value,Te),Mt!==null&&(Y=T(Mt,Y,Ct),jt===null?ke=Mt:jt.sibling=Mt,jt=Mt);return ke}for(nt=g(K,nt);!Mt.done;Ct++,Mt=ne.next())Mt=kt(nt,K,Ct,Mt.value,Te),Mt!==null&&(s&&Mt.alternate!==null&&nt.delete(Mt.key===null?Ct:Mt.key),Y=T(Mt,Y,Ct),jt===null?ke=Mt:jt.sibling=Mt,jt=Mt);return s&&nt.forEach(function(id){return u(K,id)}),ke}return function(K,Y,ne,Te){var ke=typeof ne=="object"&&ne!==null&&ne.type===vn&&ne.key===null;ke&&(ne=ne.props.children);var jt=typeof ne=="object"&&ne!==null;if(jt)switch(ne.$$typeof){case et:e:{for(jt=ne.key,ke=Y;ke!==null;){if(ke.key===jt){switch(ke.tag){case 7:if(ne.type===vn){f(K,ke.sibling),Y=E(ke,ne.props.children),Y.return=K,K=Y;break e}break;default:if(ke.elementType===ne.type){f(K,ke.sibling),Y=E(ke,ne.props),Y.ref=ws(K,ke,ne),Y.return=K,K=Y;break e}}f(K,ke);break}else u(K,ke);ke=ke.sibling}ne.type===vn?(Y=Yo(ne.props.children,K.mode,Te,ne.key),Y.return=K,K=Y):(Te=_u(ne.type,ne.key,ne.props,null,K.mode,Te),Te.ref=ws(K,Y,ne),Te.return=K,K=Te)}return B(K);case Jt:e:{for(ke=ne.key;Y!==null;){if(Y.key===ke)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){f(K,Y.sibling),Y=E(Y,ne.children||[]),Y.return=K,K=Y;break e}else{f(K,Y);break}else u(K,Y);Y=Y.sibling}Y=$l(ne,K.mode,Te),Y.return=K,K=Y}return B(K)}if(typeof ne=="string"||typeof ne=="number")return ne=""+ne,Y!==null&&Y.tag===6?(f(K,Y.sibling),Y=E(Y,ne),Y.return=K,K=Y):(f(K,Y),Y=Kl(ne,K.mode,Te),Y.return=K,K=Y),B(K);if(wu(ne))return Zt(K,Y,ne,Te);if(ra(ne))return Rr(K,Y,ne,Te);if(jt&&bu(K,ne),typeof ne=="undefined"&&!ke)switch(K.tag){case 1:case 22:case 0:case 11:case 15:throw Error(me(152,Or(K.type)||"Component"))}return f(K,Y)}}var Eu=lf(!0),cf=lf(!1),bs={},Sr=Ai(bs),Es=Ai(bs),ja=Ai(bs);function Xn(s){if(s===bs)throw Error(me(174));return s}function Oi(s,u){Gt(ja,u),Gt(Es,s),Gt(Sr,bs),s=Ti(u),_t(Sr),Gt(Sr,s)}function Co(){_t(Sr),_t(Es),_t(ja)}function ff(s){var u=Xn(ja.current),f=Xn(Sr.current);u=$r(f,s.type,u),f!==u&&(Gt(Es,s),Gt(Sr,u))}function Fl(s){Es.current===s&&(_t(Sr),_t(Es))}var ln=Ai(0);function Tu(s){for(var u=s;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||kh(f)||Tn(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&64)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ii=null,Xa=null,ai=!1;function Au(s,u){var f=Cr(5,null,null,0);f.elementType="DELETED",f.type="DELETED",f.stateNode=u,f.return=s,f.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=f,s.lastEffect=f):s.firstEffect=s.lastEffect=f}function Nr(s,u){switch(s.tag){case 5:return u=Hh(u,s.type,s.pendingProps),u!==null?(s.stateNode=u,!0):!1;case 6:return u=lu(u,s.pendingProps),u!==null?(s.stateNode=u,!0):!1;case 13:return!1;default:return!1}}function Mn(s){if(ai){var u=Xa;if(u){var f=u;if(!Nr(s,u)){if(u=ms(f),!u||!Nr(s,u)){s.flags=s.flags&-1025|2,ai=!1,Ii=s;return}Au(Ii,f)}Ii=s,Xa=Xc(u)}else s.flags=s.flags&-1025|2,ai=!1,Ii=s}}function Ro(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ii=s}function Ya(s){if(!yr||s!==Ii)return!1;if(!ai)return Ro(s),ai=!0,!1;var u=s.type;if(s.tag!==5||u!=="head"&&u!=="body"&&!Dr(u,s.memoizedProps))for(u=Xa;u;)Au(s,u),u=ms(u);if(Ro(s),s.tag===13){if(!yr)throw Error(me(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(me(317));Xa=Mo(s)}else Xa=Ii?ms(s.stateNode):null;return!0}function Ke(){yr&&(Xa=Ii=null,ai=!1)}var se=[];function In(){for(var s=0;s<se.length;s++){var u=se[s];aa?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}se.length=0}var oi=Ft.ReactCurrentDispatcher,Ln=Ft.ReactCurrentBatchConfig,Ts=0,$e=null,Cn=null,it=null,Dn=!1,Ja=!1;function Ot(){throw Error(me(321))}function I(s,u){if(u===null)return!1;for(var f=0;f<u.length&&f<s.length;f++)if(!ar(s[f],u[f]))return!1;return!0}function As(s,u,f,g,E,T){if(Ts=T,$e=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,oi.current=s===null||s.memoizedState===null?Bo:ct,s=f(g,E),Ja){T=0;do{if(Ja=!1,!(25>T))throw Error(me(301));T+=1,it=Cn=null,u.updateQueue=null,oi.current=Do,s=f(g,E)}while(Ja)}if(oi.current=Io,u=Cn!==null&&Cn.next!==null,Ts=0,it=Cn=$e=null,Dn=!1,u)throw Error(me(300));return s}function ha(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?$e.memoizedState=it=s:it=it.next=s,it}function Fn(){if(Cn===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=Cn.next;var u=it===null?$e.memoizedState:it.next;if(u!==null)it=u,Cn=s;else{if(s===null)throw Error(me(310));Cn=s,s={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},it===null?$e.memoizedState=it=s:it=it.next=s}return it}function wr(s,u){return typeof u=="function"?u(s):u}function or(s){var u=Fn(),f=u.queue;if(f===null)throw Error(me(311));f.lastRenderedReducer=s;var g=Cn,E=g.baseQueue,T=f.pending;if(T!==null){if(E!==null){var B=E.next;E.next=T.next,T.next=B}g.baseQueue=E=T,f.pending=null}if(E!==null){E=E.next,g=g.baseState;var k=B=T=null,Z=E;do{var Oe=Z.lane;if((Ts&Oe)===Oe)k!==null&&(k=k.next={lane:0,action:Z.action,eagerReducer:Z.eagerReducer,eagerState:Z.eagerState,next:null}),g=Z.eagerReducer===s?Z.eagerState:s(g,Z.action);else{var Le={lane:Oe,action:Z.action,eagerReducer:Z.eagerReducer,eagerState:Z.eagerState,next:null};k===null?(B=k=Le,T=g):k=k.next=Le,$e.lanes|=Oe,Ar|=Oe}Z=Z.next}while(Z!==null&&Z!==E);k===null?T=g:k.next=B,ar(g,u.memoizedState)||(Ur=!0),u.memoizedState=g,u.baseState=T,u.baseQueue=k,f.lastRenderedState=g}return[u.memoizedState,f.dispatch]}function Bi(s){var u=Fn(),f=u.queue;if(f===null)throw Error(me(311));f.lastRenderedReducer=s;var g=f.dispatch,E=f.pending,T=u.memoizedState;if(E!==null){f.pending=null;var B=E=E.next;do T=s(T,B.action),B=B.next;while(B!==E);ar(T,u.memoizedState)||(Ur=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),f.lastRenderedState=T}return[T,g]}function Lu(s,u,f){var g=u._getVersion;g=g(u._source);var E=aa?u._workInProgressVersionPrimary:u._workInProgressVersionSecondary;if(E!==null?s=E===g:(s=s.mutableReadLanes,(s=(Ts&s)===s)&&(aa?u._workInProgressVersionPrimary=g:u._workInProgressVersionSecondary=g,se.push(u))),s)return f(u._source);throw se.push(u),Error(me(350))}function Za(s,u,f,g){var E=Ht;if(E===null)throw Error(me(349));var T=u._getVersion,B=T(u._source),k=oi.current,Z=k.useState(function(){return Lu(E,u,f)}),Oe=Z[1],Le=Z[0];Z=it;var tt=s.memoizedState,Ce=tt.refs,kt=Ce.getSnapshot,Zt=tt.source;tt=tt.subscribe;var Rr=$e;return s.memoizedState={refs:Ce,source:u,subscribe:g},k.useEffect(function(){Ce.getSnapshot=f,Ce.setSnapshot=Oe;var K=T(u._source);if(!ar(B,K)){K=f(u._source),ar(Le,K)||(Oe(K),K=cr(Rr),E.mutableReadLanes|=K&E.pendingLanes),K=E.mutableReadLanes,E.entangledLanes|=K;for(var Y=E.entanglements,ne=K;0<ne;){var Te=31-Ri(ne),ke=1<<Te;Y[Te]|=K,ne&=~ke}}},[f,u,g]),k.useEffect(function(){return g(u._source,function(){var K=Ce.getSnapshot,Y=Ce.setSnapshot;try{Y(K(u._source));var ne=cr(Rr);E.mutableReadLanes|=ne&E.pendingLanes}catch(Te){Y(function(){throw Te})}})},[u,g]),ar(kt,f)&&ar(Zt,u)&&ar(tt,g)||(s={pending:null,dispatch:null,lastRenderedReducer:wr,lastRenderedState:Le},s.dispatch=Oe=Oo.bind(null,$e,s),Z.queue=s,Z.baseQueue=null,Le=Lu(E,u,f),Z.memoizedState=Z.baseState=Le),Le}function Qa(s,u,f){var g=Fn();return Za(g,s,u,f)}function si(s){var u=ha();return typeof s=="function"&&(s=s()),u.memoizedState=u.baseState=s,s=u.queue={pending:null,dispatch:null,lastRenderedReducer:wr,lastRenderedState:s},s=s.dispatch=Oo.bind(null,$e,s),[u.memoizedState,s]}function zr(s,u,f,g){return s={tag:s,create:u,destroy:f,deps:g,next:null},u=$e.updateQueue,u===null?(u={lastEffect:null},$e.updateQueue=u,u.lastEffect=s.next=s):(f=u.lastEffect,f===null?u.lastEffect=s.next=s:(g=f.next,f.next=s,s.next=g,u.lastEffect=s)),s}function Di(s){var u=ha();return s={current:s},u.memoizedState=s}function ui(){return Fn().memoizedState}function Ka(s,u,f,g){var E=ha();$e.flags|=s,E.memoizedState=zr(1|u,f,void 0,g===void 0?null:g)}function Po(s,u,f,g){var E=Fn();g=g===void 0?null:g;var T=void 0;if(Cn!==null){var B=Cn.memoizedState;if(T=B.destroy,g!==null&&I(g,B.deps)){zr(u,f,T,g);return}}$e.flags|=s,E.memoizedState=zr(1|u,f,T,g)}function Ls(s,u){return Ka(516,4,s,u)}function li(s,u){return Po(516,4,s,u)}function hf(s,u){return Po(4,2,s,u)}function ci(s,u){if(typeof u=="function")return s=s(),u(s),function(){u(null)};if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function fi(s,u,f){return f=f!=null?f.concat([s]):null,Po(4,2,ci.bind(null,u,s),f)}function Cs(){}function Rs(s,u){var f=Fn();u=u===void 0?null:u;var g=f.memoizedState;return g!==null&&u!==null&&I(u,g[1])?g[0]:(f.memoizedState=[s,u],s)}function Fi(s,u){var f=Fn();u=u===void 0?null:u;var g=f.memoizedState;return g!==null&&u!==null&&I(u,g[1])?g[0]:(s=s(),f.memoizedState=[s,u],s)}function Nl(s,u){var f=_a();ti(98>f?98:f,function(){s(!0)}),ti(97<f?97:f,function(){var g=Ln.transition;Ln.transition=1;try{s(!1),u()}finally{Ln.transition=g}})}function Oo(s,u,f){var g=xt(),E=cr(s),T={lane:E,action:f,eagerReducer:null,eagerState:null,next:null},B=u.pending;if(B===null?T.next=T:(T.next=B.next,B.next=T),u.pending=T,B=s.alternate,s===$e||B!==null&&B===$e)Ja=Dn=!0;else{if(s.lanes===0&&(B===null||B.lanes===0)&&(B=u.lastRenderedReducer,B!==null))try{var k=u.lastRenderedState,Z=B(k,f);if(T.eagerReducer=B,T.eagerState=Z,ar(Z,k))return}catch(Oe){}finally{}$n(s,E,g)}}var Io={readContext:kn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useOpaqueIdentifier:Ot,unstable_isNewReconciler:!1},Bo={readContext:kn,useCallback:function(u,f){return ha().memoizedState=[u,f===void 0?null:f],u},useContext:kn,useEffect:Ls,useImperativeHandle:function(u,f,g){return g=g!=null?g.concat([u]):null,Ka(4,2,ci.bind(null,f,u),g)},useLayoutEffect:function(u,f){return Ka(4,2,u,f)},useMemo:function(u,f){var g=ha();return f=f===void 0?null:f,u=u(),g.memoizedState=[u,f],u},useReducer:function(u,f,g){var E=ha();return f=g!==void 0?g(f):f,E.memoizedState=E.baseState=f,u=E.queue={pending:null,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},u=u.dispatch=Oo.bind(null,$e,u),[E.memoizedState,u]},useRef:Di,useState:si,useDebugValue:Cs,useDeferredValue:function(u){var f=si(u),g=f[0],E=f[1];return Ls(function(){var T=Ln.transition;Ln.transition=1;try{E(u)}finally{Ln.transition=T}},[u]),g},useTransition:function(){var u=si(!1),f=u[0];return u=Nl.bind(null,u[1]),Di(u),[u,f]},useMutableSource:function(u,f,g){var E=ha();return E.memoizedState={refs:{getSnapshot:f,setSnapshot:null},source:u,subscribe:g},Za(E,u,f,g)},useOpaqueIdentifier:function(){if(ai){var u=!1,f=pl(function(){throw u||(u=!0,g(ou())),Error(me(355))}),g=si(f)[1];return($e.mode&2)==0&&($e.flags|=516,zr(5,function(){g(ou())},void 0,null)),f}return f=ou(),si(f),f},unstable_isNewReconciler:!1},ct={readContext:kn,useCallback:Rs,useContext:kn,useEffect:li,useImperativeHandle:fi,useLayoutEffect:hf,useMemo:Fi,useReducer:or,useRef:ui,useState:function(){return or(wr)},useDebugValue:Cs,useDeferredValue:function(u){var f=or(wr),g=f[0],E=f[1];return li(function(){var T=Ln.transition;Ln.transition=1;try{E(u)}finally{Ln.transition=T}},[u]),g},useTransition:function(){var u=or(wr)[0];return[ui().current,u]},useMutableSource:Qa,useOpaqueIdentifier:function(){return or(wr)[0]},unstable_isNewReconciler:!1},Do={readContext:kn,useCallback:Rs,useContext:kn,useEffect:li,useImperativeHandle:fi,useLayoutEffect:hf,useMemo:Fi,useReducer:Bi,useRef:ui,useState:function(){return Bi(wr)},useDebugValue:Cs,useDeferredValue:function(u){var f=Bi(wr),g=f[0],E=f[1];return li(function(){var T=Ln.transition;Ln.transition=1;try{E(u)}finally{Ln.transition=T}},[u]),g},useTransition:function(){var u=Bi(wr)[0];return[ui().current,u]},useMutableSource:Qa,useOpaqueIdentifier:function(){return Bi(wr)[0]},unstable_isNewReconciler:!1},Gr=Ft.ReactCurrentOwner,Ur=!1;function Yn(s,u,f,g){u.child=s===null?cf(u,null,f,g):Eu(u,s.child,f,g)}function Ni(s,u,f,g,E){f=f.render;var T=u.ref;return Mr(u,E),g=As(s,u,f,g,T,E),s!==null&&!Ur?(u.updateQueue=s.updateQueue,u.flags&=-517,s.lanes&=~E,di(s,u,E)):(u.flags|=1,Yn(s,u,g,E),u.child)}function Ps(s,u,f,g,E,T){if(s===null){var B=f.type;return typeof B=="function"&&!Zl(B)&&B.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=B,Jn(s,u,B,g,E,T)):(s=_u(f.type,null,g,u,u.mode,T),s.ref=u.ref,s.return=u,u.child=s)}return B=s.child,(E&T)==0&&(E=B.memoizedProps,f=f.compare,f=f!==null?f:la,f(E,g)&&s.ref===u.ref)?di(s,u,T):(u.flags|=1,s=Sa(B,g),s.ref=u.ref,s.return=u,u.child=s)}function Jn(s,u,f,g,E,T){if(s!==null&&la(s.memoizedProps,g)&&s.ref===u.ref)if(Ur=!1,(T&E)!=0)(s.flags&16384)!=0&&(Ur=!0);else return u.lanes=s.lanes,di(s,u,T);return Cu(s,u,f,g,T)}function Fo(s,u,f){var g=u.pendingProps,E=g.children,T=s!==null?s.memoizedState:null;if(g.mode==="hidden"||g.mode==="unstable-defer-without-hiding")if((u.mode&4)==0)u.memoizedState={baseLanes:0},Hu(u,f);else if((f&1073741824)!=0)u.memoizedState={baseLanes:0},Hu(u,T!==null?T.baseLanes:f);else return s=T!==null?T.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:s},Hu(u,s),null;else T!==null?(g=T.baseLanes|f,u.memoizedState=null):g=f,Hu(u,g);return Yn(s,u,E,f),u.child}function zl(s,u){var f=u.ref;(s===null&&f!==null||s!==null&&s.ref!==f)&&(u.flags|=128)}function Cu(s,u,f,g,E){var T=Hn(f)?sa:qt.current;return T=Ua(u,T),Mr(u,E),f=As(s,u,f,g,T,E),s!==null&&!Ur?(u.updateQueue=s.updateQueue,u.flags&=-517,s.lanes&=~E,di(s,u,E)):(u.flags|=1,Yn(s,u,f,E),u.child)}function Os(s,u,f,g,E){if(Hn(f)){var T=!0;gs(u)}else T=!1;if(Mr(u,E),u.stateNode===null)s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2),sf(u,f,g),Dl(u,f,g,E),g=!0;else if(s===null){var B=u.stateNode,k=u.memoizedProps;B.props=k;var Z=B.context,Oe=f.contextType;typeof Oe=="object"&&Oe!==null?Oe=kn(Oe):(Oe=Hn(f)?sa:qt.current,Oe=Ua(u,Oe));var Le=f.getDerivedStateFromProps,tt=typeof Le=="function"||typeof B.getSnapshotBeforeUpdate=="function";tt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(k!==g||Z!==Oe)&&uf(u,B,g,Oe),Fr=!1;var Ce=u.memoizedState;B.state=Ce,Lo(u,g,B,E),Z=u.memoizedState,k!==g||Ce!==Z||Wt.current||Fr?(typeof Le=="function"&&(Su(u,f,Le,g),Z=u.memoizedState),(k=Fr||of(u,f,k,g,Ce,Z,Oe))?(tt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4)):(typeof B.componentDidMount=="function"&&(u.flags|=4),u.memoizedProps=g,u.memoizedState=Z),B.props=g,B.state=Z,B.context=Oe,g=k):(typeof B.componentDidMount=="function"&&(u.flags|=4),g=!1)}else{B=u.stateNode,Mu(s,u),k=u.memoizedProps,Oe=u.type===u.elementType?k:On(u.type,k),B.props=Oe,tt=u.pendingProps,Ce=B.context,Z=f.contextType,typeof Z=="object"&&Z!==null?Z=kn(Z):(Z=Hn(f)?sa:qt.current,Z=Ua(u,Z));var kt=f.getDerivedStateFromProps;(Le=typeof kt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(k!==tt||Ce!==Z)&&uf(u,B,g,Z),Fr=!1,Ce=u.memoizedState,B.state=Ce,Lo(u,g,B,E);var Zt=u.memoizedState;k!==tt||Ce!==Zt||Wt.current||Fr?(typeof kt=="function"&&(Su(u,f,kt,g),Zt=u.memoizedState),(Oe=Fr||of(u,f,Oe,g,Ce,Zt,Z))?(Le||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(g,Zt,Z),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(g,Zt,Z)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=256)):(typeof B.componentDidUpdate!="function"||k===s.memoizedProps&&Ce===s.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&Ce===s.memoizedState||(u.flags|=256),u.memoizedProps=g,u.memoizedState=Zt),B.props=g,B.state=Zt,B.context=Z,g=Oe):(typeof B.componentDidUpdate!="function"||k===s.memoizedProps&&Ce===s.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&Ce===s.memoizedState||(u.flags|=256),g=!1)}return Gl(s,u,f,g,T,E)}function Gl(s,u,f,g,E,T){zl(s,u);var B=(u.flags&64)!=0;if(!g&&!B)return E&&Ml(u,f,!1),di(s,u,T);g=u.stateNode,Gr.current=u;var k=B&&typeof f.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,s!==null&&B?(u.child=Eu(u,s.child,null,T),u.child=Eu(u,null,k,T)):Yn(s,u,k,T),u.memoizedState=g.state,E&&Ml(u,f,!0),u.child}function Ul(s){var u=s.stateNode;u.pendingContext?Ha(s,u.pendingContext,u.pendingContext!==u.context):u.context&&Ha(s,u.context,!1),Oi(s,u.containerInfo)}var zi={dehydrated:null,retryLane:0};function hi(s,u,f){var g=u.pendingProps,E=ln.current,T=!1,B;return(B=(u.flags&64)!=0)||(B=s!==null&&s.memoizedState===null?!1:(E&2)!=0),B?(T=!0,u.flags&=-65):s!==null&&s.memoizedState===null||g.fallback===void 0||g.unstable_avoidThisFallback===!0||(E|=1),Gt(ln,E&1),s===null?(g.fallback!==void 0&&Mn(u),s=g.children,E=g.fallback,T?(s=Is(u,s,E,f),u.child.memoizedState={baseLanes:f},u.memoizedState=zi,s):typeof g.unstable_expectedLoadTime=="number"?(s=Is(u,s,E,f),u.child.memoizedState={baseLanes:f},u.memoizedState=zi,u.lanes=33554432,s):(f=Ql({mode:"visible",children:s},u.mode,f,null),f.return=u,u.child=f)):s.memoizedState!==null?T?(g=df(s,u,g.children,g.fallback,f),T=u.child,E=s.child.memoizedState,T.memoizedState=E===null?{baseLanes:f}:{baseLanes:E.baseLanes|f},T.childLanes=s.childLanes&~f,u.memoizedState=zi,g):(f=No(s,u,g.children,f),u.memoizedState=null,f):T?(g=df(s,u,g.children,g.fallback,f),T=u.child,E=s.child.memoizedState,T.memoizedState=E===null?{baseLanes:f}:{baseLanes:E.baseLanes|f},T.childLanes=s.childLanes&~f,u.memoizedState=zi,g):(f=No(s,u,g.children,f),u.memoizedState=null,f)}function Is(s,u,f,g){var E=s.mode,T=s.child;return u={mode:"hidden",children:u},(E&2)==0&&T!==null?(T.childLanes=0,T.pendingProps=u):T=Ql(u,E,0,null),f=Yo(f,E,g,null),T.return=s,f.return=s,T.sibling=f,s.child=T,f}function No(s,u,f,g){var E=s.child;return s=E.sibling,f=Sa(E,{mode:"visible",children:f}),(u.mode&2)==0&&(f.lanes=g),f.return=u,f.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,u.firstEffect=u.lastEffect=s),u.child=f}function df(s,u,f,g,E){var T=u.mode,B=s.child;s=B.sibling;var k={mode:"hidden",children:f};return(T&2)==0&&u.child!==B?(f=u.child,f.childLanes=0,f.pendingProps=k,B=f.lastEffect,B!==null?(u.firstEffect=f.firstEffect,u.lastEffect=B,B.nextEffect=null):u.firstEffect=u.lastEffect=null):f=Sa(B,k),s!==null?g=Sa(s,g):(g=Yo(g,T,E,null),g.flags|=2),g.return=u,f.return=u,f.sibling=g,u.child=f,g}function pf(s,u){s.lanes|=u;var f=s.alternate;f!==null&&(f.lanes|=u),Bn(s.return,u)}function Ru(s,u,f,g,E,T){var B=s.memoizedState;B===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:E,lastEffect:T}:(B.isBackwards=u,B.rendering=null,B.renderingStartTime=0,B.last=g,B.tail=f,B.tailMode=E,B.lastEffect=T)}function Hl(s,u,f){var g=u.pendingProps,E=g.revealOrder,T=g.tail;if(Yn(s,u,g.children,f),g=ln.current,(g&2)!=0)g=g&1|2,u.flags|=64;else{if(s!==null&&(s.flags&64)!=0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pf(s,f);else if(s.tag===19)pf(s,f);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Gt(ln,g),(u.mode&2)==0)u.memoizedState=null;else switch(E){case"forwards":for(f=u.child,E=null;f!==null;)s=f.alternate,s!==null&&Tu(s)===null&&(E=f),f=f.sibling;f=E,f===null?(E=u.child,u.child=null):(E=f.sibling,f.sibling=null),Ru(u,!1,E,f,T,u.lastEffect);break;case"backwards":for(f=null,E=u.child,u.child=null;E!==null;){if(s=E.alternate,s!==null&&Tu(s)===null){u.child=E;break}s=E.sibling,E.sibling=f,f=E,E=s}Ru(u,!0,f,null,T,u.lastEffect);break;case"together":Ru(u,!1,null,null,void 0,u.lastEffect);break;default:u.memoizedState=null}return u.child}function di(s,u,f){if(s!==null&&(u.dependencies=s.dependencies),Ar|=u.lanes,(f&u.childLanes)!=0){if(s!==null&&u.child!==s.child)throw Error(me(153));if(u.child!==null){for(s=u.child,f=Sa(s,s.pendingProps),u.child=f,f.return=u;s.sibling!==null;)s=s.sibling,f=f.sibling=Sa(s,s.pendingProps),f.return=u;f.sibling=null}return u.child}return null}function pi(s){s.flags|=4}var zo,Fe,Go,Pu;if(gr)zo=function(u,f){for(var g=f.child;g!==null;){if(g.tag===5||g.tag===6)Ia(u,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Fe=function(){},Go=function(u,f,g,E,T){if(u=u.memoizedProps,u!==E){var B=f.stateNode,k=Xn(Sr.current);g=ls(B,g,u,E,T,k),(f.updateQueue=g)&&pi(f)}},Pu=function(u,f,g,E){g!==E&&pi(f)};else if(fo){zo=function(u,f,g,E){for(var T=f.child;T!==null;){if(T.tag===5){var B=T.stateNode;g&&E&&(B=gn(B,T.type,T.memoizedProps,T)),Ia(u,B)}else if(T.tag===6)B=T.stateNode,g&&E&&(B=vs(B,T.memoizedProps,T)),Ia(u,B);else if(T.tag!==4){if(T.tag===13&&(T.flags&4)!=0&&(B=T.memoizedState!==null)){var k=T.child;if(k!==null&&(k.child!==null&&(k.child.return=k,zo(u,k,!0,B)),B=k.sibling,B!==null)){B.return=T,T=B;continue}}if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var _h=function s(u,f,g,E){for(var T=f.child;T!==null;){if(T.tag===5){var B=T.stateNode;g&&E&&(B=gn(B,T.type,T.memoizedProps,T)),go(u,B)}else if(T.tag===6)B=T.stateNode,g&&E&&(B=vs(B,T.memoizedProps,T)),go(u,B);else if(T.tag!==4){if(T.tag===13&&(T.flags&4)!=0&&(B=T.memoizedState!==null)){var k=T.child;if(k!==null&&(k.child!==null&&(k.child.return=k,s(u,k,!0,B)),B=k.sibling,B!==null)){B.return=T,T=B;continue}}if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Fe=function(u){var f=u.stateNode;if(u.firstEffect!==null){var g=f.containerInfo,E=mo(g);_h(E,u,!1,!1),f.pendingChildren=E,pi(u),Un(g,E)}},Go=function(u,f,g,E,T){var B=u.stateNode,k=u.memoizedProps;if((u=f.firstEffect===null)&&k===E)f.stateNode=B;else{var Z=f.stateNode,Oe=Xn(Sr.current),Le=null;k!==E&&(Le=ls(Z,g,k,E,T,Oe)),u&&Le===null?f.stateNode=B:(B=vo(B,Le,g,k,E,f,u,Z),co(B,g,E,T,Oe)&&pi(f),f.stateNode=B,u?pi(f):zo(B,f,!1,!1))}},Pu=function(u,f,g,E){g!==E?(u=Xn(ja.current),g=Xn(Sr.current),f.stateNode=cs(E,u,g,f),pi(f)):f.stateNode=u.stateNode}}else Fe=function(){},Go=function(){},Pu=function(){};function Zn(s,u){if(!ai)switch(s.tailMode){case"hidden":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Hr(s,u,f){var g=u.pendingProps;switch(u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Hn(u.type)&&qr(),null;case 3:return Co(),_t(Wt),_t(qt),In(),g=u.stateNode,g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Ya(u)?pi(u):g.hydrate||(u.flags|=256)),Fe(u),null;case 5:Fl(u);var E=Xn(ja.current);if(f=u.type,s!==null&&u.stateNode!=null)Go(s,u,f,g,E),s.ref!==u.ref&&(u.flags|=128);else{if(!g){if(u.stateNode===null)throw Error(me(166));return null}if(s=Xn(Sr.current),Ya(u)){if(!yr)throw Error(me(175));s=xo(u.stateNode,u.type,u.memoizedProps,E,s,u),u.updateQueue=s,s!==null&&pi(u)}else{var T=us(f,g,E,s,u);zo(T,u,!1,!1),u.stateNode=T,co(T,f,g,E,s)&&pi(u)}u.ref!==null&&(u.flags|=128)}return null;case 6:if(s&&u.stateNode!=null)Pu(s,u,s.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(me(166));if(s=Xn(ja.current),E=Xn(Sr.current),Ya(u)){if(!yr)throw Error(me(176));Vh(u.stateNode,u.memoizedProps,u)&&pi(u)}else u.stateNode=cs(g,s,E,u)}return null;case 13:return _t(ln),g=u.memoizedState,(u.flags&64)!=0?(u.lanes=f,u):(g=g!==null,E=!1,s===null?u.memoizedProps.fallback!==void 0&&Ya(u):E=s.memoizedState!==null,g&&!E&&(u.mode&2)!=0&&(s===null&&u.memoizedProps.unstable_avoidThisFallback!==!0||(ln.current&1)!=0?tn===0&&(tn=3):((tn===0||tn===3)&&(tn=4),Ht===null||(Ar&134217727)==0&&(ur&134217727)==0||qn(Ht,bt))),fo&&g&&(u.flags|=4),gr&&(g||E)&&(u.flags|=4),null);case 4:return Co(),Fe(u),s===null&&Bc(u.stateNode.containerInfo),null;case 10:return Ol(u),null;case 17:return Hn(u.type)&&qr(),null;case 19:if(_t(ln),g=u.memoizedState,g===null)return null;if(E=(u.flags&64)!=0,T=g.rendering,T===null)if(E)Zn(g,!1);else{if(tn!==0||s!==null&&(s.flags&64)!=0)for(s=u.child;s!==null;){if(T=Tu(s),T!==null){for(u.flags|=64,Zn(g,!1),s=T.updateQueue,s!==null&&(u.updateQueue=s,u.flags|=4),g.lastEffect===null&&(u.firstEffect=null),u.lastEffect=g.lastEffect,s=f,g=u.child;g!==null;)E=g,f=s,E.flags&=2,E.nextEffect=null,E.firstEffect=null,E.lastEffect=null,T=E.alternate,T===null?(E.childLanes=0,E.lanes=f,E.child=null,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=T.childLanes,E.lanes=T.lanes,E.child=T.child,E.memoizedProps=T.memoizedProps,E.memoizedState=T.memoizedState,E.updateQueue=T.updateQueue,E.type=T.type,f=T.dependencies,E.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),g=g.sibling;return Gt(ln,ln.current&1|2),u.child}s=s.sibling}g.tail!==null&&An()>Vo&&(u.flags|=64,E=!0,Zn(g,!1),u.lanes=33554432)}else{if(!E)if(s=Tu(T),s!==null){if(u.flags|=64,E=!0,s=s.updateQueue,s!==null&&(u.updateQueue=s,u.flags|=4),Zn(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!ai)return u=u.lastEffect=g.lastEffect,u!==null&&(u.nextEffect=null),null}else 2*An()-g.renderingStartTime>Vo&&f!==1073741824&&(u.flags|=64,E=!0,Zn(g,!1),u.lanes=33554432);g.isBackwards?(T.sibling=u.child,u.child=T):(s=g.last,s!==null?s.sibling=T:u.child=T,g.last=T)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.lastEffect=u.lastEffect,g.renderingStartTime=An(),s.sibling=null,u=ln.current,Gt(ln,E?u&1|2:u&1),s):null;case 23:case 24:return jo(),s!==null&&s.memoizedState!==null!=(u.memoizedState!==null)&&g.mode!=="unstable-defer-without-hiding"&&(u.flags|=4),null}throw Error(me(156,u.tag))}function Gi(s){switch(s.tag){case 1:Hn(s.type)&&qr();var u=s.flags;return u&4096?(s.flags=u&-4097|64,s):null;case 3:if(Co(),_t(Wt),_t(qt),In(),u=s.flags,(u&64)!=0)throw Error(me(285));return s.flags=u&-4097|64,s;case 5:return Fl(s),null;case 13:return _t(ln),u=s.flags,u&4096?(s.flags=u&-4097|64,s):null;case 19:return _t(ln),null;case 4:return Co(),null;case 10:return Ol(s),null;case 23:case 24:return jo(),null;default:return null}}function Bs(s,u){try{var f="",g=u;do f+=gu(g),g=g.return;while(g);var E=f}catch(T){E=`
Error generating stack: `+T.message+`
`+T.stack}return{value:s,source:u,stack:E}}function kr(s,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var Uo=typeof WeakMap=="function"?WeakMap:Map;function $a(s,u,f){f=ri(-1,f),f.tag=3,f.payload={element:null};var g=u.value;return f.callback=function(){ki||(ki=!0,ga=g),kr(s,u)},f}function kl(s,u,f){f=ri(-1,f),f.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var E=u.value;f.payload=function(){return kr(s,u),g(E)}}var T=s.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){typeof g!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this),kr(s,u));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),f}var Vl=typeof WeakSet=="function"?WeakSet:Set;function Ou(s){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ma(s,f)}else u.current=null}function _l(s,u){switch(u.tag){case 0:case 11:case 15:case 22:return;case 1:if(u.flags&256&&s!==null){var f=s.memoizedProps,g=s.memoizedState;s=u.stateNode,u=s.getSnapshotBeforeUpdate(u.elementType===u.type?f:On(u.type,f),g),s.__reactInternalSnapshotBeforeUpdate=u}return;case 3:gr&&u.flags&256&&po(u.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(me(163))}function br(s,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&s)===s){var g=f.destroy;f.destroy=void 0,g!==void 0&&g()}f=f.next}while(f!==u)}}function vf(s,u,f){switch(f.tag){case 0:case 11:case 15:case 22:if(u=f.updateQueue,u=u!==null?u.lastEffect:null,u!==null){s=u=u.next;do{if((s.tag&3)==3){var g=s.create;s.destroy=g()}s=s.next}while(s!==u)}if(u=f.updateQueue,u=u!==null?u.lastEffect:null,u!==null){s=u=u.next;do{var E=s;g=E.next,E=E.tag,(E&4)!=0&&(E&1)!=0&&(Mf(f,s),Zh(f,s)),s=g}while(s!==u)}return;case 1:s=f.stateNode,f.flags&4&&(u===null?s.componentDidMount():(g=f.elementType===f.type?u.memoizedProps:On(f.type,u.memoizedProps),s.componentDidUpdate(g,u.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),u=f.updateQueue,u!==null&&fa(f,u,s);return;case 3:if(u=f.updateQueue,u!==null){if(s=null,f.child!==null)switch(f.child.tag){case 5:s=mn(f.child.stateNode);break;case 1:s=f.child.stateNode}fa(f,u,s)}return;case 5:s=f.stateNode,u===null&&f.flags&4&&Vc(s,f.type,f.memoizedProps,f);return;case 6:return;case 4:return;case 12:return;case 13:yr&&f.memoizedState===null&&(f=f.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&Yc(f))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(me(163))}function Er(s,u){if(gr)for(var f=s;;){if(f.tag===5){var g=f.stateNode;u?su(g):ps(f.stateNode,f.memoizedProps)}else if(f.tag===6)g=f.stateNode,u?ds(g):uu(g,f.memoizedProps);else if((f.tag!==23&&f.tag!==24||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}}function Ds(s,u){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(cu,u)}catch(T){}switch(u.tag){case 0:case 11:case 14:case 15:case 22:if(s=u.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var f=s=s.next;do{var g=f,E=g.destroy;if(g=g.tag,E!==void 0)if((g&4)!=0)Mf(u,f);else{g=u;try{E()}catch(T){Ma(g,T)}}f=f.next}while(f!==s)}break;case 1:if(Ou(u),s=u.stateNode,typeof s.componentWillUnmount=="function")try{s.props=u.memoizedProps,s.state=u.memoizedState,s.componentWillUnmount()}catch(T){Ma(u,T)}break;case 5:Ou(u);break;case 4:gr?Qe(s,u):fo&&fo&&(u=u.stateNode.containerInfo,s=mo(u),yo(u,s))}}function Iu(s,u){for(var f=u;;)if(Ds(s,f),f.child===null||gr&&f.tag===4){if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else f.child.return=f,f=f.child}function Bu(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function Du(s){return s.tag===5||s.tag===3||s.tag===4}function Pe(s){if(gr){e:{for(var u=s.return;u!==null;){if(Du(u))break e;u=u.return}throw Error(me(160))}var f=u;switch(u=f.stateNode,f.tag){case 5:var g=!1;break;case 3:u=u.containerInfo,g=!0;break;case 4:u=u.containerInfo,g=!0;break;default:throw Error(me(161))}f.flags&16&&(gl(u),f.flags&=-17);e:t:for(f=s;;){for(;f.sibling===null;){if(f.return===null||Du(f.return)){f=null;break e}f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue t;f.child.return=f,f=f.child}if(!(f.flags&2)){f=f.stateNode;break e}}g?qa(s,f,u):Wl(s,f,u)}}function qa(s,u,f){var g=s.tag,E=g===5||g===6;if(E)s=E?s.stateNode:s.stateNode.instance,u?Wc(f,s,u):hs(f,s);else if(g!==4&&(s=s.child,s!==null))for(qa(s,u,f),s=s.sibling;s!==null;)qa(s,u,f),s=s.sibling}function Wl(s,u,f){var g=s.tag,E=g===5||g===6;if(E)s=E?s.stateNode:s.stateNode.instance,u?_c(f,s,u):Hc(f,s);else if(g!==4&&(s=s.child,s!==null))for(Wl(s,u,f),s=s.sibling;s!==null;)Wl(s,u,f),s=s.sibling}function Qe(s,u){for(var f=u,g=!1,E,T;;){if(!g){g=f.return;e:for(;;){if(g===null)throw Error(me(160));switch(E=g.stateNode,g.tag){case 5:T=!1;break e;case 3:E=E.containerInfo,T=!0;break e;case 4:E=E.containerInfo,T=!0;break e}g=g.return}g=!0}if(f.tag===5||f.tag===6)Iu(s,f),T?ml(E,f.stateNode):jc(E,f.stateNode);else if(f.tag===4){if(f.child!==null){E=f.stateNode.containerInfo,T=!0,f.child.return=f,f=f.child;continue}}else if(Ds(s,f),f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return,f.tag===4&&(g=!1)}f.sibling.return=f.return,f=f.sibling}}function Qn(s,u){if(gr){switch(u.tag){case 0:case 11:case 14:case 15:case 22:br(3,u);return;case 1:return;case 5:var f=u.stateNode;if(f!=null){var g=u.memoizedProps;s=s!==null?s.memoizedProps:g;var E=u.type,T=u.updateQueue;u.updateQueue=null,T!==null&&Da(f,T,E,s,g,u)}return;case 6:if(u.stateNode===null)throw Error(me(162));f=u.memoizedProps,kc(u.stateNode,s!==null?s.memoizedProps:f,f);return;case 3:yr&&(u=u.stateNode,u.hydrate&&(u.hydrate=!1,yl(u.containerInfo)));return;case 12:return;case 13:Ut(u),eo(u);return;case 19:eo(u);return;case 17:return;case 23:case 24:Er(u,u.memoizedState!==null);return}throw Error(me(163))}switch(u.tag){case 0:case 11:case 14:case 15:case 22:br(3,u);return;case 12:return;case 13:Ut(u),eo(u);return;case 19:eo(u);return;case 3:yr&&(f=u.stateNode,f.hydrate&&(f.hydrate=!1,yl(f.containerInfo)));break;case 23:case 24:return}e:if(fo){switch(u.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:u=u.stateNode,yo(u.containerInfo,u.pendingChildren);break e}throw Error(me(163))}}function Ut(s){s.memoizedState!==null&&(Hs=An(),gr&&Er(s.child,!0))}function eo(s){var u=s.updateQueue;if(u!==null){s.updateQueue=null;var f=s.stateNode;f===null&&(f=s.stateNode=new Vl),u.forEach(function(g){var E=$h.bind(null,s,g);f.has(g)||(f.add(g),g.then(E,E))})}}function We(s,u){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(u=u.memoizedState,u!==null&&u.dehydrated===null):!1}var da=0,pa=1,va=2,ma=3,vi=4;if(typeof Symbol=="function"&&Symbol.for){var Ui=Symbol.for;da=Ui("selector.component"),pa=Ui("selector.has_pseudo_class"),va=Ui("selector.role"),ma=Ui("selector.test_id"),vi=Ui("selector.text")}function Hi(s){var u=dl(s);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(me(364));return u}if(s=Dc(s),s===null)throw Error(me(362));return s.stateNode.current}function to(s,u){switch(u.$$typeof){case da:if(s.type===u.value)return!0;break;case pa:e:{u=u.value,s=[s,0];for(var f=0;f<s.length;){var g=s[f++],E=s[f++],T=u[E];if(g.tag!==5||!oa(g)){for(;T!=null&&to(g,T);)E++,T=u[E];if(E===u.length){u=!0;break e}else for(g=g.child;g!==null;)s.push(g,E),g=g.sibling}}u=!1}return u;case va:if(s.tag===5&&zc(s.stateNode,u.value))return!0;break;case vi:if((s.tag===5||s.tag===6)&&(s=Nc(s),s!==null&&0<=s.indexOf(u.value)))return!0;break;case ma:if(s.tag===5&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(me(365,u))}return!1}function Se(s){switch(s.$$typeof){case da:return"<"+(Or(s.value)||"Unknown")+">";case pa:return":has("+(Se(s)||"")+")";case va:return'[role="'+s.value+'"]';case vi:return'"'+s.value+'"';case ma:return'[data-testname="'+s.value+'"]';default:throw Error(me(365,s))}}function Ho(s,u){var f=[];s=[s,0];for(var g=0;g<s.length;){var E=s[g++],T=s[g++],B=u[T];if(E.tag!==5||!oa(E)){for(;B!=null&&to(E,B);)T++,B=u[T];if(T===u.length)f.push(E);else for(E=E.child;E!==null;)s.push(E,T),E=E.sibling}}return f}function jl(s,u){if(!ho)throw Error(me(363));s=Hi(s),s=Ho(s,u),u=[],s=Array.from(s);for(var f=0;f<s.length;){var g=s[f++];if(g.tag===5)oa(g)||u.push(g.stateNode);else for(g=g.child;g!==null;)s.push(g),g=g.sibling}return u}var Fs=null;function Wh(s){if(Fs===null)try{var u=("require"+Math.random()).slice(0,7);Fs=(b&&b[u]).call(b,"timers").setImmediate}catch(f){Fs=function(E){var T=new MessageChannel;T.port1.onmessage=E,T.port2.postMessage(void 0)}}return Fs(s)}var Ns=Math.ceil,Fu=Ft.ReactCurrentDispatcher,Tr=Ft.ReactCurrentOwner,zs=Ft.IsSomeRendererActing,Ue=0,Ht=null,en=null,bt=0,Ne=0,Nu=Ai(0),tn=0,ko=null,sr=0,Ar=0,ur=0,Gs=0,Us=null,Hs=0,Vo=Infinity;function Vr(){Vo=An()+500}var Ie=null,ki=!1,ga=null,Vn=null,Lr=!1,ya=null,It=90,zu=[],_o=[],lr=null,mi=0,Rn=null,ks=-1,Vi=0,Gu=0,Sn=null,Kn=!1;function xt(){return(Ue&48)!=0?An():ks!==-1?ks:ks=An()}function cr(s){if(s=s.mode,(s&2)==0)return 1;if((s&4)==0)return _a()===99?1:2;if(Vi===0&&(Vi=sr),nf.transition!==0){Gu!==0&&(Gu=Us!==null?Us.pendingLanes:0),s=Vi;var u=4186112&~Gu;return u&=-u,u===0&&(s=4186112&~s,u=s&-s,u===0&&(u=8192)),u}return s=_a(),(Ue&4)!=0&&s===98?s=bo(12,Vi):(s=Sl(s),s=bo(s,Vi)),s}function $n(s,u,f){if(50<mi)throw mi=0,Rn=null,Error(me(185));if(s=gi(s,u),s===null)return null;Eo(s,u,f),s===Ht&&(ur|=u,tn===4&&qn(s,bt));var g=_a();u===1?(Ue&8)!=0&&(Ue&48)==0?xa(s):(cn(s,f),Ue===0&&(Vr(),ir())):((Ue&4)==0||g!==98&&g!==99||(lr===null?lr=new Set([s]):lr.add(s)),cn(s,f)),Us=s}function gi(s,u){s.lanes|=u;var f=s.alternate;for(f!==null&&(f.lanes|=u),f=s,s=s.return;s!==null;)s.childLanes|=u,f=s.alternate,f!==null&&(f.childLanes|=u),f=s,s=s.return;return f.tag===3?f.stateNode:null}function cn(s,u){for(var f=s.callbackNode,g=s.suspendedLanes,E=s.pingedLanes,T=s.expirationTimes,B=s.pendingLanes;0<B;){var k=31-Ri(B),Z=1<<k,Oe=T[k];if(Oe===-1){if((Z&g)==0||(Z&E)!=0){Oe=u,Ci(Z);var Le=Nt;T[k]=10<=Le?Oe+250:6<=Le?Oe+5e3:-1}}else Oe<=u&&(s.expiredLanes|=Z);B&=~Z}if(g=ka(s,s===Ht?bt:0),u=Nt,g===0)f!==null&&(f!==vu&&du(f),s.callbackNode=null,s.callbackPriority=0);else{if(f!==null){if(s.callbackPriority===u)return;f!==vu&&du(f)}u===15?(f=xa.bind(null,s),ei===null?(ei=[f],Ms=hu(xs,Pl)):ei.push(f),f=vu):u===14?f=To(99,xa.bind(null,s)):(f=wl(u),f=To(f,yi.bind(null,s))),s.callbackPriority=u,s.callbackNode=f}}function yi(s){if(ks=-1,Gu=Vi=0,(Ue&48)!=0)throw Error(me(327));var u=s.callbackNode;if(_i()&&s.callbackNode!==u)return null;var f=ka(s,s===Ht?bt:0);if(f===0)return null;var g=f,E=Ue;Ue|=16;var T=gf();(Ht!==s||bt!==g)&&(Vr(),Xo(s,g));do try{Xh();break}catch(k){mf(s,k)}while(1);if(yu(),Fu.current=T,Ue=E,en!==null?g=0:(Ht=null,bt=0,g=tn),(sr&ur)!=0)Xo(s,0);else if(g!==0){if(g===2&&(Ue|=64,s.hydrate&&(s.hydrate=!1,po(s.containerInfo)),f=fu(s),f!==0&&(g=Vs(s,f))),g===1)throw u=ko,Xo(s,0),qn(s,f),cn(s,An()),u;switch(s.finishedWork=s.current.alternate,s.finishedLanes=f,g){case 0:case 1:throw Error(me(345));case 2:no(s);break;case 3:if(qn(s,f),(f&62914560)===f&&(g=Hs+500-An(),10<g)){if(ka(s,0)!==0)break;if(E=s.suspendedLanes,(E&f)!==f){xt(),s.pingedLanes|=s.suspendedLanes&E;break}s.timeoutHandle=Ba(no.bind(null,s),g);break}no(s);break;case 4:if(qn(s,f),(f&4186112)===f)break;for(g=s.eventTimes,E=-1;0<f;){var B=31-Ri(f);T=1<<B,B=g[B],B>E&&(E=B),f&=~T}if(f=E,f=An()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Ns(f/1960))-f,10<f){s.timeoutHandle=Ba(no.bind(null,s),f);break}no(s);break;case 5:no(s);break;default:throw Error(me(329))}}return cn(s,An()),s.callbackNode===u?yi.bind(null,s):null}function qn(s,u){for(u&=~Gs,u&=~ur,s.suspendedLanes|=u,s.pingedLanes&=~u,s=s.expirationTimes;0<u;){var f=31-Ri(u),g=1<<f;s[f]=-1,u&=~g}}function xa(s){if((Ue&48)!=0)throw Error(me(327));if(_i(),s===Ht&&(s.expiredLanes&bt)!=0){var u=bt,f=Vs(s,u);(sr&ur)!=0&&(u=ka(s,u),f=Vs(s,u))}else u=ka(s,0),f=Vs(s,u);if(s.tag!==0&&f===2&&(Ue|=64,s.hydrate&&(s.hydrate=!1,po(s.containerInfo)),u=fu(s),u!==0&&(f=Vs(s,u))),f===1)throw f=ko,Xo(s,0),qn(s,u),cn(s,An()),f;return s.finishedWork=s.current.alternate,s.finishedLanes=u,no(s),cn(s,An()),null}function Uu(){if(lr!==null){var s=lr;lr=null,s.forEach(function(u){u.expiredLanes|=24&u.pendingLanes,cn(u,An())})}ir()}function Wo(s,u){var f=Ue;Ue|=1;try{return s(u)}finally{Ue=f,Ue===0&&(Vr(),ir())}}function Xl(s,u){var f=Ue;if((f&48)!=0)return s(u);Ue|=1;try{if(s)return ti(99,s.bind(null,u))}finally{Ue=f,ir()}}function Hu(s,u){Gt(Nu,Ne),Ne|=u,sr|=u}function jo(){Ne=Nu.current,_t(Nu)}function Xo(s,u){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;if(f!==fs&&(s.timeoutHandle=fs,hl(f)),en!==null)for(f=en.return;f!==null;){var g=f;switch(g.tag){case 1:g=g.type.childContextTypes,g!=null&&qr();break;case 3:Co(),_t(Wt),_t(qt),In();break;case 5:Fl(g);break;case 4:Co();break;case 13:_t(ln);break;case 19:_t(ln);break;case 10:Ol(g);break;case 23:case 24:jo()}f=f.return}Ht=s,en=Sa(s.current,null),bt=Ne=sr=u,tn=0,ko=null,Gs=ur=Ar=0}function mf(s,u){do{var f=en;try{if(yu(),oi.current=Io,Dn){for(var g=$e.memoizedState;g!==null;){var E=g.queue;E!==null&&(E.pending=null),g=g.next}Dn=!1}if(Ts=0,it=Cn=$e=null,Ja=!1,Tr.current=null,f===null||f.return===null){tn=1,ko=u,en=null;break}e:{var T=s,B=f.return,k=f,Z=u;if(u=bt,k.flags|=2048,k.firstEffect=k.lastEffect=null,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Oe=Z;if((k.mode&2)==0){var Le=k.alternate;Le?(k.updateQueue=Le.updateQueue,k.memoizedState=Le.memoizedState,k.lanes=Le.lanes):(k.updateQueue=null,k.memoizedState=null)}var tt=(ln.current&1)!=0,Ce=B;do{var kt;if(kt=Ce.tag===13){var Zt=Ce.memoizedState;if(Zt!==null)kt=Zt.dehydrated!==null;else{var Rr=Ce.memoizedProps;kt=Rr.fallback===void 0?!1:Rr.unstable_avoidThisFallback!==!0?!0:!tt}}if(kt){var K=Ce.updateQueue;if(K===null){var Y=new Set;Y.add(Oe),Ce.updateQueue=Y}else K.add(Oe);if((Ce.mode&2)==0){if(Ce.flags|=64,k.flags|=16384,k.flags&=-2981,k.tag===1)if(k.alternate===null)k.tag=17;else{var ne=ri(-1,1);ne.tag=2,ii(k,ne)}k.lanes|=1;break e}Z=void 0,k=u;var Te=T.pingCache;if(Te===null?(Te=T.pingCache=new Uo,Z=new Set,Te.set(Oe,Z)):(Z=Te.get(Oe),Z===void 0&&(Z=new Set,Te.set(Oe,Z))),!Z.has(k)){Z.add(k);var ke=Kh.bind(null,T,Oe,k);Oe.then(ke,ke)}Ce.flags|=4096,Ce.lanes=u;break e}Ce=Ce.return}while(Ce!==null);Z=Error((Or(k.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}tn!==5&&(tn=2),Z=Bs(Z,k),Ce=B;do{switch(Ce.tag){case 3:T=Z,Ce.flags|=4096,u&=-u,Ce.lanes|=u;var jt=$a(Ce,T,u);Il(Ce,jt);break e;case 1:T=Z;var nt=Ce.type,Ct=Ce.stateNode;if((Ce.flags&64)==0&&(typeof nt.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&(Vn===null||!Vn.has(Ct)))){Ce.flags|=4096,u&=-u,Ce.lanes|=u;var yn=kl(Ce,T,u);Il(Ce,yn);break e}}Ce=Ce.return}while(Ce!==null)}xf(f)}catch(Mt){u=Mt,en===f&&f!==null&&(en=f=f.return);continue}break}while(1)}function gf(){var s=Fu.current;return Fu.current=Io,s===null?Io:s}function Vs(s,u){var f=Ue;Ue|=16;var g=gf();Ht===s&&bt===u||Xo(s,u);do try{jh();break}catch(E){mf(s,E)}while(1);if(yu(),Ue=f,Fu.current=g,en!==null)throw Error(me(261));return Ht=null,bt=0,tn}function jh(){for(;en!==null;)yf(en)}function Xh(){for(;en!==null&&!qc();)yf(en)}function yf(s){var u=wf(s.alternate,s,Ne);s.memoizedProps=s.pendingProps,u===null?xf(s):en=u,Tr.current=null}function xf(s){var u=s;do{var f=u.alternate;if(s=u.return,(u.flags&2048)==0){if(f=Hr(f,u,Ne),f!==null){en=f;return}if(f=u,f.tag!==24&&f.tag!==23||f.memoizedState===null||(Ne&1073741824)!=0||(f.mode&4)==0){for(var g=0,E=f.child;E!==null;)g|=E.lanes|E.childLanes,E=E.sibling;f.childLanes=g}s!==null&&(s.flags&2048)==0&&(s.firstEffect===null&&(s.firstEffect=u.firstEffect),u.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=u.firstEffect),s.lastEffect=u.lastEffect),1<u.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=u:s.firstEffect=u,s.lastEffect=u))}else{if(f=Gi(u),f!==null){f.flags&=2047,en=f;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(u=u.sibling,u!==null){en=u;return}en=u=s}while(u!==null);tn===0&&(tn=5)}function no(s){var u=_a();return ti(99,Yh.bind(null,s,u)),null}function Yh(s,u){do _i();while(ya!==null);if((Ue&48)!=0)throw Error(me(327));var f=s.finishedWork;if(f===null)return null;if(s.finishedWork=null,s.finishedLanes=0,f===s.current)throw Error(me(177));s.callbackNode=null;var g=f.lanes|f.childLanes,E=g,T=s.pendingLanes&~E;s.pendingLanes=E,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=E,s.mutableReadLanes&=E,s.entangledLanes&=E,E=s.entanglements;for(var B=s.eventTimes,k=s.expirationTimes;0<T;){var Z=31-Ri(T),Oe=1<<Z;E[Z]=0,B[Z]=-1,k[Z]=-1,T&=~Oe}if(lr!==null&&(g&24)==0&&lr.has(s)&&lr.delete(s),s===Ht&&(en=Ht=null,bt=0),1<f.flags?f.lastEffect!==null?(f.lastEffect.nextEffect=f,g=f.firstEffect):g=f:g=f.firstEffect,g!==null){E=Ue,Ue|=32,Tr.current=null,Sn=Br(s.containerInfo),Kn=!1,Ie=g;do try{Jh()}catch(Y){if(Ie===null)throw Error(me(330));Ma(Ie,Y),Ie=Ie.nextEffect}while(Ie!==null);Sn=null,Ie=g;do try{for(B=s;Ie!==null;){var Le=Ie.flags;if(Le&16&&gr&&gl(Ie.stateNode),Le&128){var tt=Ie.alternate;if(tt!==null){var Ce=tt.ref;Ce!==null&&(typeof Ce=="function"?Ce(null):Ce.current=null)}}switch(Le&1038){case 2:Pe(Ie),Ie.flags&=-3;break;case 6:Pe(Ie),Ie.flags&=-3,Qn(Ie.alternate,Ie);break;case 1024:Ie.flags&=-1025;break;case 1028:Ie.flags&=-1025,Qn(Ie.alternate,Ie);break;case 4:Qn(Ie.alternate,Ie);break;case 8:k=B,T=Ie,gr?Qe(k,T):Iu(k,T);var kt=T.alternate;Bu(T),kt!==null&&Bu(kt)}Ie=Ie.nextEffect}}catch(Y){if(Ie===null)throw Error(me(330));Ma(Ie,Y),Ie=Ie.nextEffect}while(Ie!==null);Kn&&Ic(),ia(s.containerInfo),s.current=f,Ie=g;do try{for(Le=s;Ie!==null;){var Zt=Ie.flags;if(Zt&36&&vf(Le,Ie.alternate,Ie),Zt&128){tt=void 0;var Rr=Ie.ref;if(Rr!==null){var K=Ie.stateNode;switch(Ie.tag){case 5:tt=mn(K);break;default:tt=K}typeof Rr=="function"?Rr(tt):Rr.current=tt}}Ie=Ie.nextEffect}}catch(Y){if(Ie===null)throw Error(me(330));Ma(Ie,Y),Ie=Ie.nextEffect}while(Ie!==null);Ie=null,tf(),Ue=E}else s.current=f;if(Lr)Lr=!1,ya=s,It=u;else for(Ie=g;Ie!==null;)u=Ie.nextEffect,Ie.nextEffect=null,Ie.flags&8&&(Zt=Ie,Zt.sibling=null,Zt.stateNode=null),Ie=u;if(g=s.pendingLanes,g===0&&(Vn=null),g===1?s===Rn?mi++:(mi=0,Rn=s):mi=0,f=f.stateNode,ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(cu,f,void 0,(f.current.flags&64)==64)}catch(Y){}if(cn(s,An()),ki)throw ki=!1,s=ga,ga=null,s;return(Ue&8)!=0||ir(),null}function Jh(){for(;Ie!==null;){var s=Ie.alternate;Kn||Sn===null||((Ie.flags&8)!=0?un(Ie,Sn)&&(Kn=!0,vl()):Ie.tag===13&&We(s,Ie)&&un(Ie,Sn)&&(Kn=!0,vl()));var u=Ie.flags;(u&256)!=0&&_l(s,Ie),(u&512)==0||Lr||(Lr=!0,To(97,function(){return _i(),null})),Ie=Ie.nextEffect}}function _i(){if(It!==90){var s=97<It?97:It;return It=90,ti(s,Qh)}return!1}function Zh(s,u){zu.push(u,s),Lr||(Lr=!0,To(97,function(){return _i(),null}))}function Mf(s,u){_o.push(u,s),Lr||(Lr=!0,To(97,function(){return _i(),null}))}function Qh(){if(ya===null)return!1;var s=ya;if(ya=null,(Ue&48)!=0)throw Error(me(331));var u=Ue;Ue|=32;var f=_o;_o=[];for(var g=0;g<f.length;g+=2){var E=f[g],T=f[g+1],B=E.destroy;if(E.destroy=void 0,typeof B=="function")try{B()}catch(Z){if(T===null)throw Error(me(330));Ma(T,Z)}}for(f=zu,zu=[],g=0;g<f.length;g+=2){E=f[g],T=f[g+1];try{var k=E.create;E.destroy=k()}catch(Z){if(T===null)throw Error(me(330));Ma(T,Z)}}for(k=s.current.firstEffect;k!==null;)s=k.nextEffect,k.nextEffect=null,k.flags&8&&(k.sibling=null,k.stateNode=null),k=s;return Ue=u,ir(),!0}function Sf(s,u,f){u=Bs(f,u),u=$a(s,u,1),ii(s,u),u=xt(),s=gi(s,1),s!==null&&(Eo(s,1,u),cn(s,u))}function Ma(s,u){if(s.tag===3)Sf(s,s,u);else for(var f=s.return;f!==null;){if(f.tag===3){Sf(f,s,u);break}else if(f.tag===1){var g=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Vn===null||!Vn.has(g))){s=Bs(u,s);var E=kl(f,s,1);if(ii(f,E),E=xt(),f=gi(f,1),f!==null)Eo(f,1,E),cn(f,E);else if(typeof g.componentDidCatch=="function"&&(Vn===null||!Vn.has(g)))try{g.componentDidCatch(u,s)}catch(T){}break}}f=f.return}}function Kh(s,u,f){var g=s.pingCache;g!==null&&g.delete(u),u=xt(),s.pingedLanes|=s.suspendedLanes&f,Ht===s&&(bt&f)===f&&(tn===4||tn===3&&(bt&62914560)===bt&&500>An()-Hs?Xo(s,0):Gs|=f),cn(s,u)}function $h(s,u){var f=s.stateNode;f!==null&&f.delete(u),u=0,u===0&&(u=s.mode,(u&2)==0?u=1:(u&4)==0?u=_a()===99?1:2:(Vi===0&&(Vi=sr),u=Va(62914560&~Vi),u===0&&(u=4194304))),f=xt(),s=gi(s,u),s!==null&&(Eo(s,u,f),cn(s,f))}var wf;wf=function(u,f,g){var E=f.lanes;if(u!==null)if(u.memoizedProps!==f.pendingProps||Wt.current)Ur=!0;else if((g&E)!=0)Ur=(u.flags&16384)!=0;else{switch(Ur=!1,f.tag){case 3:Ul(f),Ke();break;case 5:ff(f);break;case 1:Hn(f.type)&&gs(f);break;case 4:Oi(f,f.stateNode.containerInfo);break;case 10:af(f,f.memoizedProps.value);break;case 13:if(f.memoizedState!==null)return(g&f.child.childLanes)!=0?hi(u,f,g):(Gt(ln,ln.current&1),f=di(u,f,g),f!==null?f.sibling:null);Gt(ln,ln.current&1);break;case 19:if(E=(g&f.childLanes)!=0,(u.flags&64)!=0){if(E)return Hl(u,f,g);f.flags|=64}var T=f.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Gt(ln,ln.current),E)break;return null;case 23:case 24:return f.lanes=0,Fo(u,f,g)}return di(u,f,g)}else Ur=!1;switch(f.lanes=0,f.tag){case 2:if(E=f.type,u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,T=Ua(f,qt.current),Mr(f,g),T=As(null,f,E,u,T,g),f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,Hn(E)){var B=!0;gs(f)}else B=!1;f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,xu(f);var k=E.getDerivedStateFromProps;typeof k=="function"&&Su(f,E,k,u),T.updater=Wa,f.stateNode=T,T._reactInternals=f,Dl(f,E,u,g),f=Gl(null,f,E,!0,B,g)}else f.tag=0,Yn(null,f,T,g),f=f.child;return f;case 16:T=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,B=T._init,T=B(T._payload),f.type=T,B=f.tag=ed(T),u=On(T,u),B){case 0:f=Cu(null,f,T,u,g);break e;case 1:f=Os(null,f,T,u,g);break e;case 11:f=Ni(null,f,T,u,g);break e;case 14:f=Ps(null,f,T,On(T.type,u),E,g);break e}throw Error(me(306,T,""))}return f;case 0:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:On(E,T),Cu(u,f,E,T,g);case 1:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:On(E,T),Os(u,f,E,T,g);case 3:if(Ul(f),E=f.updateQueue,u===null||E===null)throw Error(me(282));if(E=f.pendingProps,T=f.memoizedState,T=T!==null?T.element:null,Mu(u,f),Lo(f,E,null,g),E=f.memoizedState.element,E===T)Ke(),f=di(u,f,g);else{if(T=f.stateNode,(B=T.hydrate)&&(yr?(Xa=Xc(f.stateNode.containerInfo),Ii=f,B=ai=!0):B=!1),B){if(yr&&(u=T.mutableSourceEagerHydrationData,u!=null))for(T=0;T<u.length;T+=2)B=u[T],k=u[T+1],aa?B._workInProgressVersionPrimary=k:B._workInProgressVersionSecondary=k,se.push(B);for(g=cf(f,null,E,g),f.child=g;g;)g.flags=g.flags&-3|1024,g=g.sibling}else Yn(u,f,E,g),Ke();f=f.child}return f;case 5:return ff(f),u===null&&Mn(f),E=f.type,T=f.pendingProps,B=u!==null?u.memoizedProps:null,k=T.children,Dr(E,T)?k=null:B!==null&&Dr(E,B)&&(f.flags|=16),zl(u,f),Yn(u,f,k,g),f.child;case 6:return u===null&&Mn(f),null;case 13:return hi(u,f,g);case 4:return Oi(f,f.stateNode.containerInfo),E=f.pendingProps,u===null?f.child=Eu(f,null,E,g):Yn(u,f,E,g),f.child;case 11:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:On(E,T),Ni(u,f,E,T,g);case 7:return Yn(u,f,f.pendingProps,g),f.child;case 8:return Yn(u,f,f.pendingProps.children,g),f.child;case 12:return Yn(u,f,f.pendingProps.children,g),f.child;case 10:e:{if(E=f.type._context,T=f.pendingProps,k=f.memoizedProps,B=T.value,af(f,B),k!==null){var Z=k.value;if(B=ar(Z,B)?0:(typeof E._calculateChangedBits=="function"?E._calculateChangedBits(Z,B):1073741823)|0,B===0){if(k.children===T.children&&!Wt.current){f=di(u,f,g);break e}}else for(Z=f.child,Z!==null&&(Z.return=f);Z!==null;){var Oe=Z.dependencies;if(Oe!==null){k=Z.child;for(var Le=Oe.firstContext;Le!==null;){if(Le.context===E&&(Le.observedBits&B)!=0){Z.tag===1&&(Le=ri(-1,g&-g),Le.tag=2,ii(Z,Le)),Z.lanes|=g,Le=Z.alternate,Le!==null&&(Le.lanes|=g),Bn(Z.return,g),Oe.lanes|=g;break}Le=Le.next}}else k=Z.tag===10&&Z.type===f.type?null:Z.child;if(k!==null)k.return=Z;else for(k=Z;k!==null;){if(k===f){k=null;break}if(Z=k.sibling,Z!==null){Z.return=k.return,k=Z;break}k=k.return}Z=k}}Yn(u,f,T.children,g),f=f.child}return f;case 9:return T=f.type,B=f.pendingProps,E=B.children,Mr(f,g),T=kn(T,B.unstable_observedBits),E=E(T),f.flags|=1,Yn(u,f,E,g),f.child;case 14:return T=f.type,B=On(T,f.pendingProps),B=On(T.type,B),Ps(u,f,T,B,E,g);case 15:return Jn(u,f,f.type,f.pendingProps,E,g);case 17:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:On(E,T),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Hn(E)?(u=!0,gs(f)):u=!1,Mr(f,g),sf(f,E,T),Dl(f,E,T,g),Gl(null,f,E,!0,u,g);case 19:return Hl(u,f,g);case 23:return Fo(u,f,g);case 24:return Fo(u,f,g)}throw Error(me(156,f.tag))};var ku={current:!1},Yl=dt.unstable_flushAllWithoutAsserting,bf=typeof Yl=="function";function Jl(){if(Yl!==void 0)return Yl();for(var s=!1;_i();)s=!0;return s}function Ef(s){try{Jl(),Wh(function(){Jl()?Ef(s):s()})}catch(u){s(u)}}var Vu=0,Tf=!1;function qh(s,u,f,g){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(s,u,f,g){return new qh(s,u,f,g)}function Zl(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ed(s){if(typeof s=="function")return Zl(s)?1:0;if(s!=null){if(s=s.$$typeof,s===dn)return 11;if(s===pe)return 14}return 2}function Sa(s,u){var f=s.alternate;return f===null?(f=Cr(s.tag,u,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=u,f.type=s.type,f.flags=0,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null),f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,u=s.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f}function _u(s,u,f,g,E,T){var B=2;if(g=s,typeof s=="function")Zl(s)&&(B=1);else if(typeof s=="string")B=5;else e:switch(s){case vn:return Yo(f.children,E,T,u);case uo:B=8,E|=16;break;case Wn:B=8,E|=1;break;case Ra:return s=Cr(12,f,u,E|8),s.elementType=Ra,s.type=Ra,s.lanes=T,s;case Re:return s=Cr(13,f,u,E),s.type=Re,s.elementType=Re,s.lanes=T,s;case De:return s=Cr(19,f,u,E),s.elementType=De,s.lanes=T,s;case $t:return Ql(f,E,T,u);case Pa:return s=Cr(24,f,u,E),s.elementType=Pa,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Lt:B=10;break e;case _e:B=9;break e;case dn:B=11;break e;case pe:B=14;break e;case Ge:B=16,g=null;break e;case jn:B=22;break e}throw Error(me(130,s==null?s:typeof s,""))}return u=Cr(B,f,u,E),u.elementType=s,u.type=g,u.lanes=T,u}function Yo(s,u,f,g){return s=Cr(7,s,g,u),s.lanes=f,s}function Ql(s,u,f,g){return s=Cr(23,s,g,u),s.elementType=$t,s.lanes=f,s}function Kl(s,u,f){return s=Cr(6,s,null,u),s.lanes=f,s}function $l(s,u,f){return u=Cr(4,s.children!==null?s.children:[],s.key,u),u.lanes=f,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function td(s,u,f){this.tag=u,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=fs,this.pendingContext=this.context=null,this.hydrate=f,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ys(0),this.expirationTimes=ys(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),yr&&(this.mutableSourceEagerHydrationData=null)}function Af(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(me(188)):Error(me(268,Object.keys(s)));return s=Ir(u),s===null?null:s.stateNode}function Lf(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<u?f:u}}function Wu(s,u){Lf(s,u),(s=s.alternate)&&Lf(s,u)}function nd(s){return s=Ir(s),s===null?null:s.stateNode}function rd(){return null}return Be.IsThisRendererActing=ku,Be.act=function(s){function u(){Vu--,zs.current=f,ku.current=g}Tf===!1&&(Tf=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Vu++;var f=zs.current,g=ku.current;zs.current=!0,ku.current=!0;try{var E=Wo(s)}catch(T){throw u(),T}if(E!==null&&typeof E=="object"&&typeof E.then=="function")return{then:function(B,k){E.then(function(){1<Vu||bf===!0&&f===!0?(u(),B()):Ef(function(Z){u(),Z?k(Z):B()})},function(Z){u(),k(Z)})}};try{Vu!==1||bf!==!1&&f!==!1||Jl(),u()}catch(T){throw u(),T}return{then:function(B){B()}}},Be.attemptContinuousHydration=function(s){if(s.tag===13){var u=xt();$n(s,67108864,u),Wu(s,67108864)}},Be.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var u=xt(),f=cr(s);$n(s,f,u),Wu(s,f)}},Be.attemptSynchronousHydration=function(s){switch(s.tag){case 3:var u=s.stateNode;if(u.hydrate){var f=Ci(u.pendingLanes);u.expiredLanes|=f&u.pendingLanes,cn(u,An()),(Ue&48)==0&&(Vr(),ir())}break;case 13:var g=xt();Xl(function(){return $n(s,1,g)}),Wu(s,4)}},Be.attemptUserBlockingHydration=function(s){if(s.tag===13){var u=xt();$n(s,4,u),Wu(s,4)}},Be.batchedEventUpdates=function(s,u){var f=Ue;Ue|=2;try{return s(u)}finally{Ue=f,Ue===0&&(Vr(),ir())}},Be.batchedUpdates=Wo,Be.createComponentSelector=function(s){return{$$typeof:da,value:s}},Be.createContainer=function(s,u,f){return s=new td(s,u,f),u=Cr(3,null,null,u===2?7:u===1?3:0),s.current=u,u.stateNode=s,xu(u),s},Be.createHasPsuedoClassSelector=function(s){return{$$typeof:pa,value:s}},Be.createPortal=function(s,u,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jt,key:g==null?null:""+g,children:s,containerInfo:u,implementation:f}},Be.createRoleSelector=function(s){return{$$typeof:va,value:s}},Be.createTestNameSelector=function(s){return{$$typeof:ma,value:s}},Be.createTextSelector=function(s){return{$$typeof:vi,value:s}},Be.deferredUpdates=function(s){return ti(97,s)},Be.discreteUpdates=function(s,u,f,g,E){var T=Ue;Ue|=4;try{return ti(98,s.bind(null,u,f,g,E))}finally{Ue=T,Ue===0&&(Vr(),ir())}},Be.findAllNodes=jl,Be.findBoundingRects=function(s,u){if(!ho)throw Error(me(363));u=jl(s,u),s=[];for(var f=0;f<u.length;f++)s.push(Fc(u[f]));for(u=s.length-1;0<u;u--){f=s[u];for(var g=f.x,E=g+f.width,T=f.y,B=T+f.height,k=u-1;0<=k;k--)if(u!==k){var Z=s[k],Oe=Z.x,Le=Oe+Z.width,tt=Z.y,Ce=tt+Z.height;if(g>=Oe&&T>=tt&&E<=Le&&B<=Ce){s.splice(u,1);break}else if(g!==Oe||f.width!==Z.width||Ce<T||tt>B){if(!(T!==tt||f.height!==Z.height||Le<g||Oe>E)){Oe>g&&(Z.width+=Oe-g,Z.x=g),Le<E&&(Z.width=E-Oe),s.splice(u,1);break}}else{tt>T&&(Z.height+=tt-T,Z.y=T),Ce<B&&(Z.height=B-tt),s.splice(u,1);break}}}return s},Be.findHostInstance=Af,Be.findHostInstanceWithNoPortals=function(s){return s=Ei(s),s===null?null:s.tag===20?s.stateNode.instance:s.stateNode},Be.findHostInstanceWithWarning=function(s){return Af(s)},Be.flushControlled=function(s){var u=Ue;Ue|=1;try{ti(99,s)}finally{Ue=u,Ue===0&&(Vr(),ir())}},Be.flushDiscreteUpdates=function(){(Ue&49)==0&&(Uu(),_i())},Be.flushPassiveEffects=_i,Be.flushSync=Xl,Be.focusWithin=function(s,u){if(!ho)throw Error(me(363));for(s=Hi(s),u=Ho(s,u),u=Array.from(u),s=0;s<u.length;){var f=u[s++];if(!oa(f)){if(f.tag===5&&Gc(f.stateNode))return!0;for(f=f.child;f!==null;)u.push(f),f=f.sibling}}return!1},Be.getCurrentUpdateLanePriority=function(){return wo},Be.getFindAllNodesFailureDescription=function(s,u){if(!ho)throw Error(me(363));var f=0,g=[];s=[Hi(s),0];for(var E=0;E<s.length;){var T=s[E++],B=s[E++],k=u[B];if((T.tag!==5||!oa(T))&&(to(T,k)&&(g.push(Se(k)),B++,B>f&&(f=B)),B<u.length))for(T=T.child;T!==null;)s.push(T,B),T=T.sibling}if(f<u.length){for(s=[];f<u.length;f++)s.push(Se(u[f]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},Be.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return mn(s.child.stateNode);default:return s.child.stateNode}},Be.injectIntoDevTools=function(s){if(s={bundleType:s.bundleType,version:s.version,rendererPackageName:s.rendererPackageName,rendererConfig:s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:nd,findFiberByHostInstance:s.findFiberByHostInstance||rd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")s=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u.isDisabled&&u.supportsFiber)try{cu=u.inject(s),ua=u}catch(f){}s=!0}return s},Be.observeVisibleRects=function(s,u,f,g){if(!ho)throw Error(me(363));s=jl(s,u);var E=Uc(s,f,g).disconnect;return{disconnect:function(){E()}}},Be.registerMutableSourceForHydration=function(s,u){var f=u._getVersion;f=f(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,f]:s.mutableSourceEagerHydrationData.push(u,f)},Be.runWithPriority=function(s,u){var f=wo;try{return wo=s,u()}finally{wo=f}},Be.shouldSuspend=function(){return!1},Be.unbatchedUpdates=function(s,u){var f=Ue;Ue&=-2,Ue|=8;try{return s(u)}finally{Ue=f,Ue===0&&(Vr(),ir())}},Be.updateContainer=function(s,u,f,g){var E=u.current,T=xt(),B=cr(E);e:if(f){f=f._reactInternals;t:{if(lo(f)!==f||f.tag!==1)throw Error(me(170));var k=f;do{switch(k.tag){case 3:k=k.stateNode.context;break t;case 1:if(Hn(k.type)){k=k.stateNode.__reactInternalMemoizedMergedChildContext;break t}}k=k.return}while(k!==null);throw Error(me(171))}if(f.tag===1){var Z=f.type;if(Hn(Z)){f=xl(f,Z,k);break e}}f=k}else f=Li;return u.context===null?u.context=f:u.pendingContext=f,u=ri(T,B),u.payload={element:s},g=g===void 0?null:g,g!==null&&(u.callback=g),ii(E,u),$n(E,B,T),B},Be}}).call(this,w("YuTi")(Qr))},"MHn+":function(Qr,ta,w){"use strict";w.d(ta,"a",function(){return AM}),w.d(ta,"b",function(){return wM});var b={};w.r(b),w.d(b,"ACESFilmicToneMapping",function(){return ml}),w.d(b,"AddEquation",function(){return Dr}),w.d(b,"AddOperation",function(){return Vc}),w.d(b,"AdditiveAnimationBlendMode",function(){return Ao}),w.d(b,"AdditiveBlending",function(){return us}),w.d(b,"AlphaFormat",function(){return Li}),w.d(b,"AlwaysDepth",function(){return Fc}),w.d(b,"AlwaysStencilFunc",function(){return ja}),w.d(b,"AmbientLight",function(){return hh}),w.d(b,"AmbientLightProbe",function(){return Qd}),w.d(b,"AnimationClip",function(){return Xr}),w.d(b,"AnimationLoader",function(){return Bd}),w.d(b,"AnimationMixer",function(){return np}),w.d(b,"AnimationObjectGroup",function(){return kv}),w.d(b,"AnimationUtils",function(){return nn}),w.d(b,"ArcCurve",function(){return sl}),w.d(b,"ArrayCamera",function(){return Cf}),w.d(b,"ArrowHelper",function(){return xx}),w.d(b,"Audio",function(){return $d}),w.d(b,"AudioAnalyser",function(){return Uv}),w.d(b,"AudioContext",function(){return Jd}),w.d(b,"AudioListener",function(){return Q0}),w.d(b,"AudioLoader",function(){return yh}),w.d(b,"AxesHelper",function(){return im}),w.d(b,"AxisHelper",function(){return Kx}),w.d(b,"BackSide",function(){return un}),w.d(b,"BasicDepthPacking",function(){return Il}),w.d(b,"BasicShadowMap",function(){return lo}),w.d(b,"BinaryTextureLoader",function(){return nM}),w.d(b,"Bone",function(){return uc}),w.d(b,"BooleanKeyframeTrack",function(){return eh}),w.d(b,"BoundingBoxHelper",function(){return $x}),w.d(b,"Box2",function(){return jv}),w.d(b,"Box3",function(){return Fn}),w.d(b,"Box3Helper",function(){return gx}),w.d(b,"BoxBufferGeometry",function(){return lr}),w.d(b,"BoxGeometry",function(){return hd}),w.d(b,"BoxHelper",function(){return nm}),w.d(b,"BufferAttribute",function(){return We}),w.d(b,"BufferGeometry",function(){return Ne}),w.d(b,"BufferGeometryLoader",function(){return mh}),w.d(b,"ByteType",function(){return yl}),w.d(b,"Cache",function(){return Ks}),w.d(b,"Camera",function(){return Kn}),w.d(b,"CameraHelper",function(){return mx}),w.d(b,"CanvasRenderer",function(){return aM}),w.d(b,"CanvasTexture",function(){return fc}),w.d(b,"CatmullRomCurve3",function(){return er}),w.d(b,"CineonToneMapping",function(){return jc}),w.d(b,"CircleBufferGeometry",function(){return dd}),w.d(b,"CircleGeometry",function(){return ov}),w.d(b,"ClampToEdgeWrapping",function(){return Un}),w.d(b,"Clock",function(){return Kd}),w.d(b,"ClosedSplineCurve3",function(){return dm}),w.d(b,"Color",function(){return Pe}),w.d(b,"ColorKeyframeTrack",function(){return th}),w.d(b,"CompressedTexture",function(){return el}),w.d(b,"CompressedTextureLoader",function(){return Dd}),w.d(b,"ConeBufferGeometry",function(){return uv}),w.d(b,"ConeGeometry",function(){return sv}),w.d(b,"CubeCamera",function(){return gi}),w.d(b,"CubeGeometry",function(){return hd}),w.d(b,"CubeReflectionMapping",function(){return ds}),w.d(b,"CubeRefractionMapping",function(){return ps}),w.d(b,"CubeTexture",function(){return cn}),w.d(b,"CubeTextureLoader",function(){return ih}),w.d(b,"CubeUVReflectionMapping",function(){return vo}),w.d(b,"CubeUVRefractionMapping",function(){return mo}),w.d(b,"CubicBezierCurve",function(){return Yi}),w.d(b,"CubicBezierCurve3",function(){return Ta}),w.d(b,"CubicInterpolant",function(){return $f}),w.d(b,"CullFaceBack",function(){return na}),w.d(b,"CullFaceFront",function(){return ra}),w.d(b,"CullFaceFrontBack",function(){return Or}),w.d(b,"CullFaceNone",function(){return sn}),w.d(b,"Curve",function(){return je}),w.d(b,"CurvePath",function(){return ao}),w.d(b,"CustomBlending",function(){return ls}),w.d(b,"CustomToneMapping",function(){return gl}),w.d(b,"CylinderBufferGeometry",function(){return dc}),w.d(b,"CylinderGeometry",function(){return pd}),w.d(b,"Cylindrical",function(){return lx}),w.d(b,"DataTexture",function(){return qn}),w.d(b,"DataTexture2DArray",function(){return ju}),w.d(b,"DataTexture3D",function(){return Xu}),w.d(b,"DataTextureLoader",function(){return ah}),w.d(b,"DataUtils",function(){return Sx}),w.d(b,"DecrementStencilOp",function(){return uf}),w.d(b,"DecrementWrapStencilOp",function(){return wu}),w.d(b,"DefaultLoadingManager",function(){return Cv}),w.d(b,"DepthFormat",function(){return qr}),w.d(b,"DepthStencilFormat",function(){return Ha}),w.d(b,"DepthTexture",function(){return hc}),w.d(b,"DirectionalLight",function(){return fh}),w.d(b,"DirectionalLightHelper",function(){return vx}),w.d(b,"DiscreteInterpolant",function(){return qf}),w.d(b,"DodecahedronBufferGeometry",function(){return vd}),w.d(b,"DodecahedronGeometry",function(){return lv}),w.d(b,"DoubleSide",function(){return mn}),w.d(b,"DstAlphaFactor",function(){return ou}),w.d(b,"DstColorFactor",function(){return Ic}),w.d(b,"DynamicBufferAttribute",function(){return kx}),w.d(b,"DynamicCopyUsage",function(){return Ii}),w.d(b,"DynamicDrawUsage",function(){return Oi}),w.d(b,"DynamicReadUsage",function(){return Fl}),w.d(b,"EdgesGeometry",function(){return gd}),w.d(b,"EdgesHelper",function(){return qx}),w.d(b,"EllipseCurve",function(){return Yr}),w.d(b,"EqualDepth",function(){return zc}),w.d(b,"EqualStencilFunc",function(){return Eu}),w.d(b,"EquirectangularReflectionMapping",function(){return uu}),w.d(b,"EquirectangularRefractionMapping",function(){return po}),w.d(b,"Euler",function(){return Fo}),w.d(b,"EventDispatcher",function(){return Nr}),w.d(b,"ExtrudeBufferGeometry",function(){return gc}),w.d(b,"ExtrudeGeometry",function(){return Md}),w.d(b,"Face3",function(){return qa}),w.d(b,"Face4",function(){return Ax}),w.d(b,"FaceColors",function(){return Px}),w.d(b,"FileLoader",function(){return Si}),w.d(b,"FlatShading",function(){return Ti}),w.d(b,"Float16BufferAttribute",function(){return to}),w.d(b,"Float32Attribute",function(){return Zx}),w.d(b,"Float32BufferAttribute",function(){return Se}),w.d(b,"Float64Attribute",function(){return Qx}),w.d(b,"Float64BufferAttribute",function(){return Ho}),w.d(b,"FloatType",function(){return xr}),w.d(b,"Fog",function(){return Jp}),w.d(b,"FogExp2",function(){return Yp}),w.d(b,"Font",function(){return Xd}),w.d(b,"FontLoader",function(){return Yd}),w.d(b,"FrontSide",function(){return Ei}),w.d(b,"Frustum",function(){return Wo}),w.d(b,"GLBufferAttribute",function(){return ip}),w.d(b,"GLSL1",function(){return ai}),w.d(b,"GLSL3",function(){return Au}),w.d(b,"GammaEncoding",function(){return kn}),w.d(b,"Geometry",function(){return Xt}),w.d(b,"GeometryUtils",function(){return iM}),w.d(b,"GreaterDepth",function(){return Uc}),w.d(b,"GreaterEqualDepth",function(){return Gc}),w.d(b,"GreaterEqualStencilFunc",function(){return Es}),w.d(b,"GreaterStencilFunc",function(){return bs}),w.d(b,"GridHelper",function(){return qv}),w.d(b,"Group",function(){return Ko}),w.d(b,"HalfFloatType",function(){return za}),w.d(b,"HemisphereLight",function(){return uh}),w.d(b,"HemisphereLightHelper",function(){return dx}),w.d(b,"HemisphereLightProbe",function(){return Zd}),w.d(b,"IcosahedronBufferGeometry",function(){return Sd}),w.d(b,"IcosahedronGeometry",function(){return mv}),w.d(b,"ImageBitmapLoader",function(){return Wd}),w.d(b,"ImageLoader",function(){return ol}),w.d(b,"ImageUtils",function(){return Ln}),w.d(b,"ImmediateRenderObject",function(){return Ec}),w.d(b,"IncrementStencilOp",function(){return sf}),w.d(b,"IncrementWrapStencilOp",function(){return Dl}),w.d(b,"InstancedBufferAttribute",function(){return vh}),w.d(b,"InstancedBufferGeometry",function(){return bc}),w.d(b,"InstancedInterleavedBuffer",function(){return rp}),w.d(b,"InstancedMesh",function(){return Nf}),w.d(b,"Int16Attribute",function(){return jx}),w.d(b,"Int16BufferAttribute",function(){return ma}),w.d(b,"Int32Attribute",function(){return Yx}),w.d(b,"Int32BufferAttribute",function(){return Ui}),w.d(b,"Int8Attribute",function(){return Vx}),w.d(b,"Int8BufferAttribute",function(){return da}),w.d(b,"IntType",function(){return So}),w.d(b,"InterleavedBuffer",function(){return Wr}),w.d(b,"InterleavedBufferAttribute",function(){return $o}),w.d(b,"Interpolant",function(){return jr}),w.d(b,"InterpolateDiscrete",function(){return Ss}),w.d(b,"InterpolateLinear",function(){return la}),w.d(b,"InterpolateSmooth",function(){return gu}),w.d(b,"InvertStencilOp",function(){return ws}),w.d(b,"JSONLoader",function(){return oM}),w.d(b,"KeepStencilOp",function(){return Wa}),w.d(b,"KeyframeTrack",function(){return _n}),w.d(b,"LOD",function(){return oc}),w.d(b,"LatheBufferGeometry",function(){return wd}),w.d(b,"LatheGeometry",function(){return gv}),w.d(b,"Layers",function(){return Os}),w.d(b,"LensFlare",function(){return uM}),w.d(b,"LessDepth",function(){return Nc}),w.d(b,"LessEqualDepth",function(){return oa}),w.d(b,"LessEqualStencilFunc",function(){return cf}),w.d(b,"LessStencilFunc",function(){return lf}),w.d(b,"Light",function(){return Qt}),w.d(b,"LightProbe",function(){return wi}),w.d(b,"Line",function(){return Mi}),w.d(b,"Line3",function(){return Yv}),w.d(b,"LineBasicMaterial",function(){return fn}),w.d(b,"LineCurve",function(){return Pr}),w.d(b,"LineCurve3",function(){return Ji}),w.d(b,"LineDashedMaterial",function(){return Qs}),w.d(b,"LineLoop",function(){return kf}),w.d(b,"LinePieces",function(){return Cx}),w.d(b,"LineSegments",function(){return fr}),w.d(b,"LineStrip",function(){return Lx}),w.d(b,"LinearEncoding",function(){return Bn}),w.d(b,"LinearFilter",function(){return Tn}),w.d(b,"LinearInterpolant",function(){return xc}),w.d(b,"LinearMipMapLinearFilter",function(){return Vh}),w.d(b,"LinearMipMapNearestFilter",function(){return Xc}),w.d(b,"LinearMipmapLinearFilter",function(){return xo}),w.d(b,"LinearMipmapNearestFilter",function(){return ms}),w.d(b,"LinearToneMapping",function(){return _c}),w.d(b,"Loader",function(){return Vt}),w.d(b,"LoaderUtils",function(){return _d}),w.d(b,"LoadingManager",function(){return Id}),w.d(b,"LogLuvEncoding",function(){return xu}),w.d(b,"LoopOnce",function(){return nf}),w.d(b,"LoopPingPong",function(){return ar}),w.d(b,"LoopRepeat",function(){return rf}),w.d(b,"LuminanceAlphaFormat",function(){return Ua}),w.d(b,"LuminanceFormat",function(){return sa}),w.d(b,"MOUSE",function(){return $t}),w.d(b,"Material",function(){return Qe}),w.d(b,"MaterialLoader",function(){return ph}),w.d(b,"Math",function(){return Ke}),w.d(b,"MathUtils",function(){return Ke}),w.d(b,"Matrix3",function(){return In}),w.d(b,"Matrix4",function(){return ct}),w.d(b,"MaxEquation",function(){return fs}),w.d(b,"Mesh",function(){return It}),w.d(b,"MeshBasicMaterial",function(){return Qn}),w.d(b,"MeshDepthMaterial",function(){return Zo}),w.d(b,"MeshDistanceMaterial",function(){return Qo}),w.d(b,"MeshFaceMaterial",function(){return Ix}),w.d(b,"MeshLambertMaterial",function(){return Js}),w.d(b,"MeshMatcapMaterial",function(){return Zs}),w.d(b,"MeshNormalMaterial",function(){return Ys}),w.d(b,"MeshPhongMaterial",function(){return ns}),w.d(b,"MeshPhysicalMaterial",function(){return ts}),w.d(b,"MeshStandardMaterial",function(){return Ea}),w.d(b,"MeshToonMaterial",function(){return Xs}),w.d(b,"MinEquation",function(){return hl}),w.d(b,"MirroredRepeatWrapping",function(){return yo}),w.d(b,"MixOperation",function(){return kc}),w.d(b,"MultiMaterial",function(){return Bx}),w.d(b,"MultiplyBlending",function(){return co}),w.d(b,"MultiplyOperation",function(){return hs}),w.d(b,"NearestFilter",function(){return gn}),w.d(b,"NearestMipMapLinearFilter",function(){return kh}),w.d(b,"NearestMipMapNearestFilter",function(){return Hh}),w.d(b,"NearestMipmapLinearFilter",function(){return lu}),w.d(b,"NearestMipmapNearestFilter",function(){return vs}),w.d(b,"NeverDepth",function(){return Dc}),w.d(b,"NeverStencilFunc",function(){return bu}),w.d(b,"NoBlending",function(){return Br}),w.d(b,"NoColors",function(){return Rx}),w.d(b,"NoToneMapping",function(){return Da}),w.d(b,"NormalAnimationBlendMode",function(){return Pi}),w.d(b,"NormalBlending",function(){return ia}),w.d(b,"NotEqualDepth",function(){return Hc}),w.d(b,"NotEqualStencilFunc",function(){return Sr}),w.d(b,"NumberKeyframeTrack",function(){return il}),w.d(b,"Object3D",function(){return Fe}),w.d(b,"ObjectLoader",function(){return j0}),w.d(b,"ObjectSpaceNormalMap",function(){return Bl}),w.d(b,"OctahedronBufferGeometry",function(){return Qf}),w.d(b,"OctahedronGeometry",function(){return yv}),w.d(b,"OneFactor",function(){return gr}),w.d(b,"OneMinusDstAlphaFactor",function(){return vl}),w.d(b,"OneMinusDstColorFactor",function(){return Bc}),w.d(b,"OneMinusSrcAlphaFactor",function(){return pl}),w.d(b,"OneMinusSrcColorFactor",function(){return yr}),w.d(b,"OrthographicCamera",function(){return $s}),w.d(b,"PCFShadowMap",function(){return Oa}),w.d(b,"PCFSoftShadowMap",function(){return Kr}),w.d(b,"PMREMGenerator",function(){return wx}),w.d(b,"ParametricBufferGeometry",function(){return rl}),w.d(b,"ParametricGeometry",function(){return yc}),w.d(b,"Particle",function(){return Fx}),w.d(b,"ParticleBasicMaterial",function(){return Gx}),w.d(b,"ParticleSystem",function(){return Nx}),w.d(b,"ParticleSystemMaterial",function(){return Ux}),w.d(b,"Path",function(){return Ki}),w.d(b,"PerspectiveCamera",function(){return xt}),w.d(b,"Plane",function(){return Zn}),w.d(b,"PlaneBufferGeometry",function(){return jo}),w.d(b,"PlaneGeometry",function(){return xv}),w.d(b,"PlaneHelper",function(){return yx}),w.d(b,"PointCloud",function(){return Dx}),w.d(b,"PointCloudMaterial",function(){return zx}),w.d(b,"PointLight",function(){return ch}),w.d(b,"PointLightHelper",function(){return fx}),w.d(b,"Points",function(){return qu}),w.d(b,"PointsMaterial",function(){return ji}),w.d(b,"PolarGridHelper",function(){return px}),w.d(b,"PolyhedronBufferGeometry",function(){return Ws}),w.d(b,"PolyhedronGeometry",function(){return Mv}),w.d(b,"PositionalAudio",function(){return $0}),w.d(b,"PropertyBinding",function(){return tr}),w.d(b,"PropertyMixer",function(){return qd}),w.d(b,"QuadraticBezierCurve",function(){return Zi}),w.d(b,"QuadraticBezierCurve3",function(){return Aa}),w.d(b,"Quaternion",function(){return Ot}),w.d(b,"QuaternionKeyframeTrack",function(){return Mc}),w.d(b,"QuaternionLinearInterpolant",function(){return nh}),w.d(b,"REVISION",function(){return uo}),w.d(b,"RGBADepthPacking",function(){return Lo}),w.d(b,"RGBAFormat",function(){return Wt}),w.d(b,"RGBAIntegerFormat",function(){return Jc}),w.d(b,"RGBA_ASTC_10x10_Format",function(){return xs}),w.d(b,"RGBA_ASTC_10x5_Format",function(){return bl}),w.d(b,"RGBA_ASTC_10x6_Format",function(){return pu}),w.d(b,"RGBA_ASTC_10x8_Format",function(){return ef}),w.d(b,"RGBA_ASTC_12x10_Format",function(){return El}),w.d(b,"RGBA_ASTC_12x12_Format",function(){return Tl}),w.d(b,"RGBA_ASTC_4x4_Format",function(){return Ri}),w.d(b,"RGBA_ASTC_5x4_Format",function(){return Zc}),w.d(b,"RGBA_ASTC_5x5_Format",function(){return Qc}),w.d(b,"RGBA_ASTC_6x5_Format",function(){return Kc}),w.d(b,"RGBA_ASTC_6x6_Format",function(){return $c}),w.d(b,"RGBA_ASTC_8x5_Format",function(){return hu}),w.d(b,"RGBA_ASTC_8x6_Format",function(){return du}),w.d(b,"RGBA_ASTC_8x8_Format",function(){return qc}),w.d(b,"RGBA_BPTC_Format",function(){return Al}),w.d(b,"RGBA_ETC2_EAC_Format",function(){return Eo}),w.d(b,"RGBA_PVRTC_2BPPV1_Format",function(){return bo}),w.d(b,"RGBA_PVRTC_4BPPV1_Format",function(){return fu}),w.d(b,"RGBA_S3TC_DXT1_Format",function(){return Nt}),w.d(b,"RGBA_S3TC_DXT3_Format",function(){return Ci}),w.d(b,"RGBA_S3TC_DXT5_Format",function(){return Sl}),w.d(b,"RGBDEncoding",function(){return ii}),w.d(b,"RGBEEncoding",function(){return Fr}),w.d(b,"RGBEFormat",function(){return Hn}),w.d(b,"RGBFormat",function(){return qt}),w.d(b,"RGBIntegerFormat",function(){return ua}),w.d(b,"RGBM16Encoding",function(){return ri}),w.d(b,"RGBM7Encoding",function(){return Mu}),w.d(b,"RGB_ETC1_Format",function(){return Va}),w.d(b,"RGB_ETC2_Format",function(){return ys}),w.d(b,"RGB_PVRTC_2BPPV1_Format",function(){return ka}),w.d(b,"RGB_PVRTC_4BPPV1_Format",function(){return wl}),w.d(b,"RGB_S3TC_DXT1_Format",function(){return wo}),w.d(b,"RGFormat",function(){return Ml}),w.d(b,"RGIntegerFormat",function(){return cu}),w.d(b,"RawShaderMaterial",function(){return io}),w.d(b,"Ray",function(){return Bo}),w.d(b,"Raycaster",function(){return xh}),w.d(b,"RectAreaLight",function(){return dh}),w.d(b,"RedFormat",function(){return xl}),w.d(b,"RedIntegerFormat",function(){return gs}),w.d(b,"ReinhardToneMapping",function(){return Wc}),w.d(b,"RepeatWrapping",function(){return go}),w.d(b,"ReplaceStencilOp",function(){return of}),w.d(b,"ReverseSubtractEquation",function(){return Ba}),w.d(b,"RingBufferGeometry",function(){return bd}),w.d(b,"RingGeometry",function(){return Sv}),w.d(b,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return To}),w.d(b,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return _a}),w.d(b,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return Rl}),w.d(b,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return ti}),w.d(b,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return ir}),w.d(b,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return Pl}),w.d(b,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return Ll}),w.d(b,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return vu}),w.d(b,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return tf}),w.d(b,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return ei}),w.d(b,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return Ms}),w.d(b,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return mu}),w.d(b,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return Cl}),w.d(b,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return An}),w.d(b,"Scene",function(){return Pf}),w.d(b,"SceneUtils",function(){return sM}),w.d(b,"ShaderChunk",function(){return pt}),w.d(b,"ShaderLib",function(){return Wi}),w.d(b,"ShaderMaterial",function(){return Sn}),w.d(b,"ShadowMaterial",function(){return js}),w.d(b,"Shape",function(){return rs}),w.d(b,"ShapeBufferGeometry",function(){return Ed}),w.d(b,"ShapeGeometry",function(){return Td}),w.d(b,"ShapePath",function(){return jd}),w.d(b,"ShapeUtils",function(){return ro}),w.d(b,"ShortType",function(){return Yc}),w.d(b,"Skeleton",function(){return lc}),w.d(b,"SkeletonHelper",function(){return Zv}),w.d(b,"SkinnedMesh",function(){return sc}),w.d(b,"SmoothShading",function(){return $r}),w.d(b,"Sphere",function(){return ci}),w.d(b,"SphereBufferGeometry",function(){return Kf}),w.d(b,"SphereGeometry",function(){return wv}),w.d(b,"Spherical",function(){return ux}),w.d(b,"SphericalHarmonics3",function(){return Pv}),w.d(b,"Spline",function(){return dp}),w.d(b,"SplineCurve",function(){return Qi}),w.d(b,"SplineCurve3",function(){return pm}),w.d(b,"SpotLight",function(){return lh}),w.d(b,"SpotLightHelper",function(){return cx}),w.d(b,"Sprite",function(){return ac}),w.d(b,"SpriteMaterial",function(){return qo}),w.d(b,"SrcAlphaFactor",function(){return dl}),w.d(b,"SrcAlphaSaturateFactor",function(){return ho}),w.d(b,"SrcColorFactor",function(){return fo}),w.d(b,"StaticCopyUsage",function(){return Tu}),w.d(b,"StaticDrawUsage",function(){return Xn}),w.d(b,"StaticReadUsage",function(){return ff}),w.d(b,"StereoCamera",function(){return Fv}),w.d(b,"StreamCopyUsage",function(){return Xa}),w.d(b,"StreamDrawUsage",function(){return Co}),w.d(b,"StreamReadUsage",function(){return ln}),w.d(b,"StringKeyframeTrack",function(){return rh}),w.d(b,"SubtractEquation",function(){return cs}),w.d(b,"SubtractiveBlending",function(){return Ia}),w.d(b,"TOUCH",function(){return Pa}),w.d(b,"TangentSpaceNormalMap",function(){return fa}),w.d(b,"TetrahedronBufferGeometry",function(){return Ad}),w.d(b,"TetrahedronGeometry",function(){return bv}),w.d(b,"TextBufferGeometry",function(){return Ld}),w.d(b,"TextGeometry",function(){return Ev}),w.d(b,"Texture",function(){return $e}),w.d(b,"TextureLoader",function(){return oh}),w.d(b,"TorusBufferGeometry",function(){return Cd}),w.d(b,"TorusGeometry",function(){return Tv}),w.d(b,"TorusKnotBufferGeometry",function(){return Rd}),w.d(b,"TorusKnotGeometry",function(){return Av}),w.d(b,"Triangle",function(){return br}),w.d(b,"TriangleFanDrawMode",function(){return Ol}),w.d(b,"TriangleStripDrawMode",function(){return af}),w.d(b,"TrianglesDrawMode",function(){return yu}),w.d(b,"TubeBufferGeometry",function(){return Pd}),w.d(b,"TubeGeometry",function(){return Lv}),w.d(b,"UVMapping",function(){return su}),w.d(b,"Uint16Attribute",function(){return Xx}),w.d(b,"Uint16BufferAttribute",function(){return vi}),w.d(b,"Uint32Attribute",function(){return Jx}),w.d(b,"Uint32BufferAttribute",function(){return Hi}),w.d(b,"Uint8Attribute",function(){return _x}),w.d(b,"Uint8BufferAttribute",function(){return pa}),w.d(b,"Uint8ClampedAttribute",function(){return Wx}),w.d(b,"Uint8ClampedBufferAttribute",function(){return va}),w.d(b,"Uniform",function(){return Vv}),w.d(b,"UniformsLib",function(){return we}),w.d(b,"UniformsUtils",function(){return ks}),w.d(b,"UnsignedByteType",function(){return Mo}),w.d(b,"UnsignedInt248Type",function(){return Gt}),w.d(b,"UnsignedIntType",function(){return Na}),w.d(b,"UnsignedShort4444Type",function(){return Ga}),w.d(b,"UnsignedShort5551Type",function(){return Ai}),w.d(b,"UnsignedShort565Type",function(){return _t}),w.d(b,"UnsignedShortType",function(){return Fa}),w.d(b,"VSMShadowMap",function(){return Ir}),w.d(b,"Vector2",function(){return se}),w.d(b,"Vector3",function(){return I}),w.d(b,"Vector4",function(){return it}),w.d(b,"VectorKeyframeTrack",function(){return al}),w.d(b,"Vertex",function(){return Hx}),w.d(b,"VertexColors",function(){return Ox}),w.d(b,"VideoTexture",function(){return cd}),w.d(b,"WebGL1Renderer",function(){return Rf}),w.d(b,"WebGLCubeRenderTarget",function(){return yi}),w.d(b,"WebGLMultisampleRenderTarget",function(){return Ja}),w.d(b,"WebGLRenderTarget",function(){return Dn}),w.d(b,"WebGLRenderTargetCube",function(){return rM}),w.d(b,"WebGLRenderer",function(){return Ju}),w.d(b,"WebGLUtils",function(){return jp}),w.d(b,"WireframeGeometry",function(){return Od}),w.d(b,"WireframeHelper",function(){return eM}),w.d(b,"WrapAroundEnding",function(){return ca}),w.d(b,"XHRLoader",function(){return tM}),w.d(b,"ZeroCurvatureEnding",function(){return On}),w.d(b,"ZeroFactor",function(){return aa}),w.d(b,"ZeroSlopeEnding",function(){return ni}),w.d(b,"ZeroStencilOp",function(){return Su}),w.d(b,"sRGBEncoding",function(){return Mr});var Yt=w("uFwe"),ve=w("s4An"),Be=w("2WcH");function Ye(r,t,e){return Object(Be.a)()?Ye=Reflect.construct:Ye=function(i,a,o){var l=[null];l.push.apply(l,a);var c=Function.bind.apply(i,l),h=new c;return o&&Object(ve.a)(h,o.prototype),h},Ye.apply(null,arguments)}var Tt=w("Ff2n"),dt=w("KQm4"),me=w("T5bk"),Ft=w("ODXe"),et=w("VTBJ"),Jt=w("wx14"),vn=w("md7G"),Wn=w("foSv");function Ra(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=Object(Wn.a)(r),r!==null););return r}function Lt(r,t,e){return typeof Reflect!="undefined"&&Reflect.get?Lt=Reflect.get:Lt=function(i,a,o){var l=Ra(i,a);if(!!l){var c=Object.getOwnPropertyDescriptor(l,a);return c.get?c.get.call(o):c.value}},Lt(r,t,e||r)}var _e=w("rePB"),dn=w("JX7q"),Re=w("Ji7U"),De=w("LK+K"),pe=w("1OyB"),Ge=w("vuIU"),jn,uo="123",$t={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sn=0,na=1,ra=2,Or=3,lo=0,Oa=1,Kr=2,Ir=3,Ei=0,un=1,mn=2,Ti=1,$r=2,Br=0,ia=1,us=2,Ia=3,co=4,ls=5,Dr=100,cs=101,Ba=102,hl=103,fs=104,aa=200,gr=201,fo=202,yr=203,dl=204,pl=205,ou=206,vl=207,Ic=208,Bc=209,ho=210,Dc=0,Fc=1,Nc=2,oa=3,zc=4,Gc=5,Uc=6,Hc=7,hs=0,kc=1,Vc=2,Da=0,_c=1,Wc=2,jc=3,ml=4,gl=5,su=300,ds=301,ps=302,uu=303,po=304,vo=306,mo=307,go=1e3,Un=1001,yo=1002,gn=1003,vs=1004,Hh=1004,lu=1005,kh=1005,Tn=1006,ms=1007,Xc=1007,xo=1008,Vh=1008,Mo=1009,yl=1010,Yc=1011,Fa=1012,So=1013,Na=1014,xr=1015,za=1016,Ga=1017,Ai=1018,_t=1019,Gt=1020,Li=1021,qt=1022,Wt=1023,sa=1024,Ua=1025,Hn=Wt,qr=1026,Ha=1027,xl=1028,gs=1029,Ml=1030,cu=1031,ua=1032,Jc=1033,wo=33776,Nt=33777,Ci=33778,Sl=33779,wl=35840,ka=35841,fu=35842,bo=35843,Va=36196,ys=37492,Eo=37496,Ri=37808,Zc=37809,Qc=37810,Kc=37811,$c=37812,hu=37813,du=37814,qc=37815,bl=37816,pu=37817,ef=37818,xs=37819,El=37820,Tl=37821,Al=36492,Ll=37840,vu=37841,tf=37842,ei=37843,Ms=37844,mu=37845,Cl=37846,An=37847,_a=37848,Rl=37849,ti=37850,To=37851,ir=37852,Pl=37853,nf=2200,rf=2201,ar=2202,Ss=2300,la=2301,gu=2302,On=2400,ni=2401,ca=2402,Pi=2500,Ao=2501,yu=0,af=1,Ol=2,Bn=3e3,Mr=3001,kn=3007,Fr=3002,xu=3003,Mu=3004,ri=3005,ii=3006,Il=3200,Lo=3201,fa=0,Bl=1,Su=0,Wa=7680,of=7681,sf=7682,uf=7683,Dl=34055,wu=34056,ws=5386,bu=512,lf=513,Eu=514,cf=515,bs=516,Sr=517,Es=518,ja=519,Xn=35044,Oi=35048,Co=35040,ff=35045,Fl=35049,ln=35041,Tu=35046,Ii=35050,Xa=35042,ai="100",Au="300 es";function Nr(){}Object.assign(Nr.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;var n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners!==void 0){var n=this._listeners,i=n[t];if(i!==void 0){var a=i.indexOf(e);a!==-1&&i.splice(a,1)}}},dispatchEvent:function(t){if(this._listeners!==void 0){var e=this._listeners,n=e[t.type];if(n!==void 0){t.target=this;for(var i=n.slice(0),a=0,o=i.length;a<o;a++)i[a].call(this,t)}}}});for(var Mn=[],Ro=0;Ro<256;Ro++)Mn[Ro]=(Ro<16?"0":"")+Ro.toString(16);var Ya=1234567,Ke={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0,a=Mn[t&255]+Mn[t>>8&255]+Mn[t>>16&255]+Mn[t>>24&255]+"-"+Mn[e&255]+Mn[e>>8&255]+"-"+Mn[e>>16&15|64]+Mn[e>>24&255]+"-"+Mn[n&63|128]+Mn[n>>8&255]+"-"+Mn[n>>16&255]+Mn[n>>24&255]+Mn[i&255]+Mn[i>>8&255]+Mn[i>>16&255]+Mn[i>>24&255];return a.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,a){return i+(t-e)*(a-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(Ya=t%2147483647),Ya=Ya*16807%2147483647,(Ya-1)/2147483646},degToRad:function(t){return t*Ke.DEG2RAD},radToDeg:function(t){return t*Ke.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,a){var o=Math.cos,l=Math.sin,c=o(n/2),h=l(n/2),d=o((e+i)/2),p=l((e+i)/2),v=o((e-i)/2),m=l((e-i)/2),x=o((i-e)/2),M=l((i-e)/2);switch(a){case"XYX":t.set(c*p,h*v,h*m,c*d);break;case"YZY":t.set(h*m,c*p,h*v,c*d);break;case"ZXZ":t.set(h*v,h*m,c*p,c*d);break;case"XZX":t.set(c*p,h*M,h*x,c*d);break;case"YXY":t.set(h*x,c*p,h*M,c*d);break;case"ZYZ":t.set(h*M,h*x,c*p,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}},se=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Object(pe.a)(this,r),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.x=e,this.y=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var n=this.x,i=this.y,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6],this.y=a[1]*n+a[4]*i+a[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}},{key:"clampLength",value:function(e,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var n=this.x-e.x,i=this.y-e.y;return n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}},{key:"lerpVectors",value:function(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}},{key:"rotateAround",value:function(e,n){var i=Math.cos(n),a=Math.sin(n),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*a+e.x,this.y=o*a+l*i+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),r}(),In=function(){function r(){Object(pe.a)(this,r),Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a,o,l,c,h,d){var p=this.elements;return p[0]=e,p[1]=a,p[2]=c,p[3]=n,p[4]=o,p[5]=h,p[6]=i,p[7]=l,p[8]=d,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"copy",value:function(e){var n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}},{key:"extractBasis",value:function(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,n){var i=e.elements,a=n.elements,o=this.elements,l=i[0],c=i[3],h=i[6],d=i[1],p=i[4],v=i[7],m=i[2],x=i[5],M=i[8],A=a[0],S=a[3],y=a[6],O=a[1],P=a[4],L=a[7],C=a[2],R=a[5],N=a[8];return o[0]=l*A+c*O+h*C,o[3]=l*S+c*P+h*R,o[6]=l*y+c*L+h*N,o[1]=d*A+p*O+v*C,o[4]=d*S+p*P+v*R,o[7]=d*y+p*L+v*N,o[2]=m*A+x*O+M*C,o[5]=m*S+x*P+M*R,o[8]=m*y+x*L+M*N,this}},{key:"multiplyScalar",value:function(e){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8];return n*l*p-n*c*d-i*o*p+i*c*h+a*o*d-a*l*h}},{key:"invert",value:function(){var e=this.elements,n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8],v=p*l-c*d,m=c*h-p*o,x=d*o-l*h,M=n*v+i*m+a*x;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);var A=1/M;return e[0]=v*A,e[1]=(a*d-p*i)*A,e[2]=(c*i-a*l)*A,e[3]=m*A,e[4]=(p*n-a*h)*A,e[5]=(a*o-c*n)*A,e[6]=x*A,e[7]=(i*h-d*n)*A,e[8]=(l*n-i*o)*A,this}},{key:"transpose",value:function(){var e,n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}},{key:"setUvTransform",value:function(e,n,i,a,o,l,c){var h=Math.cos(o),d=Math.sin(o);this.set(i*h,i*d,-i*(h*l+d*c)+l+e,-a*d,a*h,-a*(-d*l+h*c)+c+n,0,0,1)}},{key:"scale",value:function(e,n){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}},{key:"rotate",value:function(e){var n=Math.cos(e),i=Math.sin(e),a=this.elements,o=a[0],l=a[3],c=a[6],h=a[1],d=a[4],p=a[7];return a[0]=n*o+i*h,a[3]=n*l+i*d,a[6]=n*c+i*p,a[1]=-i*o+n*h,a[4]=-i*l+n*d,a[7]=-i*c+n*p,this}},{key:"translate",value:function(e,n){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}},{key:"equals",value:function(e){for(var n=this.elements,i=e.elements,a=0;a<9;a++)if(n[a]!==i[a])return!1;return!0}},{key:"fromArray",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=0;i<9;i++)this.elements[i]=e[i+n];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}}]),r}(),oi,Ln={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{oi===void 0&&(oi=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),oi.width=t.width,oi.height=t.height;var n=oi.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=oi}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Ts=0;function $e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$e.DEFAULT_IMAGE,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$e.DEFAULT_MAPPING,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Un,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Un,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Tn,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:xo,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Wt,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Mo,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:Bn;Object.defineProperty(this,"id",{value:Ts++}),this.uuid=Ke.generateUUID(),this.name="",this.image=r,this.mipmaps=[],this.mapping=t,this.wrapS=e,this.wrapT=n,this.magFilter=i,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new se(0,0),this.repeat=new se(1,1),this.center=new se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new In,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.version=0,this.onUpdate=null}$e.DEFAULT_IMAGE=void 0,$e.DEFAULT_MAPPING=su,$e.prototype=Object.assign(Object.create(Nr.prototype),{constructor:$e,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var i=this.image;if(i.uuid===void 0&&(i.uuid=Ke.generateUUID()),!e&&t.images[i.uuid]===void 0){var a;if(Array.isArray(i)){a=[];for(var o=0,l=i.length;o<l;o++)i[o].isDataTexture?a.push(Cn(i[o].image)):a.push(Cn(i[o]))}else a=Cn(i);t.images[i.uuid]={uuid:i.uuid,url:a}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==su)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case go:t.x=t.x-Math.floor(t.x);break;case Un:t.x=t.x<0?0:1;break;case yo:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case go:t.y=t.y-Math.floor(t.y);break;case Un:t.y=t.y<0?0:1;break;case yo:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty($e.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Cn(r){return typeof HTMLImageElement!="undefined"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap?Ln.getDataURL(r):r.data?{data:Array.prototype.slice.call(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var it=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Object(pe.a)(this,r),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=i}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a){return this.x=e,this.y=n,this.z=i,this.w=a,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var n=this.x,i=this.y,a=this.z,o=this.w,l=e.elements;return this.x=l[0]*n+l[4]*i+l[8]*a+l[12]*o,this.y=l[1]*n+l[5]*i+l[9]*a+l[13]*o,this.z=l[2]*n+l[6]*i+l[10]*a+l[14]*o,this.w=l[3]*n+l[7]*i+l[11]*a+l[15]*o,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var n,i,a,o,l=.01,c=.1,h=e.elements,d=h[0],p=h[4],v=h[8],m=h[1],x=h[5],M=h[9],A=h[2],S=h[6],y=h[10];if(Math.abs(p-m)<l&&Math.abs(v-A)<l&&Math.abs(M-S)<l){if(Math.abs(p+m)<c&&Math.abs(v+A)<c&&Math.abs(M+S)<c&&Math.abs(d+x+y-3)<c)return this.set(1,0,0,0),this;n=Math.PI;var O=(d+1)/2,P=(x+1)/2,L=(y+1)/2,C=(p+m)/4,R=(v+A)/4,N=(M+S)/4;return O>P&&O>L?O<l?(i=0,a=.707106781,o=.707106781):(i=Math.sqrt(O),a=C/i,o=R/i):P>L?P<l?(i=.707106781,a=0,o=.707106781):(a=Math.sqrt(P),i=C/a,o=N/a):L<l?(i=.707106781,a=.707106781,o=0):(o=Math.sqrt(L),i=R/o,a=N/o),this.set(i,a,o,n),this}var V=Math.sqrt((S-M)*(S-M)+(v-A)*(v-A)+(m-p)*(m-p));return Math.abs(V)<.001&&(V=1),this.x=(S-M)/V,this.y=(v-A)/V,this.z=(m-p)/V,this.w=Math.acos((d+x+y-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}},{key:"clampLength",value:function(e,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}},{key:"lerpVectors",value:function(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),r}();function Dn(r,t,e){this.width=r,this.height=t,this.scissor=new it(0,0,r,t),this.scissorTest=!1,this.viewport=new it(0,0,r,t),e=e||{},this.texture=new $e(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.image={},this.texture.image.width=r,this.texture.image.height=t,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Tn,this.depthBuffer=e.depthBuffer!==void 0?e.depthBuffer:!0,this.stencilBuffer=e.stencilBuffer!==void 0?e.stencilBuffer:!1,this.depthTexture=e.depthTexture!==void 0?e.depthTexture:null}Dn.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Dn,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ja(r,t,e){Dn.call(this,r,t,e),this.samples=4}Ja.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Ja,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Dn.prototype.copy.call(this,t),this.samples=t.samples,this}});var Ot=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Object(pe.a)(this,r),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a){return this._x=e,this._y=n,this._z=i,this._w=a,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,a=e._y,o=e._z,l=e._order,c=Math.cos,h=Math.sin,d=c(i/2),p=c(a/2),v=c(o/2),m=h(i/2),x=h(a/2),M=h(o/2);switch(l){case"XYZ":this._x=m*p*v+d*x*M,this._y=d*x*v-m*p*M,this._z=d*p*M+m*x*v,this._w=d*p*v-m*x*M;break;case"YXZ":this._x=m*p*v+d*x*M,this._y=d*x*v-m*p*M,this._z=d*p*M-m*x*v,this._w=d*p*v+m*x*M;break;case"ZXY":this._x=m*p*v-d*x*M,this._y=d*x*v+m*p*M,this._z=d*p*M+m*x*v,this._w=d*p*v-m*x*M;break;case"ZYX":this._x=m*p*v-d*x*M,this._y=d*x*v+m*p*M,this._z=d*p*M-m*x*v,this._w=d*p*v+m*x*M;break;case"YZX":this._x=m*p*v+d*x*M,this._y=d*x*v+m*p*M,this._z=d*p*M-m*x*v,this._w=d*p*v-m*x*M;break;case"XZY":this._x=m*p*v-d*x*M,this._y=d*x*v-m*p*M,this._z=d*p*M+m*x*v,this._w=d*p*v+m*x*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n!==!1&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,n){var i=n/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var n=e.elements,i=n[0],a=n[4],o=n[8],l=n[1],c=n[5],h=n[9],d=n[2],p=n[6],v=n[10],m=i+c+v;if(m>0){var x=.5/Math.sqrt(m+1);this._w=.25/x,this._x=(p-h)*x,this._y=(o-d)*x,this._z=(l-a)*x}else if(i>c&&i>v){var M=2*Math.sqrt(1+i-c-v);this._w=(p-h)/M,this._x=.25*M,this._y=(a+l)/M,this._z=(o+d)/M}else if(c>v){var A=2*Math.sqrt(1+c-i-v);this._w=(o-d)/A,this._x=(a+l)/A,this._y=.25*A,this._z=(h+p)/A}else{var S=2*Math.sqrt(1+v-i-c);this._w=(l-a)/S,this._x=(o+d)/S,this._y=(h+p)/S,this._z=.25*S}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,n){var i=1e-6,a=e.dot(n)+1;return a<i?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=a),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Ke.clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,n){var i=this.angleTo(e);if(i===0)return this;var a=Math.min(1,n/i);return this.slerp(e,a),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,n){var i=e._x,a=e._y,o=e._z,l=e._w,c=n._x,h=n._y,d=n._z,p=n._w;return this._x=i*p+l*c+a*d-o*h,this._y=a*p+l*h+o*c-i*d,this._z=o*p+l*d+i*h-a*c,this._w=l*p-i*c-a*h-o*d,this._onChangeCallback(),this}},{key:"slerp",value:function(e,n){if(n===0)return this;if(n===1)return this.copy(e);var i=this._x,a=this._y,o=this._z,l=this._w,c=l*e._w+i*e._x+a*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=i,this._y=a,this._z=o,this;var h=1-c*c;if(h<=Number.EPSILON){var d=1-n;return this._w=d*l+n*this._w,this._x=d*i+n*this._x,this._y=d*a+n*this._y,this._z=d*o+n*this._z,this.normalize(),this._onChangeCallback(),this}var p=Math.sqrt(h),v=Math.atan2(p,c),m=Math.sin((1-n)*v)/p,x=Math.sin(n*v)/p;return this._w=l*m+this._w*x,this._x=i*m+this._x*x,this._y=a*m+this._y*x,this._z=o*m+this._z*x,this._onChangeCallback(),this}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerp",value:function(e,n,i,a){return i.copy(e).slerp(n,a)}},{key:"slerpFlat",value:function(e,n,i,a,o,l,c){var h=i[a+0],d=i[a+1],p=i[a+2],v=i[a+3],m=o[l+0],x=o[l+1],M=o[l+2],A=o[l+3];if(v!==A||h!==m||d!==x||p!==M){var S=1-c,y=h*m+d*x+p*M+v*A,O=y>=0?1:-1,P=1-y*y;if(P>Number.EPSILON){var L=Math.sqrt(P),C=Math.atan2(L,y*O);S=Math.sin(S*C)/L,c=Math.sin(c*C)/L}var R=c*O;if(h=h*S+m*R,d=d*S+x*R,p=p*S+M*R,v=v*S+A*R,S===1-c){var N=1/Math.sqrt(h*h+d*d+p*p+v*v);h*=N,d*=N,p*=N,v*=N}}e[n]=h,e[n+1]=d,e[n+2]=p,e[n+3]=v}},{key:"multiplyQuaternionsFlat",value:function(e,n,i,a,o,l){var c=i[a],h=i[a+1],d=i[a+2],p=i[a+3],v=o[l],m=o[l+1],x=o[l+2],M=o[l+3];return e[n]=c*M+p*v+h*x-d*m,e[n+1]=h*M+p*m+d*v-c*x,e[n+2]=d*M+p*x+c*m-h*v,e[n+3]=p*M-c*v-h*m-d*x,e}}]),r}(),I=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;Object(pe.a)(this,r),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}},{key:"addScaledVector",value:function(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}},{key:"sub",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ha.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,n){return this.applyQuaternion(ha.setFromAxisAngle(e,n))}},{key:"applyMatrix3",value:function(e){var n=this.x,i=this.y,a=this.z,o=e.elements;return this.x=o[0]*n+o[3]*i+o[6]*a,this.y=o[1]*n+o[4]*i+o[7]*a,this.z=o[2]*n+o[5]*i+o[8]*a,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var n=this.x,i=this.y,a=this.z,o=e.elements,l=1/(o[3]*n+o[7]*i+o[11]*a+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*a+o[12])*l,this.y=(o[1]*n+o[5]*i+o[9]*a+o[13])*l,this.z=(o[2]*n+o[6]*i+o[10]*a+o[14])*l,this}},{key:"applyQuaternion",value:function(e){var n=this.x,i=this.y,a=this.z,o=e.x,l=e.y,c=e.z,h=e.w,d=h*n+l*a-c*i,p=h*i+c*n-o*a,v=h*a+o*i-l*n,m=-o*n-l*i-c*a;return this.x=d*h+m*-o+p*-c-v*-l,this.y=p*h+m*-l+v*-o-d*-c,this.z=v*h+m*-c+d*-l-p*-o,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var n=this.x,i=this.y,a=this.z,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*a,this.y=o[1]*n+o[5]*i+o[9]*a,this.z=o[2]*n+o[6]*i+o[10]*a,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}},{key:"clampScalar",value:function(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}},{key:"clampLength",value:function(e,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}},{key:"lerpVectors",value:function(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}},{key:"cross",value:function(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,n){var i=e.x,a=e.y,o=e.z,l=n.x,c=n.y,h=n.z;return this.x=a*h-o*c,this.y=o*l-i*h,this.z=i*c-a*l,this}},{key:"projectOnVector",value:function(e){var n=e.lengthSq();if(n===0)return this.set(0,0,0);var i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}},{key:"projectOnPlane",value:function(e){return As.copy(this).projectOnVector(e),this.sub(As)}},{key:"reflect",value:function(e){return this.sub(As.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;var i=this.dot(e)/n;return Math.acos(Ke.clamp(i,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var n=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return n*n+i*i+a*a}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,n,i){var a=Math.sin(n)*e;return this.x=a*Math.sin(i),this.y=Math.cos(n)*e,this.z=a*Math.cos(i),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}},{key:"setFromMatrixPosition",value:function(e){var n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}},{key:"setFromMatrixScale",value:function(e){var n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=a,this}},{key:"setFromMatrixColumn",value:function(e,n){return this.fromArray(e.elements,n*4)}},{key:"setFromMatrix3Column",value:function(e,n){return this.fromArray(e.elements,n*3)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),r}(),As=new I,ha=new Ot,Fn=function(){function r(t,e){Object(pe.a)(this,r),Object.defineProperty(this,"isBox3",{value:!0}),this.min=t!==void 0?t:new I(Infinity,Infinity,Infinity),this.max=e!==void 0?e:new I(-Infinity,-Infinity,-Infinity)}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.min.copy(e),this.max.copy(n),this}},{key:"setFromArray",value:function(e){for(var n=Infinity,i=Infinity,a=Infinity,o=-Infinity,l=-Infinity,c=-Infinity,h=0,d=e.length;h<d;h+=3){var p=e[h],v=e[h+1],m=e[h+2];p<n&&(n=p),v<i&&(i=v),m<a&&(a=m),p>o&&(o=p),v>l&&(l=v),m>c&&(c=m)}return this.min.set(n,i,a),this.max.set(o,l,c),this}},{key:"setFromBufferAttribute",value:function(e){for(var n=Infinity,i=Infinity,a=Infinity,o=-Infinity,l=-Infinity,c=-Infinity,h=0,d=e.count;h<d;h++){var p=e.getX(h),v=e.getY(h),m=e.getZ(h);p<n&&(n=p),v<i&&(i=v),m<a&&(a=m),p>o&&(o=p),v>l&&(l=v),m>c&&(c=m)}return this.min.set(n,i,a),this.max.set(o,l,c),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}},{key:"setFromCenterAndSize",value:function(e,n){var i=Bi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new I),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new I),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Lu.copy(n.boundingBox),Lu.applyMatrix4(e.matrixWorld),this.union(Lu));for(var i=e.children,a=0,o=i.length;a<o;a++)this.expandByObject(i[a]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new I),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Bi),Bi.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Ka),Po.subVectors(this.max,Ka),Za.subVectors(e.a,Ka),Qa.subVectors(e.b,Ka),si.subVectors(e.c,Ka),zr.subVectors(Qa,Za),Di.subVectors(si,Qa),ui.subVectors(Za,si);var n=[0,-zr.z,zr.y,0,-Di.z,Di.y,0,-ui.z,ui.y,zr.z,0,-zr.x,Di.z,0,-Di.x,ui.z,0,-ui.x,-zr.y,zr.x,0,-Di.y,Di.x,0,-ui.y,ui.x,0];return!wr(n,Za,Qa,si,Po)||(n=[1,0,0,0,1,0,0,0,1],!wr(n,Za,Qa,si,Po))?!1:(Ls.crossVectors(zr,Di),n=[Ls.x,Ls.y,Ls.z],wr(n,Za,Qa,si,Po))}},{key:"clampPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new I),n.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var n=Bi.copy(e).clamp(this.min,this.max);return n.sub(e).length()}},{key:"getBoundingSphere",value:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Bi).length()*.5,e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()?this:(or[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),or[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),or[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),or[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),or[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),or[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),or[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),or[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(or),this)}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),r}();function wr(r,t,e,n,i){for(var a=0,o=r.length-3;a<=o;a+=3){li.fromArray(r,a);var l=i.x*Math.abs(li.x)+i.y*Math.abs(li.y)+i.z*Math.abs(li.z),c=t.dot(li),h=e.dot(li),d=n.dot(li);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>l)return!1}return!0}var or=[new I,new I,new I,new I,new I,new I,new I,new I],Bi=new I,Lu=new Fn,Za=new I,Qa=new I,si=new I,zr=new I,Di=new I,ui=new I,Ka=new I,Po=new I,Ls=new I,li=new I,hf=new Fn,ci=function(){function r(t,e){Object(pe.a)(this,r),this.center=t!==void 0?t:new I,this.radius=e!==void 0?e:-1}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.center.copy(e),this.radius=n,this}},{key:"setFromPoints",value:function(e,n){var i=this.center;n!==void 0?i.copy(n):hf.setFromPoints(e).getCenter(i);for(var a=0,o=0,l=e.length;o<l;o++)a=Math.max(a,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,n){var i=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new I),n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}},{key:"getBoundingBox",value:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Fn),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),r}(),fi=new I,Cs=new I,Rs=new I,Fi=new I,Nl=new I,Oo=new I,Io=new I,Bo=function(){function r(t,e){Object(pe.a)(this,r),this.origin=t!==void 0?t:new I,this.direction=e!==void 0?e:new I(0,0,-1)}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.origin.copy(e),this.direction.copy(n),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new I),n.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,fi)),this}},{key:"closestPointToPoint",value:function(e,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new I),n.subVectors(e,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var n=fi.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(fi.copy(this.direction).multiplyScalar(n).add(this.origin),fi.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,n,i,a){Cs.copy(e).add(n).multiplyScalar(.5),Rs.copy(n).sub(e).normalize(),Fi.copy(this.origin).sub(Cs);var o=e.distanceTo(n)*.5,l=-this.direction.dot(Rs),c=Fi.dot(this.direction),h=-Fi.dot(Rs),d=Fi.lengthSq(),p=Math.abs(1-l*l),v,m,x,M;if(p>0)if(v=l*h-c,m=l*c-h,M=o*p,v>=0)if(m>=-M)if(m<=M){var A=1/p;v*=A,m*=A,x=v*(v+l*m+2*c)+m*(l*v+m+2*h)+d}else m=o,v=Math.max(0,-(l*m+c)),x=-v*v+m*(m+2*h)+d;else m=-o,v=Math.max(0,-(l*m+c)),x=-v*v+m*(m+2*h)+d;else m<=-M?(v=Math.max(0,-(-l*o+c)),m=v>0?-o:Math.min(Math.max(-o,-h),o),x=-v*v+m*(m+2*h)+d):m<=M?(v=0,m=Math.min(Math.max(-o,-h),o),x=m*(m+2*h)+d):(v=Math.max(0,-(l*o+c)),m=v>0?o:Math.min(Math.max(-o,-h),o),x=-v*v+m*(m+2*h)+d);else m=l>0?-o:o,v=Math.max(0,-(l*m+c)),x=-v*v+m*(m+2*h)+d;return i&&i.copy(this.direction).multiplyScalar(v).add(this.origin),a&&a.copy(Rs).multiplyScalar(m).add(Cs),x}},{key:"intersectSphere",value:function(e,n){fi.subVectors(e.center,this.origin);var i=fi.dot(this.direction),a=fi.dot(fi)-i*i,o=e.radius*e.radius;if(a>o)return null;var l=Math.sqrt(o-a),c=i-l,h=i+l;return c<0&&h<0?null:c<0?this.at(h,n):this.at(c,n)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}},{key:"intersectPlane",value:function(e,n){var i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}},{key:"intersectsPlane",value:function(e){var n=e.distanceToPoint(this.origin);if(n===0)return!0;var i=e.normal.dot(this.direction);return i*n<0}},{key:"intersectBox",value:function(e,n){var i,a,o,l,c,h,d=1/this.direction.x,p=1/this.direction.y,v=1/this.direction.z,m=this.origin;return d>=0?(i=(e.min.x-m.x)*d,a=(e.max.x-m.x)*d):(i=(e.max.x-m.x)*d,a=(e.min.x-m.x)*d),p>=0?(o=(e.min.y-m.y)*p,l=(e.max.y-m.y)*p):(o=(e.max.y-m.y)*p,l=(e.min.y-m.y)*p),i>l||o>a||((o>i||i!==i)&&(i=o),(l<a||a!==a)&&(a=l),v>=0?(c=(e.min.z-m.z)*v,h=(e.max.z-m.z)*v):(c=(e.max.z-m.z)*v,h=(e.min.z-m.z)*v),i>h||c>a)||((c>i||i!==i)&&(i=c),(h<a||a!==a)&&(a=h),a<0)?null:this.at(i>=0?i:a,n)}},{key:"intersectsBox",value:function(e){return this.intersectBox(e,fi)!==null}},{key:"intersectTriangle",value:function(e,n,i,a,o){Nl.subVectors(n,e),Oo.subVectors(i,e),Io.crossVectors(Nl,Oo);var l=this.direction.dot(Io),c;if(l>0){if(a)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Fi.subVectors(this.origin,e);var h=c*this.direction.dot(Oo.crossVectors(Fi,Oo));if(h<0)return null;var d=c*this.direction.dot(Nl.cross(Fi));if(d<0||h+d>l)return null;var p=-c*Fi.dot(Io);return p<0?null:this.at(p/l,o)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),r}(),ct=function(){function r(){Object(pe.a)(this,r),Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a,o,l,c,h,d,p,v,m,x,M,A,S){var y=this.elements;return y[0]=e,y[4]=n,y[8]=i,y[12]=a,y[1]=o,y[5]=l,y[9]=c,y[13]=h,y[2]=d,y[6]=p,y[10]=v,y[14]=m,y[3]=x,y[7]=M,y[11]=A,y[15]=S,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return new r().fromArray(this.elements)}},{key:"copy",value:function(e){var n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}},{key:"copyPosition",value:function(e){var n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}},{key:"extractBasis",value:function(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var n=this.elements,i=e.elements,a=1/Do.setFromMatrixColumn(e,0).length(),o=1/Do.setFromMatrixColumn(e,1).length(),l=1/Do.setFromMatrixColumn(e,2).length();return n[0]=i[0]*a,n[1]=i[1]*a,n[2]=i[2]*a,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*l,n[9]=i[9]*l,n[10]=i[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,i=e.x,a=e.y,o=e.z,l=Math.cos(i),c=Math.sin(i),h=Math.cos(a),d=Math.sin(a),p=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){var m=l*p,x=l*v,M=c*p,A=c*v;n[0]=h*p,n[4]=-h*v,n[8]=d,n[1]=x+M*d,n[5]=m-A*d,n[9]=-c*h,n[2]=A-m*d,n[6]=M+x*d,n[10]=l*h}else if(e.order==="YXZ"){var S=h*p,y=h*v,O=d*p,P=d*v;n[0]=S+P*c,n[4]=O*c-y,n[8]=l*d,n[1]=l*v,n[5]=l*p,n[9]=-c,n[2]=y*c-O,n[6]=P+S*c,n[10]=l*h}else if(e.order==="ZXY"){var L=h*p,C=h*v,R=d*p,N=d*v;n[0]=L-N*c,n[4]=-l*v,n[8]=R+C*c,n[1]=C+R*c,n[5]=l*p,n[9]=N-L*c,n[2]=-l*d,n[6]=c,n[10]=l*h}else if(e.order==="ZYX"){var V=l*p,X=l*v,z=c*p,D=c*v;n[0]=h*p,n[4]=z*d-X,n[8]=V*d+D,n[1]=h*v,n[5]=D*d+V,n[9]=X*d-z,n[2]=-d,n[6]=c*h,n[10]=l*h}else if(e.order==="YZX"){var H=l*h,j=l*d,_=c*h,W=c*d;n[0]=h*p,n[4]=W-H*v,n[8]=_*v+j,n[1]=v,n[5]=l*p,n[9]=-c*p,n[2]=-d*p,n[6]=j*v+_,n[10]=H-W*v}else if(e.order==="XZY"){var Q=l*h,te=l*d,oe=c*h,he=c*d;n[0]=h*p,n[4]=-v,n[8]=d*p,n[1]=Q*v+he,n[5]=l*p,n[9]=te*v-oe,n[2]=oe*v-te,n[6]=c*p,n[10]=he*v+Q}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Ur,e,Yn)}},{key:"lookAt",value:function(e,n,i){var a=this.elements;return Jn.subVectors(e,n),Jn.lengthSq()===0&&(Jn.z=1),Jn.normalize(),Ni.crossVectors(i,Jn),Ni.lengthSq()===0&&(Math.abs(i.z)===1?Jn.x+=1e-4:Jn.z+=1e-4,Jn.normalize(),Ni.crossVectors(i,Jn)),Ni.normalize(),Ps.crossVectors(Jn,Ni),a[0]=Ni.x,a[4]=Ps.x,a[8]=Jn.x,a[1]=Ni.y,a[5]=Ps.y,a[9]=Jn.y,a[2]=Ni.z,a[6]=Ps.z,a[10]=Jn.z,this}},{key:"multiply",value:function(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,n){var i=e.elements,a=n.elements,o=this.elements,l=i[0],c=i[4],h=i[8],d=i[12],p=i[1],v=i[5],m=i[9],x=i[13],M=i[2],A=i[6],S=i[10],y=i[14],O=i[3],P=i[7],L=i[11],C=i[15],R=a[0],N=a[4],V=a[8],X=a[12],z=a[1],D=a[5],H=a[9],j=a[13],_=a[2],W=a[6],Q=a[10],te=a[14],oe=a[3],he=a[7],re=a[11],de=a[15];return o[0]=l*R+c*z+h*_+d*oe,o[4]=l*N+c*D+h*W+d*he,o[8]=l*V+c*H+h*Q+d*re,o[12]=l*X+c*j+h*te+d*de,o[1]=p*R+v*z+m*_+x*oe,o[5]=p*N+v*D+m*W+x*he,o[9]=p*V+v*H+m*Q+x*re,o[13]=p*X+v*j+m*te+x*de,o[2]=M*R+A*z+S*_+y*oe,o[6]=M*N+A*D+S*W+y*he,o[10]=M*V+A*H+S*Q+y*re,o[14]=M*X+A*j+S*te+y*de,o[3]=O*R+P*z+L*_+C*oe,o[7]=O*N+P*D+L*W+C*he,o[11]=O*V+P*H+L*Q+C*re,o[15]=O*X+P*j+L*te+C*de,this}},{key:"multiplyScalar",value:function(e){var n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,n=e[0],i=e[4],a=e[8],o=e[12],l=e[1],c=e[5],h=e[9],d=e[13],p=e[2],v=e[6],m=e[10],x=e[14],M=e[3],A=e[7],S=e[11],y=e[15];return M*(+o*h*v-a*d*v-o*c*m+i*d*m+a*c*x-i*h*x)+A*(+n*h*x-n*d*m+o*l*m-a*l*x+a*d*p-o*h*p)+S*(+n*d*v-n*c*x-o*l*v+i*l*x+o*c*p-i*d*p)+y*(-a*c*p-n*h*v+n*c*m+a*l*v-i*l*m+i*h*p)}},{key:"transpose",value:function(){var e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}},{key:"setPosition",value:function(e,n,i){var a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=i),this}},{key:"invert",value:function(){var e=this.elements,n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8],v=e[9],m=e[10],x=e[11],M=e[12],A=e[13],S=e[14],y=e[15],O=v*S*d-A*m*d+A*h*x-c*S*x-v*h*y+c*m*y,P=M*m*d-p*S*d-M*h*x+l*S*x+p*h*y-l*m*y,L=p*A*d-M*v*d+M*c*x-l*A*x-p*c*y+l*v*y,C=M*v*h-p*A*h-M*c*m+l*A*m+p*c*S-l*v*S,R=n*O+i*P+a*L+o*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var N=1/R;return e[0]=O*N,e[1]=(A*m*o-v*S*o-A*a*x+i*S*x+v*a*y-i*m*y)*N,e[2]=(c*S*o-A*h*o+A*a*d-i*S*d-c*a*y+i*h*y)*N,e[3]=(v*h*o-c*m*o-v*a*d+i*m*d+c*a*x-i*h*x)*N,e[4]=P*N,e[5]=(p*S*o-M*m*o+M*a*x-n*S*x-p*a*y+n*m*y)*N,e[6]=(M*h*o-l*S*o-M*a*d+n*S*d+l*a*y-n*h*y)*N,e[7]=(l*m*o-p*h*o+p*a*d-n*m*d-l*a*x+n*h*x)*N,e[8]=L*N,e[9]=(M*v*o-p*A*o-M*i*x+n*A*x+p*i*y-n*v*y)*N,e[10]=(l*A*o-M*c*o+M*i*d-n*A*d-l*i*y+n*c*y)*N,e[11]=(p*c*o-l*v*o-p*i*d+n*v*d+l*i*x-n*c*x)*N,e[12]=C*N,e[13]=(p*A*a-M*v*a+M*i*m-n*A*m-p*i*S+n*v*S)*N,e[14]=(M*c*a-l*A*a-M*i*h+n*A*h+l*i*S-n*c*S)*N,e[15]=(l*v*a-p*c*a+p*i*h-n*v*h-l*i*m+n*c*m)*N,this}},{key:"scale",value:function(e){var n=this.elements,i=e.x,a=e.y,o=e.z;return n[0]*=i,n[4]*=a,n[8]*=o,n[1]*=i,n[5]*=a,n[9]*=o,n[2]*=i,n[6]*=a,n[10]*=o,n[3]*=i,n[7]*=a,n[11]*=o,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,a))}},{key:"makeTranslation",value:function(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,n){var i=Math.cos(n),a=Math.sin(n),o=1-i,l=e.x,c=e.y,h=e.z,d=o*l,p=o*c;return this.set(d*l+i,d*c-a*h,d*h+a*c,0,d*c+a*h,p*c+i,p*h-a*l,0,d*h-a*c,p*h+a*l,o*h*h+i,0,0,0,0,1),this}},{key:"makeScale",value:function(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}},{key:"makeShear",value:function(e,n,i){return this.set(1,n,i,0,e,1,i,0,e,n,1,0,0,0,0,1),this}},{key:"compose",value:function(e,n,i){var a=this.elements,o=n._x,l=n._y,c=n._z,h=n._w,d=o+o,p=l+l,v=c+c,m=o*d,x=o*p,M=o*v,A=l*p,S=l*v,y=c*v,O=h*d,P=h*p,L=h*v,C=i.x,R=i.y,N=i.z;return a[0]=(1-(A+y))*C,a[1]=(x+L)*C,a[2]=(M-P)*C,a[3]=0,a[4]=(x-L)*R,a[5]=(1-(m+y))*R,a[6]=(S+O)*R,a[7]=0,a[8]=(M+P)*N,a[9]=(S-O)*N,a[10]=(1-(m+A))*N,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}},{key:"decompose",value:function(e,n,i){var a=this.elements,o=Do.set(a[0],a[1],a[2]).length(),l=Do.set(a[4],a[5],a[6]).length(),c=Do.set(a[8],a[9],a[10]).length(),h=this.determinant();h<0&&(o=-o),e.x=a[12],e.y=a[13],e.z=a[14],Gr.copy(this);var d=1/o,p=1/l,v=1/c;return Gr.elements[0]*=d,Gr.elements[1]*=d,Gr.elements[2]*=d,Gr.elements[4]*=p,Gr.elements[5]*=p,Gr.elements[6]*=p,Gr.elements[8]*=v,Gr.elements[9]*=v,Gr.elements[10]*=v,n.setFromRotationMatrix(Gr),i.x=o,i.y=l,i.z=c,this}},{key:"makePerspective",value:function(e,n,i,a,o,l){l===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var c=this.elements,h=2*o/(n-e),d=2*o/(i-a),p=(n+e)/(n-e),v=(i+a)/(i-a),m=-(l+o)/(l-o),x=-2*l*o/(l-o);return c[0]=h,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=d,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}},{key:"makeOrthographic",value:function(e,n,i,a,o,l){var c=this.elements,h=1/(n-e),d=1/(i-a),p=1/(l-o),v=(n+e)*h,m=(i+a)*d,x=(l+o)*p;return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=-2*p,c[14]=-x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}},{key:"equals",value:function(e){for(var n=this.elements,i=e.elements,a=0;a<16;a++)if(n[a]!==i[a])return!1;return!0}},{key:"fromArray",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=0;i<16;i++)this.elements[i]=e[i+n];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}]),r}(),Do=new I,Gr=new ct,Ur=new I(0,0,0),Yn=new I(1,1,1),Ni=new I,Ps=new I,Jn=new I,Fo=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r.DefaultOrder;Object(pe.a)(this,r),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=i}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a){return this._x=e,this._y=n,this._z=i,this._order=a||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,n,i){var a=Ke.clamp,o=e.elements,l=o[0],c=o[4],h=o[8],d=o[1],p=o[5],v=o[9],m=o[2],x=o[6],M=o[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(a(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,M),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-a(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,M),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-m,l),this._z=0);break;case"ZXY":this._x=Math.asin(a(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-m,M),this._z=Math.atan2(-c,p)):(this._y=0,this._z=Math.atan2(d,l));break;case"ZYX":this._y=Math.asin(-a(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(x,M),this._z=Math.atan2(d,l)):(this._x=0,this._z=Math.atan2(-c,p));break;case"YZX":this._z=Math.asin(a(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,p),this._y=Math.atan2(-m,l)):(this._x=0,this._y=Math.atan2(h,M));break;case"XZY":this._z=Math.asin(-a(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-v,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,n,i){return zl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zl,n,i)}},{key:"setFromVector3",value:function(e,n){return this.set(e.x,e.y,e.z,n||this._order)}},{key:"reorder",value:function(e){return Cu.setFromEuler(this),this.setFromQuaternion(Cu,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new I(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),r}();Fo.DefaultOrder="XYZ",Fo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var zl=new ct,Cu=new Ot,Os=function(){function r(){Object(pe.a)(this,r),this.mask=1|0}return Object(Ge.a)(r,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=4294967295|0}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return(this.mask&e.mask)!=0}}]),r}(),Gl=0,Ul=new I,zi=new Ot,hi=new ct,Is=new I,No=new I,df=new I,pf=new Ot,Ru=new I(1,0,0),Hl=new I(0,1,0),di=new I(0,0,1),pi={type:"added"},zo={type:"removed"};function Fe(){Object.defineProperty(this,"id",{value:Gl++}),this.uuid=Ke.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fe.DefaultUp.clone();var r=new I,t=new Fo,e=new Ot,n=new I(1,1,1);function i(){e.setFromEuler(t,!1)}function a(){t.setFromQuaternion(e,void 0,!1)}t._onChange(i),e._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new ct},normalMatrix:{value:new In}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=Fe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Os,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Fe.DefaultUp=new I(0,1,0),Fe.DefaultMatrixAutoUpdate=!0,Fe.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Fe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return zi.setFromAxisAngle(t,e),this.quaternion.multiply(zi),this},rotateOnWorldAxis:function(t,e){return zi.setFromAxisAngle(t,e),this.quaternion.premultiply(zi),this},rotateX:function(t){return this.rotateOnAxis(Ru,t)},rotateY:function(t){return this.rotateOnAxis(Hl,t)},rotateZ:function(t){return this.rotateOnAxis(di,t)},translateOnAxis:function(t,e){return Ul.copy(t).applyQuaternion(this.quaternion),this.position.add(Ul.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Ru,t)},translateY:function(t){return this.translateOnAxis(Hl,t)},translateZ:function(t){return this.translateOnAxis(di,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(hi.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?Is.copy(t):Is.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),No.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hi.lookAt(No,Is,this.up):hi.lookAt(Is,No,this.up),this.quaternion.setFromRotationMatrix(hi),i&&(hi.extractRotation(i.matrixWorld),zi.setFromRotationMatrix(hi),this.quaternion.premultiply(zi.invert()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(pi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(zo)),this},clear:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(zo)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),hi.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),hi.multiply(t.parent.matrixWorld)),t.applyMatrix4(hi),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var a=this.children[n],o=a.getObjectByProperty(t,e);if(o!==void 0)return o}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new I),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ot),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(No,t,df),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new I),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(No,pf,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new I),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0)for(var i=this.children,a=0,o=i.length;a<o;a++)i[a].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function a(V,X){return V[X.uuid]===void 0&&(V[X.uuid]=X.toJSON(t)),X.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(t.geometries,this.geometry);var o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){var l=o.shapes;if(Array.isArray(l))for(var c=0,h=l.length;c<h;c++){var d=l[c];a(t.shapes,d)}else a(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){for(var p=[],v=0,m=this.material.length;v<m;v++)p.push(a(t.materials,this.material[v]));i.material=p}else i.material=a(t.materials,this.material);if(this.children.length>0){i.children=[];for(var x=0;x<this.children.length;x++)i.children.push(this.children[x].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(var M=0;M<this.animations.length;M++){var A=this.animations[M];i.animations.push(a(t.animations,A))}}if(e){var S=N(t.geometries),y=N(t.materials),O=N(t.textures),P=N(t.images),L=N(t.shapes),C=N(t.skeletons),R=N(t.animations);S.length>0&&(n.geometries=S),y.length>0&&(n.materials=y),O.length>0&&(n.textures=O),P.length>0&&(n.images=P),L.length>0&&(n.shapes=L),C.length>0&&(n.skeletons=C),R.length>0&&(n.animations=R)}return n.object=i,n;function N(V){var X=[];for(var z in V){var D=V[z];delete D.metadata,X.push(D)}return X}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}});var Go=new I,Pu=new I,_h=new In,Zn=function(){function r(t,e){Object(pe.a)(this,r),Object.defineProperty(this,"isPlane",{value:!0}),this.normal=t!==void 0?t:new I(1,0,0),this.constant=e!==void 0?e:0}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.normal.copy(e),this.constant=n,this}},{key:"setComponents",value:function(e,n,i,a){return this.normal.set(e,n,i),this.constant=a,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,n,i){var a=Go.subVectors(i,n).cross(Pu.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new I),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new I);var i=e.delta(Go),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(e.start)}},{key:"intersectsLine",value:function(e){var n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new I),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,n){var i=n||_h.getNormalMatrix(e),a=this.coplanarPoint(Go).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),r}(),Hr=new I,Gi=new I,Bs=new I,kr=new I,Uo=new I,$a=new I,kl=new I,Vl=new I,Ou=new I,_l=new I,br=function(){function r(t,e,n){Object(pe.a)(this,r),this.a=t!==void 0?t:new I,this.b=e!==void 0?e:new I,this.c=n!==void 0?n:new I}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}},{key:"setFromPointsAndIndices",value:function(e,n,i,a){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[a]),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Hr.subVectors(this.c,this.b),Gi.subVectors(this.a,this.b),Hr.cross(Gi).length()*.5}},{key:"getMidpoint",value:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new I),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return r.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Zn),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return r.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,i,a,o){return r.getUV(e,this.a,this.b,this.c,n,i,a,o)}},{key:"containsPoint",value:function(e){return r.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return r.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new I);var i=this.a,a=this.b,o=this.c,l,c;Uo.subVectors(a,i),$a.subVectors(o,i),Vl.subVectors(e,i);var h=Uo.dot(Vl),d=$a.dot(Vl);if(h<=0&&d<=0)return n.copy(i);Ou.subVectors(e,a);var p=Uo.dot(Ou),v=$a.dot(Ou);if(p>=0&&v<=p)return n.copy(a);var m=h*v-p*d;if(m<=0&&h>=0&&p<=0)return l=h/(h-p),n.copy(i).addScaledVector(Uo,l);_l.subVectors(e,o);var x=Uo.dot(_l),M=$a.dot(_l);if(M>=0&&x<=M)return n.copy(o);var A=x*d-h*M;if(A<=0&&d>=0&&M<=0)return c=d/(d-M),n.copy(i).addScaledVector($a,c);var S=p*M-x*v;if(S<=0&&v-p>=0&&x-M>=0)return kl.subVectors(o,a),c=(v-p)/(v-p+(x-M)),n.copy(a).addScaledVector(kl,c);var y=1/(S+A+m);return l=A*y,c=m*y,n.copy(i).addScaledVector(Uo,l).addScaledVector($a,c)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,n,i,a){a===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),a=new I),a.subVectors(i,n),Hr.subVectors(e,n),a.cross(Hr);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}},{key:"getBarycoord",value:function(e,n,i,a,o){Hr.subVectors(a,n),Gi.subVectors(i,n),Bs.subVectors(e,n);var l=Hr.dot(Hr),c=Hr.dot(Gi),h=Hr.dot(Bs),d=Gi.dot(Gi),p=Gi.dot(Bs),v=l*d-c*c;if(o===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new I),v===0)return o.set(-2,-1,-1);var m=1/v,x=(d*h-c*p)*m,M=(l*p-c*h)*m;return o.set(1-x-M,M,x)}},{key:"containsPoint",value:function(e,n,i,a){return this.getBarycoord(e,n,i,a,kr),kr.x>=0&&kr.y>=0&&kr.x+kr.y<=1}},{key:"getUV",value:function(e,n,i,a,o,l,c,h){return this.getBarycoord(e,n,i,a,kr),h.set(0,0),h.addScaledVector(o,kr.x),h.addScaledVector(l,kr.y),h.addScaledVector(c,kr.z),h}},{key:"isFrontFacing",value:function(e,n,i,a){return Hr.subVectors(i,n),Gi.subVectors(e,n),Hr.cross(Gi).dot(a)<0}}]),r}(),vf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Er={h:0,s:0,l:0},Ds={h:0,s:0,l:0};function Iu(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*6*(2/3-e):r}function Bu(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Du(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}var Pe=function(){function r(t,e,n){return Object(pe.a)(this,r),Object.defineProperty(this,"isColor",{value:!0}),e===void 0&&n===void 0?this.set(t):this.setRGB(t,e,n)}return Object(Ge.a)(r,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}},{key:"setRGB",value:function(e,n,i){return this.r=e,this.g=n,this.b=i,this}},{key:"setHSL",value:function(e,n,i){if(e=Ke.euclideanModulo(e,1),n=Ke.clamp(n,0,1),i=Ke.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{var a=i<=.5?i*(1+n):i+n-i*n,o=2*i-a;this.r=Iu(o,a,e+1/3),this.g=Iu(o,a,e),this.b=Iu(o,a,e-1/3)}return this}},{key:"setStyle",value:function(e){function n(m){m!==void 0&&parseFloat(m)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var a,o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,n(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,n(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){var c=parseFloat(a[1])/360,h=parseInt(a[2],10)/100,d=parseInt(a[3],10)/100;return n(a[5]),this.setHSL(c,h,d)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var p=i[1],v=p.length;if(v===3)return this.r=parseInt(p.charAt(0)+p.charAt(0),16)/255,this.g=parseInt(p.charAt(1)+p.charAt(1),16)/255,this.b=parseInt(p.charAt(2)+p.charAt(2),16)/255,this;if(v===6)return this.r=parseInt(p.charAt(0)+p.charAt(1),16)/255,this.g=parseInt(p.charAt(2)+p.charAt(3),16)/255,this.b=parseInt(p.charAt(4)+p.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var n=vf[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"copyLinearToGamma",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i=n>0?1/n:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Bu(e.r),this.g=Bu(e.g),this.b=Bu(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Du(e.r),this.g=Du(e.g),this.b=Du(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var n=this.r,i=this.g,a=this.b,o=Math.max(n,i,a),l=Math.min(n,i,a),c,h,d=(l+o)/2;if(l===o)c=0,h=0;else{var p=o-l;switch(h=d<=.5?p/(o+l):p/(2-o-l),o){case n:c=(i-a)/p+(i<a?6:0);break;case i:c=(a-n)/p+2;break;case a:c=(n-i)/p+4;break}c/=6}return e.h=c,e.s=h,e.l=d,e}},{key:"getStyle",value:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}},{key:"offsetHSL",value:function(e,n,i){return this.getHSL(Er),Er.h+=e,Er.s+=n,Er.l+=i,this.setHSL(Er.h,Er.s,Er.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}},{key:"lerpHSL",value:function(e,n){this.getHSL(Er),e.getHSL(Ds);var i=Ke.lerp(Er.h,Ds.h,n),a=Ke.lerp(Er.s,Ds.s,n),o=Ke.lerp(Er.l,Ds.l,n);return this.setHSL(i,a,o),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),r}();Pe.NAMES=vf,Pe.prototype.r=1,Pe.prototype.g=1,Pe.prototype.b=1;var qa=function(){function r(t,e,n,i,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;Object(pe.a)(this,r),this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new I,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new Pe,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o}return Object(Ge.a)(r,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var n=0,i=e.vertexNormals.length;n<i;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(var a=0,o=e.vertexColors.length;a<o;a++)this.vertexColors[a]=e.vertexColors[a].clone();return this}}]),r}(),Wl=0;function Qe(){Object.defineProperty(this,"id",{value:Wl++}),this.uuid=Ke.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ia,this.side=Ei,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=dl,this.blendDst=pl,this.blendEquation=Dr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oa,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ja,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wa,this.stencilZFail=Wa,this.stencilZPass=Wa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Qe.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Qe,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(var e in t){var n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Ti;continue}var i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}},toJSON:function(t){var e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ia&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Ei&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(l){var c=[];for(var h in l){var d=l[h];delete d.metadata,c.push(d)}return c}if(e){var a=i(t.textures),o=i(t.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(e!==null){var i=e.length;n=new Array(i);for(var a=0;a!==i;++a)n[a]=e[a].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Qe.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Qn(r){Qe.call(this),this.type="MeshBasicMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(r)}Qn.prototype=Object.create(Qe.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isMeshBasicMaterial=!0,Qn.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this};var Ut=new I,eo=new se;function We(r,t,e){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=r,this.itemSize=t,this.count=r!==void 0?r.length/t:0,this.normalized=e===!0,this.usage=Xn,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(We.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(We.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,a=this.itemSize;i<a;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var o=t[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Pe),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var o=t[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new se),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var o=t[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new I),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var o=t[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new it),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(var e=0,n=this.count;e<n;e++)eo.fromBufferAttribute(this,e),eo.applyMatrix3(t),this.setXY(e,eo.x,eo.y);else if(this.itemSize===3)for(var i=0,a=this.count;i<a;i++)Ut.fromBufferAttribute(this,i),Ut.applyMatrix3(t),this.setXYZ(i,Ut.x,Ut.y,Ut.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Ut.x=this.getX(e),Ut.y=this.getY(e),Ut.z=this.getZ(e),Ut.applyMatrix4(t),this.setXYZ(e,Ut.x,Ut.y,Ut.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Ut.x=this.getX(e),Ut.y=this.getY(e),Ut.z=this.getZ(e),Ut.applyNormalMatrix(t),this.setXYZ(e,Ut.x,Ut.y,Ut.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Ut.x=this.getX(e),Ut.y=this.getY(e),Ut.z=this.getZ(e),Ut.transformDirection(t),this.setXYZ(e,Ut.x,Ut.y,Ut.z);return this},set:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,a){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=a,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function da(r,t,e){We.call(this,new Int8Array(r),t,e)}da.prototype=Object.create(We.prototype),da.prototype.constructor=da;function pa(r,t,e){We.call(this,new Uint8Array(r),t,e)}pa.prototype=Object.create(We.prototype),pa.prototype.constructor=pa;function va(r,t,e){We.call(this,new Uint8ClampedArray(r),t,e)}va.prototype=Object.create(We.prototype),va.prototype.constructor=va;function ma(r,t,e){We.call(this,new Int16Array(r),t,e)}ma.prototype=Object.create(We.prototype),ma.prototype.constructor=ma;function vi(r,t,e){We.call(this,new Uint16Array(r),t,e)}vi.prototype=Object.create(We.prototype),vi.prototype.constructor=vi;function Ui(r,t,e){We.call(this,new Int32Array(r),t,e)}Ui.prototype=Object.create(We.prototype),Ui.prototype.constructor=Ui;function Hi(r,t,e){We.call(this,new Uint32Array(r),t,e)}Hi.prototype=Object.create(We.prototype),Hi.prototype.constructor=Hi;function to(r,t,e){We.call(this,new Uint16Array(r),t,e)}to.prototype=Object.create(We.prototype),to.prototype.constructor=to,to.prototype.isFloat16BufferAttribute=!0;function Se(r,t,e){We.call(this,new Float32Array(r),t,e)}Se.prototype=Object.create(We.prototype),Se.prototype.constructor=Se;function Ho(r,t,e){We.call(this,new Float64Array(r),t,e)}Ho.prototype=Object.create(We.prototype),Ho.prototype.constructor=Ho;var jl=function(){function r(){Object(pe.a)(this,r),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return Object(Ge.a)(r,[{key:"computeGroups",value:function(e){var n=[],i,a,o=void 0,l=e.faces;for(a=0;a<l.length;a++){var c=l[a];c.materialIndex!==o&&(o=c.materialIndex,i!==void 0&&(i.count=a*3-i.start,n.push(i)),i={start:a*3,materialIndex:o})}i!==void 0&&(i.count=a*3-i.start,n.push(i)),this.groups=n}},{key:"fromGeometry",value:function(e){var n=e.faces,i=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,l=a[1]&&a[1].length>0,c=e.morphTargets,h=c.length,d;if(h>0){d=[];for(var p=0;p<h;p++)d[p]={name:c[p].name,data:[]};this.morphTargets.position=d}var v=e.morphNormals,m=v.length,x;if(m>0){x=[];for(var M=0;M<m;M++)x[M]={name:v[M].name,data:[]};this.morphTargets.normal=x}var A=e.skinIndices,S=e.skinWeights,y=A.length===i.length,O=S.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var P=0;P<n.length;P++){var L=n[P];this.vertices.push(i[L.a],i[L.b],i[L.c]);var C=L.vertexNormals;if(C.length===3)this.normals.push(C[0],C[1],C[2]);else{var R=L.normal;this.normals.push(R,R,R)}var N=L.vertexColors;if(N.length===3)this.colors.push(N[0],N[1],N[2]);else{var V=L.color;this.colors.push(V,V,V)}if(o===!0){var X=a[0][P];X!==void 0?this.uvs.push(X[0],X[1],X[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",P),this.uvs.push(new se,new se,new se))}if(l===!0){var z=a[1][P];z!==void 0?this.uvs2.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",P),this.uvs2.push(new se,new se,new se))}for(var D=0;D<h;D++){var H=c[D].vertices;d[D].data.push(H[L.a],H[L.b],H[L.c])}for(var j=0;j<m;j++){var _=v[j].vertexNormals[P];x[j].data.push(_.a,_.b,_.c)}y&&this.skinIndices.push(A[L.a],A[L.b],A[L.c]),O&&this.skinWeights.push(S[L.a],S[L.b],S[L.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}]),r}();function Fs(r){if(r.length===0)return-Infinity;for(var t=r[0],e=1,n=r.length;e<n;++e)r[e]>t&&(t=r[e]);return t}var Wh={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ns(r,t){return new Wh[r](t)}var Fu=1,Tr=new ct,zs=new Fe,Ue=new I,Ht=new Fn,en=new Fn,bt=new I;function Ne(){Object.defineProperty(this,"id",{value:Fu+=2}),this.uuid=Ke.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity},this.userData={}}Ne.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Ne,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Fs(t)>65535?Hi:vi)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return this.attributes[t]!==void 0},addGroup:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var i=new In().getNormalMatrix(t);n.applyNormalMatrix(i),n.needsUpdate=!0}var a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Tr.makeRotationX(t),this.applyMatrix4(Tr),this},rotateY:function(t){return Tr.makeRotationY(t),this.applyMatrix4(Tr),this},rotateZ:function(t){return Tr.makeRotationZ(t),this.applyMatrix4(Tr),this},translate:function(t,e,n){return Tr.makeTranslation(t,e,n),this.applyMatrix4(Tr),this},scale:function(t,e,n){return Tr.makeScale(t,e,n),this.applyMatrix4(Tr),this},lookAt:function(t){return zs.lookAt(t),zs.updateMatrix(),this.applyMatrix4(zs.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ue).negate(),this.translate(Ue.x,Ue.y,Ue.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Se(e.vertices.length*3,3),i=new Se(e.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var a=new Se(e.lineDistances.length,1);this.setAttribute("lineDistance",a.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var a=t[n];e.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Se(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){var i=this.attributes.position;i!==void 0&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var a=this.attributes.normal;a!==void 0&&(a.copyVector3sArray(e.normals),a.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var o=this.attributes.color;o!==void 0&&(o.copyColorsArray(e.colors),o.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var l=this.attributes.uv;l!==void 0&&(l.copyVector2sArray(e.uvs),l.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var c=this.attributes.lineDistance;c!==void 0&&(c.copyArray(e.lineDistances),c.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new jl().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(t.vertices.length*3);if(this.setAttribute("position",new We(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(t.normals.length*3);this.setAttribute("normal",new We(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(t.colors.length*3);this.setAttribute("color",new We(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var a=new Float32Array(t.uvs.length*2);this.setAttribute("uv",new We(a,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(t.uvs2.length*2);this.setAttribute("uv2",new We(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var l in t.morphTargets){for(var c=[],h=t.morphTargets[l],d=0,p=h.length;d<p;d++){var v=h[d],m=new Se(v.data.length*3,3);m.name=v.name,c.push(m.copyVector3sArray(v.data))}this.morphAttributes[l]=c}if(t.skinIndices.length>0){var x=new Se(t.skinIndices.length*4,4);this.setAttribute("skinIndex",x.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var M=new Se(t.skinWeights.length*4,4);this.setAttribute("skinWeight",M.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Fn);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new I(-Infinity,-Infinity,-Infinity),new I(Infinity,Infinity,Infinity));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var a=e[n];Ht.setFromBufferAttribute(a),this.morphTargetsRelative?(bt.addVectors(this.boundingBox.min,Ht.min),this.boundingBox.expandByPoint(bt),bt.addVectors(this.boundingBox.max,Ht.max),this.boundingBox.expandByPoint(bt)):(this.boundingBox.expandByPoint(Ht.min),this.boundingBox.expandByPoint(Ht.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ci);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new I,Infinity);return}if(t){var n=this.boundingSphere.center;if(Ht.setFromBufferAttribute(t),e)for(var i=0,a=e.length;i<a;i++){var o=e[i];en.setFromBufferAttribute(o),this.morphTargetsRelative?(bt.addVectors(Ht.min,en.min),Ht.expandByPoint(bt),bt.addVectors(Ht.max,en.max),Ht.expandByPoint(bt)):(Ht.expandByPoint(en.min),Ht.expandByPoint(en.max))}Ht.getCenter(n);for(var l=0,c=0,h=t.count;c<h;c++)bt.fromBufferAttribute(t,c),l=Math.max(l,n.distanceToSquared(bt));if(e)for(var d=0,p=e.length;d<p;d++)for(var v=e[d],m=this.morphTargetsRelative,x=0,M=v.count;x<M;x++)bt.fromBufferAttribute(v,x),m&&(Ue.fromBufferAttribute(t,x),bt.add(Ue)),l=Math.max(l,n.distanceToSquared(bt));this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(e!==void 0){var n=this.getAttribute("normal");if(n===void 0)n=new We(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(var i=0,a=n.count;i<a;i++)n.setXYZ(i,0,0,0);var o=new I,l=new I,c=new I,h=new I,d=new I,p=new I,v=new I,m=new I;if(t)for(var x=0,M=t.count;x<M;x+=3){var A=t.getX(x+0),S=t.getX(x+1),y=t.getX(x+2);o.fromBufferAttribute(e,A),l.fromBufferAttribute(e,S),c.fromBufferAttribute(e,y),v.subVectors(c,l),m.subVectors(o,l),v.cross(m),h.fromBufferAttribute(n,A),d.fromBufferAttribute(n,S),p.fromBufferAttribute(n,y),h.add(v),d.add(v),p.add(v),n.setXYZ(A,h.x,h.y,h.z),n.setXYZ(S,d.x,d.y,d.z),n.setXYZ(y,p.x,p.y,p.z)}else for(var O=0,P=e.count;O<P;O+=3)o.fromBufferAttribute(e,O+0),l.fromBufferAttribute(e,O+1),c.fromBufferAttribute(e,O+2),v.subVectors(c,l),m.subVectors(o,l),v.cross(m),n.setXYZ(O+0,v.x,v.y,v.z),n.setXYZ(O+1,v.x,v.y,v.z),n.setXYZ(O+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(t.attributes[i]!==void 0)for(var a=n[i],o=a.array,l=t.attributes[i],c=l.array,h=l.itemSize*e,d=Math.min(c.length,o.length-h),p=0,v=h;p<d;p++,v++)o[v]=c[p];return this},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)bt.fromBufferAttribute(t,e),bt.normalize(),t.setXYZ(e,bt.x,bt.y,bt.z)},toNonIndexed:function(){function t(P,L){for(var C=P.array,R=P.itemSize,N=P.normalized,V=new C.constructor(L.length*R),X=0,z=0,D=0,H=L.length;D<H;D++){X=L[D]*R;for(var j=0;j<R;j++)V[z++]=C[X++]}return new We(V,R,N)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ne,n=this.index.array,i=this.attributes;for(var a in i){var o=i[a],l=t(o,n);e.setAttribute(a,l)}var c=this.morphAttributes;for(var h in c){for(var d=[],p=c[h],v=0,m=p.length;v<m;v++){var x=p[v],M=t(x,n);d.push(M)}e.morphAttributes[h]=d}e.morphTargetsRelative=this.morphTargetsRelative;for(var A=this.groups,S=0,y=A.length;S<y;S++){var O=A[S];e.addGroup(O.start,O.count,O.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){var e=this.parameters;for(var n in e)e[n]!==void 0&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var a=this.attributes;for(var o in a){var l=a[o],c=l.toJSON(t.data);l.name!==""&&(c.name=l.name),t.data.attributes[o]=c}var h={},d=!1;for(var p in this.morphAttributes){for(var v=this.morphAttributes[p],m=[],x=0,M=v.length;x<M;x++){var A=v[x],S=A.toJSON(t.data);A.name!==""&&(S.name=A.name),m.push(S)}m.length>0&&(h[p]=m,d=!0)}d&&(t.data.morphAttributes=h,t.data.morphTargetsRelative=this.morphTargetsRelative);var y=this.groups;y.length>0&&(t.data.groups=JSON.parse(JSON.stringify(y)));var O=this.boundingSphere;return O!==null&&(t.data.boundingSphere={center:O.center.toArray(),radius:O.radius}),t},clone:function(){return new Ne().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;n!==null&&this.setIndex(n.clone(e));var i=t.attributes;for(var a in i){var o=i[a];this.setAttribute(a,o.clone(e))}var l=t.morphAttributes;for(var c in l){for(var h=[],d=l[c],p=0,v=d.length;p<v;p++)h.push(d[p].clone(e));this.morphAttributes[c]=h}this.morphTargetsRelative=t.morphTargetsRelative;for(var m=t.groups,x=0,M=m.length;x<M;x++){var A=m[x];this.addGroup(A.start,A.count,A.materialIndex)}var S=t.boundingBox;S!==null&&(this.boundingBox=S.clone());var y=t.boundingSphere;return y!==null&&(this.boundingSphere=y.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Nu=new ct,tn=new Bo,ko=new ci,sr=new I,Ar=new I,ur=new I,Gs=new I,Us=new I,Hs=new I,Vo=new I,Vr=new I,Ie=new I,ki=new se,ga=new se,Vn=new se,Lr=new I,ya=new I;function It(r,t){Fe.call(this),this.type="Mesh",this.geometry=r!==void 0?r:new Ne,this.material=t!==void 0?t:new Qn,this.updateMorphTargets()}It.prototype=Object.assign(Object.create(Fe.prototype),{constructor:It,isMesh:!0,copy:function(t){return Fe.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++){var l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{var c=t.morphTargets;c!==void 0&&c.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n=this.geometry,i=this.material,a=this.matrixWorld;if(i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ko.copy(n.boundingSphere),ko.applyMatrix4(a),t.ray.intersectsSphere(ko)!==!1&&(Nu.copy(a).invert(),tn.copy(t.ray).applyMatrix4(Nu),!(n.boundingBox!==null&&tn.intersectsBox(n.boundingBox)===!1)))){var o;if(n.isBufferGeometry){var l=n.index,c=n.attributes.position,h=n.morphAttributes.position,d=n.morphTargetsRelative,p=n.attributes.uv,v=n.attributes.uv2,m=n.groups,x=n.drawRange;if(l!==null)if(Array.isArray(i))for(var M=0,A=m.length;M<A;M++)for(var S=m[M],y=i[S.materialIndex],O=Math.max(S.start,x.start),P=Math.min(S.start+S.count,x.start+x.count),L=O,C=P;L<C;L+=3){var R=l.getX(L),N=l.getX(L+1),V=l.getX(L+2);o=_o(this,y,t,tn,c,h,d,p,v,R,N,V),o&&(o.faceIndex=Math.floor(L/3),o.face.materialIndex=S.materialIndex,e.push(o))}else for(var X=Math.max(0,x.start),z=Math.min(l.count,x.start+x.count),D=X,H=z;D<H;D+=3){var j=l.getX(D),_=l.getX(D+1),W=l.getX(D+2);o=_o(this,i,t,tn,c,h,d,p,v,j,_,W),o&&(o.faceIndex=Math.floor(D/3),e.push(o))}else if(c!==void 0)if(Array.isArray(i))for(var Q=0,te=m.length;Q<te;Q++)for(var oe=m[Q],he=i[oe.materialIndex],re=Math.max(oe.start,x.start),de=Math.min(oe.start+oe.count,x.start+x.count),Me=re,Xe=de;Me<Xe;Me+=3){var $=Me,at=Me+1,qe=Me+2;o=_o(this,he,t,tn,c,h,d,p,v,$,at,qe),o&&(o.faceIndex=Math.floor(Me/3),o.face.materialIndex=oe.materialIndex,e.push(o))}else for(var Ze=Math.max(0,x.start),Ae=Math.min(c.count,x.start+x.count),fe=Ze,rt=Ae;fe<rt;fe+=3){var yt=fe,st=fe+1,At=fe+2;o=_o(this,i,t,tn,c,h,d,p,v,yt,st,At),o&&(o.faceIndex=Math.floor(fe/3),e.push(o))}}else if(n.isGeometry){var Kt=Array.isArray(i),rn=n.vertices,an=n.faces,Bt,U=n.faceVertexUvs[0];U.length>0&&(Bt=U);for(var G=0,be=an.length;G<be;G++){var ge=an[G],He=Kt?i[ge.materialIndex]:i;if(He!==void 0){var J=rn[ge.a],q=rn[ge.b],ie=rn[ge.c];if(o=zu(this,He,t,tn,J,q,ie,Lr),o){if(Bt&&Bt[G]){var ye=Bt[G];ki.copy(ye[0]),ga.copy(ye[1]),Vn.copy(ye[2]),o.uv=br.getUV(Lr,J,q,ie,ki,ga,Vn,new se)}o.face=ge,o.faceIndex=G,e.push(o)}}}}}}});function zu(r,t,e,n,i,a,o,l){var c;if(t.side===un?c=n.intersectTriangle(o,a,i,!0,l):c=n.intersectTriangle(i,a,o,t.side!==mn,l),c===null)return null;ya.copy(l),ya.applyMatrix4(r.matrixWorld);var h=e.ray.origin.distanceTo(ya);return h<e.near||h>e.far?null:{distance:h,point:ya.clone(),object:r}}function _o(r,t,e,n,i,a,o,l,c,h,d,p){sr.fromBufferAttribute(i,h),Ar.fromBufferAttribute(i,d),ur.fromBufferAttribute(i,p);var v=r.morphTargetInfluences;if(t.morphTargets&&a&&v){Vo.set(0,0,0),Vr.set(0,0,0),Ie.set(0,0,0);for(var m=0,x=a.length;m<x;m++){var M=v[m],A=a[m];M!==0&&(Gs.fromBufferAttribute(A,h),Us.fromBufferAttribute(A,d),Hs.fromBufferAttribute(A,p),o?(Vo.addScaledVector(Gs,M),Vr.addScaledVector(Us,M),Ie.addScaledVector(Hs,M)):(Vo.addScaledVector(Gs.sub(sr),M),Vr.addScaledVector(Us.sub(Ar),M),Ie.addScaledVector(Hs.sub(ur),M)))}sr.add(Vo),Ar.add(Vr),ur.add(Ie)}r.isSkinnedMesh&&(r.boneTransform(h,sr),r.boneTransform(d,Ar),r.boneTransform(p,ur));var S=zu(r,t,e,n,sr,Ar,ur,Lr);if(S){l&&(ki.fromBufferAttribute(l,h),ga.fromBufferAttribute(l,d),Vn.fromBufferAttribute(l,p),S.uv=br.getUV(Lr,sr,Ar,ur,ki,ga,Vn,new se)),c&&(ki.fromBufferAttribute(c,h),ga.fromBufferAttribute(c,d),Vn.fromBufferAttribute(c,p),S.uv2=br.getUV(Lr,sr,Ar,ur,ki,ga,Vn,new se));var y=new qa(h,d,p);br.getNormal(sr,Ar,ur,y.normal),S.face=y}return S}var lr=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1;Object(pe.a)(this,e),n=t.call(this),n.type="BoxBufferGeometry",n.parameters={width:i,height:a,depth:o,widthSegments:l,heightSegments:c,depthSegments:h};var d=Object(dn.a)(n);l=Math.floor(l),c=Math.floor(c),h=Math.floor(h);var p=[],v=[],m=[],x=[],M=0,A=0;S("z","y","x",-1,-1,o,a,i,h,c,0),S("z","y","x",1,-1,o,a,-i,h,c,1),S("x","z","y",1,1,i,o,a,l,h,2),S("x","z","y",1,-1,i,o,-a,l,h,3),S("x","y","z",1,-1,i,a,o,l,c,4),S("x","y","z",-1,-1,i,a,-o,l,c,5),n.setIndex(p),n.setAttribute("position",new Se(v,3)),n.setAttribute("normal",new Se(m,3)),n.setAttribute("uv",new Se(x,2));function S(y,O,P,L,C,R,N,V,X,z,D){for(var H=R/X,j=N/z,_=R/2,W=N/2,Q=V/2,te=X+1,oe=z+1,he=0,re=0,de=new I,Me=0;Me<oe;Me++)for(var Xe=Me*j-W,$=0;$<te;$++){var at=$*H-_;de[y]=at*L,de[O]=Xe*C,de[P]=Q,v.push(de.x,de.y,de.z),de[y]=0,de[O]=0,de[P]=V>0?1:-1,m.push(de.x,de.y,de.z),x.push($/X),x.push(1-Me/z),he+=1}for(var qe=0;qe<z;qe++)for(var Ze=0;Ze<X;Ze++){var Ae=M+Ze+te*qe,fe=M+Ze+te*(qe+1),rt=M+(Ze+1)+te*(qe+1),yt=M+(Ze+1)+te*qe;p.push(Ae,fe,yt),p.push(fe,rt,yt),re+=6}d.addGroup(A,re,D),A+=re,M+=he}return n}return e}(Ne);function mi(r){var t={};for(var e in r){t[e]={};for(var n in r[e]){var i=r[e][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[e][n]=i.clone():Array.isArray(i)?t[e][n]=i.slice():t[e][n]=i}}return t}function Rn(r){for(var t={},e=0;e<r.length;e++){var n=mi(r[e]);for(var i in n)t[i]=n[i]}return t}var ks={clone:mi,merge:Rn},Vi=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gu=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Sn(r){Qe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Vi,this.fragmentShader=Gu,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,r!==void 0&&(r.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}Sn.prototype=Object.create(Qe.prototype),Sn.prototype.constructor=Sn,Sn.prototype.isShaderMaterial=!0,Sn.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=mi(r.uniforms),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this},Sn.prototype.toJSON=function(r){var t=Qe.prototype.toJSON.call(this,r);t.glslVersion=this.glslVersion,t.uniforms={};for(var e in this.uniforms){var n=this.uniforms[e],i=n.value;i&&i.isTexture?t.uniforms[e]={type:"t",value:i.toJSON(r).uuid}:i&&i.isColor?t.uniforms[e]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[e]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[e]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[e]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[e]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[e]={type:"m4",value:i.toArray()}:t.uniforms[e]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)this.extensions[o]===!0&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t};function Kn(){Fe.call(this),this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct}Kn.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Kn,isCamera:!0,copy:function(t,e){return Fe.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new I),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Fe.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Fe.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function xt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2e3;Kn.call(this),this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=e,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xt.prototype=Object.assign(Object.create(Kn.prototype),{constructor:xt,isPerspectiveCamera:!0,copy:function(t,e){return Kn.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=Ke.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(Ke.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return Ke.RAD2DEG*2*Math.atan(Math.tan(Ke.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,a,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(Ke.DEG2RAD*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,a=-.5*i,o=this.view;if(this.view!==null&&this.view.enabled){var l=o.fullWidth,c=o.fullHeight;a+=o.offsetX*i/l,e-=o.offsetY*n/c,i*=o.width/l,n*=o.height/c}var h=this.filmOffset;h!==0&&(a+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=Fe.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var cr=90,$n=1;function gi(r,t,e){if(Fe.call(this),this.type="CubeCamera",e.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=e;var n=new xt(cr,$n,r,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new I(1,0,0)),this.add(n);var i=new xt(cr,$n,r,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new I(-1,0,0)),this.add(i);var a=new xt(cr,$n,r,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new I(0,1,0)),this.add(a);var o=new xt(cr,$n,r,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new I(0,-1,0)),this.add(o);var l=new xt(cr,$n,r,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new I(0,0,1)),this.add(l);var c=new xt(cr,$n,r,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new I(0,0,-1)),this.add(c),this.update=function(h,d){this.parent===null&&this.updateMatrixWorld();var p=h.xr.enabled,v=h.getRenderTarget();h.xr.enabled=!1;var m=e.texture.generateMipmaps;e.texture.generateMipmaps=!1,h.setRenderTarget(e,0),h.render(d,n),h.setRenderTarget(e,1),h.render(d,i),h.setRenderTarget(e,2),h.render(d,a),h.setRenderTarget(e,3),h.render(d,o),h.setRenderTarget(e,4),h.render(d,l),e.texture.generateMipmaps=m,h.setRenderTarget(e,5),h.render(d,c),h.setRenderTarget(v),h.xr.enabled=p}}gi.prototype=Object.create(Fe.prototype),gi.prototype.constructor=gi;function cn(r,t,e,n,i,a,o,l,c,h){r=r!==void 0?r:[],t=t!==void 0?t:ds,o=o!==void 0?o:qt,$e.call(this,r,t,e,n,i,a,o,l,c,h),this.flipY=!1,this._needsFlipEnvMap=!0}cn.prototype=Object.create($e.prototype),cn.prototype.constructor=cn,cn.prototype.isCubeTexture=!0,Object.defineProperty(cn.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});function yi(r,t,e){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=e),Dn.call(this,r,r,t),t=t||{},this.texture=new cn(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}yi.prototype=Object.create(Dn.prototype),yi.prototype.constructor=yi,yi.prototype.isWebGLCubeRenderTarget=!0,yi.prototype.fromEquirectangularTexture=function(r,t){this.texture.type=t.type,this.texture.format=Wt,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var e={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},n=new lr(5,5,5),i=new Sn({name:"CubemapFromEquirect",uniforms:mi(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:un,blending:Br});i.uniforms.tEquirect.value=t;var a=new It(n,i),o=t.minFilter;t.minFilter===xo&&(t.minFilter=Tn);var l=new gi(1,10,this);return l.update(r,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this},yi.prototype.clear=function(r,t,e,n){for(var i=r.getRenderTarget(),a=0;a<6;a++)r.setRenderTarget(this,a),r.clear(t,e,n);r.setRenderTarget(i)};function qn(r,t,e,n,i,a,o,l,c,h,d,p){$e.call(this,null,a,o,l,c,h,n,i,d,p),this.image={data:r||null,width:t||1,height:e||1},this.magFilter=c!==void 0?c:gn,this.minFilter=h!==void 0?h:gn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}qn.prototype=Object.create($e.prototype),qn.prototype.constructor=qn,qn.prototype.isDataTexture=!0;var xa=new ci,Uu=new I,Wo=function(){function r(t,e,n,i,a,o){Object(pe.a)(this,r),this.planes=[t!==void 0?t:new Zn,e!==void 0?e:new Zn,n!==void 0?n:new Zn,i!==void 0?i:new Zn,a!==void 0?a:new Zn,o!==void 0?o:new Zn]}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i,a,o,l){var c=this.planes;return c[0].copy(e),c[1].copy(n),c[2].copy(i),c[3].copy(a),c[4].copy(o),c[5].copy(l),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){for(var n=this.planes,i=0;i<6;i++)n[i].copy(e.planes[i]);return this}},{key:"setFromProjectionMatrix",value:function(e){var n=this.planes,i=e.elements,a=i[0],o=i[1],l=i[2],c=i[3],h=i[4],d=i[5],p=i[6],v=i[7],m=i[8],x=i[9],M=i[10],A=i[11],S=i[12],y=i[13],O=i[14],P=i[15];return n[0].setComponents(c-a,v-h,A-m,P-S).normalize(),n[1].setComponents(c+a,v+h,A+m,P+S).normalize(),n[2].setComponents(c+o,v+d,A+x,P+y).normalize(),n[3].setComponents(c-o,v-d,A-x,P-y).normalize(),n[4].setComponents(c-l,v-p,A-M,P-O).normalize(),n[5].setComponents(c+l,v+p,A+M,P+O).normalize(),this}},{key:"intersectsObject",value:function(e){var n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),xa.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(xa)}},{key:"intersectsSprite",value:function(e){return xa.center.set(0,0,0),xa.radius=.7071067811865476,xa.applyMatrix4(e.matrixWorld),this.intersectsSphere(xa)}},{key:"intersectsSphere",value:function(e){for(var n=this.planes,i=e.center,a=-e.radius,o=0;o<6;o++){var l=n[o].distanceToPoint(i);if(l<a)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var n=this.planes,i=0;i<6;i++){var a=n[i];if(Uu.x=a.normal.x>0?e.max.x:e.min.x,Uu.y=a.normal.y>0?e.max.y:e.min.y,Uu.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Uu)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var n=this.planes,i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}}]),r}();function Xl(){var r=null,t=!1,e=null,n=null;function i(a,o){e(a,o),n=r.requestAnimationFrame(i)}return{start:function(){t!==!0&&e!==null&&(n=r.requestAnimationFrame(i),t=!0)},stop:function(){r.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){r=o}}}function Hu(r,t){var e=t.isWebGL2,n=new WeakMap;function i(h,d){var p=h.array,v=h.usage,m=r.createBuffer();r.bindBuffer(d,m),r.bufferData(d,p,v),h.onUploadCallback();var x=5126;return p instanceof Float32Array?x=5126:p instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):p instanceof Uint16Array?h.isFloat16BufferAttribute?e?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:p instanceof Int16Array?x=5122:p instanceof Uint32Array?x=5125:p instanceof Int32Array?x=5124:p instanceof Int8Array?x=5120:p instanceof Uint8Array&&(x=5121),{buffer:m,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function a(h,d,p){var v=d.array,m=d.updateRange;r.bindBuffer(p,h),m.count===-1?r.bufferSubData(p,0,v):(e?r.bufferSubData(p,m.offset*v.BYTES_PER_ELEMENT,v,m.offset,m.count):r.bufferSubData(p,m.offset*v.BYTES_PER_ELEMENT,v.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);var d=n.get(h);d&&(r.deleteBuffer(d.buffer),n.delete(h))}function c(h,d){if(h.isGLBufferAttribute){var p=n.get(h);(!p||p.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);var v=n.get(h);v===void 0?n.set(h,i(h,d)):v.version<h.version&&(a(v.buffer,h,d),v.version=h.version)}return{get:o,remove:l,update:c}}var jo=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Object(pe.a)(this,e),n=t.call(this),n.type="PlaneBufferGeometry",n.parameters={width:i,height:a,widthSegments:o,heightSegments:l};for(var c=i/2,h=a/2,d=Math.floor(o),p=Math.floor(l),v=d+1,m=p+1,x=i/d,M=a/p,A=[],S=[],y=[],O=[],P=0;P<m;P++)for(var L=P*M-h,C=0;C<v;C++){var R=C*x-c;S.push(R,-L,0),y.push(0,0,1),O.push(C/d),O.push(1-P/p)}for(var N=0;N<p;N++)for(var V=0;V<d;V++){var X=V+v*N,z=V+v*(N+1),D=V+1+v*(N+1),H=V+1+v*N;A.push(X,z,H),A.push(z,D,H)}return n.setIndex(A),n.setAttribute("position",new Se(S,3)),n.setAttribute("normal",new Se(y,3)),n.setAttribute("uv",new Se(O,2)),n}return e}(Ne),Xo=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,mf=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gf=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,Vs=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,jh=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Xh="vec3 transformed = vec3( position );",yf=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xf=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,no=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Yh=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Jh=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_i=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Zh=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Mf=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,Qh=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,Sf=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ma=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Kh=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,$h=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wf=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ku=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Yl=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,bf=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Jl=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ef="gl_FragColor = linearToOutputTexel( gl_FragColor );",Vu=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Tf=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,qh=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Cr=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zl=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ed=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Sa=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,_u=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,Yo=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ql=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Kl=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,$l=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,td=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Af=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Lf=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,Wu=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,nd=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rd=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,s=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,u=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,f=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,g=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,E=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,T=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,B=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,k=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Z=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Oe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Le=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,tt=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Ce=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Rr=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,K=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Y=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,ne=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Te=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,ke=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jt=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,nt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,Ct=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yn=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,Mt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,wa=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,id=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Im=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Bm=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Dm=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Fm=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Nm=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Gm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Um=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Hm=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,km=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Vm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,_m=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Wm=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,jm=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Xm=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ym=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Jm=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Zm=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,Qm=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,Km=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,$m=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,qm=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,eg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,tg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,ng=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,rg=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,ig=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ag=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,og=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,sg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ug=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,lg=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,cg=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,fg=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,hg=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,dg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,pg=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vg=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mg=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gg=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,yg=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xg=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mg=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sg=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,wg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bg=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tg=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lg=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Cg=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Rg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Pg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Og=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ig=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Bg=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Fg=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pt={alphamap_fragment:Xo,alphamap_pars_fragment:mf,alphatest_fragment:gf,aomap_fragment:Vs,aomap_pars_fragment:jh,begin_vertex:Xh,beginnormal_vertex:yf,bsdfs:xf,bumpmap_pars_fragment:no,clipping_planes_fragment:Yh,clipping_planes_pars_fragment:Jh,clipping_planes_pars_vertex:_i,clipping_planes_vertex:Zh,color_fragment:Mf,color_pars_fragment:Qh,color_pars_vertex:Sf,color_vertex:Ma,common:Kh,cube_uv_reflection_fragment:$h,defaultnormal_vertex:wf,displacementmap_pars_vertex:ku,displacementmap_vertex:Yl,emissivemap_fragment:bf,emissivemap_pars_fragment:Jl,encodings_fragment:Ef,encodings_pars_fragment:Vu,envmap_fragment:Tf,envmap_common_pars_fragment:qh,envmap_pars_fragment:Cr,envmap_pars_vertex:Zl,envmap_physical_pars_fragment:Wu,envmap_vertex:ed,fog_vertex:Sa,fog_pars_vertex:_u,fog_fragment:Yo,fog_pars_fragment:Ql,gradientmap_pars_fragment:Kl,lightmap_fragment:$l,lightmap_pars_fragment:td,lights_lambert_vertex:Af,lights_pars_begin:Lf,lights_toon_fragment:nd,lights_toon_pars_fragment:rd,lights_phong_fragment:s,lights_phong_pars_fragment:u,lights_physical_fragment:f,lights_physical_pars_fragment:g,lights_fragment_begin:E,lights_fragment_maps:T,lights_fragment_end:B,logdepthbuf_fragment:k,logdepthbuf_pars_fragment:Z,logdepthbuf_pars_vertex:Oe,logdepthbuf_vertex:Le,map_fragment:tt,map_pars_fragment:Ce,map_particle_fragment:kt,map_particle_pars_fragment:Zt,metalnessmap_fragment:Rr,metalnessmap_pars_fragment:K,morphnormal_vertex:Y,morphtarget_pars_vertex:ne,morphtarget_vertex:Te,normal_fragment_begin:ke,normal_fragment_maps:jt,normalmap_pars_fragment:nt,clearcoat_normal_fragment_begin:Ct,clearcoat_normal_fragment_maps:yn,clearcoat_pars_fragment:Mt,packing:wa,premultiplied_alpha_fragment:id,project_vertex:Im,dithering_fragment:Bm,dithering_pars_fragment:Dm,roughnessmap_fragment:Fm,roughnessmap_pars_fragment:Nm,shadowmap_pars_fragment:zm,shadowmap_pars_vertex:Gm,shadowmap_vertex:Um,shadowmask_pars_fragment:Hm,skinbase_vertex:km,skinning_pars_vertex:Vm,skinning_vertex:_m,skinnormal_vertex:Wm,specularmap_fragment:jm,specularmap_pars_fragment:Xm,tonemapping_fragment:Ym,tonemapping_pars_fragment:Jm,transmissionmap_fragment:Zm,transmissionmap_pars_fragment:Qm,uv_pars_fragment:Km,uv_pars_vertex:$m,uv_vertex:qm,uv2_pars_fragment:eg,uv2_pars_vertex:tg,uv2_vertex:ng,worldpos_vertex:rg,background_frag:ig,background_vert:ag,cube_frag:og,cube_vert:sg,depth_frag:ug,depth_vert:lg,distanceRGBA_frag:cg,distanceRGBA_vert:fg,equirect_frag:hg,equirect_vert:dg,linedashed_frag:pg,linedashed_vert:vg,meshbasic_frag:mg,meshbasic_vert:gg,meshlambert_frag:yg,meshlambert_vert:xg,meshmatcap_frag:Mg,meshmatcap_vert:Sg,meshtoon_frag:wg,meshtoon_vert:bg,meshphong_frag:Eg,meshphong_vert:Tg,meshphysical_frag:Ag,meshphysical_vert:Lg,normal_frag:Cg,normal_vert:Rg,points_frag:Pg,points_vert:Og,shadow_frag:Ig,shadow_vert:Bg,sprite_frag:Dg,sprite_vert:Fg},we={common:{diffuse:{value:new Pe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new In},uv2Transform:{value:new In},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new In}},sprite:{diffuse:{value:new Pe(15658734)},opacity:{value:1},center:{value:new se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new In}}},Wi={basic:{uniforms:Rn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.fog]),vertexShader:pt.meshbasic_vert,fragmentShader:pt.meshbasic_frag},lambert:{uniforms:Rn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.fog,we.lights,{emissive:{value:new Pe(0)}}]),vertexShader:pt.meshlambert_vert,fragmentShader:pt.meshlambert_frag},phong:{uniforms:Rn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new Pe(0)},specular:{value:new Pe(1118481)},shininess:{value:30}}]),vertexShader:pt.meshphong_vert,fragmentShader:pt.meshphong_frag},standard:{uniforms:Rn([we.common,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.roughnessmap,we.metalnessmap,we.fog,we.lights,{emissive:{value:new Pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag},toon:{uniforms:Rn([we.common,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.gradientmap,we.fog,we.lights,{emissive:{value:new Pe(0)}}]),vertexShader:pt.meshtoon_vert,fragmentShader:pt.meshtoon_frag},matcap:{uniforms:Rn([we.common,we.bumpmap,we.normalmap,we.displacementmap,we.fog,{matcap:{value:null}}]),vertexShader:pt.meshmatcap_vert,fragmentShader:pt.meshmatcap_frag},points:{uniforms:Rn([we.points,we.fog]),vertexShader:pt.points_vert,fragmentShader:pt.points_frag},dashed:{uniforms:Rn([we.common,we.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pt.linedashed_vert,fragmentShader:pt.linedashed_frag},depth:{uniforms:Rn([we.common,we.displacementmap]),vertexShader:pt.depth_vert,fragmentShader:pt.depth_frag},normal:{uniforms:Rn([we.common,we.bumpmap,we.normalmap,we.displacementmap,{opacity:{value:1}}]),vertexShader:pt.normal_vert,fragmentShader:pt.normal_frag},sprite:{uniforms:Rn([we.sprite,we.fog]),vertexShader:pt.sprite_vert,fragmentShader:pt.sprite_frag},background:{uniforms:{uvTransform:{value:new In},t2D:{value:null}},vertexShader:pt.background_vert,fragmentShader:pt.background_frag},cube:{uniforms:Rn([we.envmap,{opacity:{value:1}}]),vertexShader:pt.cube_vert,fragmentShader:pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pt.equirect_vert,fragmentShader:pt.equirect_frag},distanceRGBA:{uniforms:Rn([we.common,we.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pt.distanceRGBA_vert,fragmentShader:pt.distanceRGBA_frag},shadow:{uniforms:Rn([we.lights,we.fog,{color:{value:new Pe(0)},opacity:{value:1}}]),vertexShader:pt.shadow_vert,fragmentShader:pt.shadow_frag}};Wi.physical={uniforms:Rn([Wi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new se(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Pe(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag};function Ng(r,t,e,n,i){var a=new Pe(0),o=0,l,c,h=null,d=0,p=null;function v(x,M,A,S){var y=M.isScene===!0?M.background:null;y&&y.isTexture&&(y=t.get(y));var O=r.xr,P=O.getSession&&O.getSession();P&&P.environmentBlendMode==="additive"&&(y=null),y===null?m(a,o):y&&y.isColor&&(m(y,1),S=!0),(r.autoClear||S)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===vo)?(c===void 0&&(c=new It(new lr(1,1,1),new Sn({name:"BackgroundCubeMaterial",uniforms:mi(Wi.cube.uniforms),vertexShader:Wi.cube.vertexShader,fragmentShader:Wi.cube.fragmentShader,side:un,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(L,C,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),y.isWebGLCubeRenderTarget&&(y=y.texture),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1,(h!==y||d!==y.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,h=y,d=y.version,p=r.toneMapping),x.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new It(new jo(2,2),new Sn({name:"BackgroundMaterial",uniforms:mi(Wi.background.uniforms),vertexShader:Wi.background.vertexShader,fragmentShader:Wi.background.fragmentShader,side:Ei,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||d!==y.version||p!==r.toneMapping)&&(l.material.needsUpdate=!0,h=y,d=y.version,p=r.toneMapping),x.unshift(l,l.geometry,l.material,0,0,null))}function m(x,M){e.buffers.color.setClear(x.r,x.g,x.b,M,i)}return{getClearColor:function(){return a},setClearColor:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;a.set(M),o=A,m(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(M){o=M,m(a,o)},render:v}}function zg(r,t,e,n){var i=r.getParameter(34921),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||a!==null,l={},c=M(null),h=c;function d(H,j,_,W,Q){var te=!1;if(o){var oe=x(W,_,j);h!==oe&&(h=oe,v(h.object)),te=A(W,Q),te&&S(W,Q)}else{var he=j.wireframe===!0;(h.geometry!==W.id||h.program!==_.id||h.wireframe!==he)&&(h.geometry=W.id,h.program=_.id,h.wireframe=he,te=!0)}H.isInstancedMesh===!0&&(te=!0),Q!==null&&e.update(Q,34963),te&&(R(H,j,_,W),Q!==null&&r.bindBuffer(34963,e.get(Q).buffer))}function p(){return n.isWebGL2?r.createVertexArray():a.createVertexArrayOES()}function v(H){return n.isWebGL2?r.bindVertexArray(H):a.bindVertexArrayOES(H)}function m(H){return n.isWebGL2?r.deleteVertexArray(H):a.deleteVertexArrayOES(H)}function x(H,j,_){var W=_.wireframe===!0,Q=l[H.id];Q===void 0&&(Q={},l[H.id]=Q);var te=Q[j.id];te===void 0&&(te={},Q[j.id]=te);var oe=te[W];return oe===void 0&&(oe=M(p()),te[W]=oe),oe}function M(H){for(var j=[],_=[],W=[],Q=0;Q<i;Q++)j[Q]=0,_[Q]=0,W[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:_,attributeDivisors:W,object:H,attributes:{},index:null}}function A(H,j){var _=h.attributes,W=H.attributes,Q=0;for(var te in W){var oe=_[te],he=W[te];if(oe===void 0||oe.attribute!==he||oe.data!==he.data)return!0;Q++}return h.attributesNum!==Q||h.index!==j}function S(H,j){var _={},W=H.attributes,Q=0;for(var te in W){var oe=W[te],he={};he.attribute=oe,oe.data&&(he.data=oe.data),_[te]=he,Q++}h.attributes=_,h.attributesNum=Q,h.index=j}function y(){for(var H=h.newAttributes,j=0,_=H.length;j<_;j++)H[j]=0}function O(H){P(H,0)}function P(H,j){var _=h.newAttributes,W=h.enabledAttributes,Q=h.attributeDivisors;if(_[H]=1,W[H]===0&&(r.enableVertexAttribArray(H),W[H]=1),Q[H]!==j){var te=n.isWebGL2?r:t.get("ANGLE_instanced_arrays");te[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,j),Q[H]=j}}function L(){for(var H=h.newAttributes,j=h.enabledAttributes,_=0,W=j.length;_<W;_++)j[_]!==H[_]&&(r.disableVertexAttribArray(_),j[_]=0)}function C(H,j,_,W,Q,te){n.isWebGL2===!0&&(_===5124||_===5125)?r.vertexAttribIPointer(H,j,_,Q,te):r.vertexAttribPointer(H,j,_,W,Q,te)}function R(H,j,_,W){if(!(n.isWebGL2===!1&&(H.isInstancedMesh||W.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)){y();var Q=W.attributes,te=_.getAttributes(),oe=j.defaultAttributeValues;for(var he in te){var re=te[he];if(re>=0){var de=Q[he];if(de!==void 0){var Me=de.normalized,Xe=de.itemSize,$=e.get(de);if($===void 0)continue;var at=$.buffer,qe=$.type,Ze=$.bytesPerElement;if(de.isInterleavedBufferAttribute){var Ae=de.data,fe=Ae.stride,rt=de.offset;Ae&&Ae.isInstancedInterleavedBuffer?(P(re,Ae.meshPerAttribute),W._maxInstanceCount===void 0&&(W._maxInstanceCount=Ae.meshPerAttribute*Ae.count)):O(re),r.bindBuffer(34962,at),C(re,Xe,qe,Me,fe*Ze,rt*Ze)}else de.isInstancedBufferAttribute?(P(re,de.meshPerAttribute),W._maxInstanceCount===void 0&&(W._maxInstanceCount=de.meshPerAttribute*de.count)):O(re),r.bindBuffer(34962,at),C(re,Xe,qe,Me,0,0)}else if(he==="instanceMatrix"){var yt=e.get(H.instanceMatrix);if(yt===void 0)continue;var st=yt.buffer,At=yt.type;P(re+0,1),P(re+1,1),P(re+2,1),P(re+3,1),r.bindBuffer(34962,st),r.vertexAttribPointer(re+0,4,At,!1,64,0),r.vertexAttribPointer(re+1,4,At,!1,64,16),r.vertexAttribPointer(re+2,4,At,!1,64,32),r.vertexAttribPointer(re+3,4,At,!1,64,48)}else if(he==="instanceColor"){var Kt=e.get(H.instanceColor);if(Kt===void 0)continue;var rn=Kt.buffer,an=Kt.type;P(re,1),r.bindBuffer(34962,rn),r.vertexAttribPointer(re,3,an,!1,12,0)}else if(oe!==void 0){var Bt=oe[he];if(Bt!==void 0)switch(Bt.length){case 2:r.vertexAttrib2fv(re,Bt);break;case 3:r.vertexAttrib3fv(re,Bt);break;case 4:r.vertexAttrib4fv(re,Bt);break;default:r.vertexAttrib1fv(re,Bt)}}}}L()}}function N(){z();for(var H in l){var j=l[H];for(var _ in j){var W=j[_];for(var Q in W)m(W[Q].object),delete W[Q];delete j[_]}delete l[H]}}function V(H){if(l[H.id]!==void 0){var j=l[H.id];for(var _ in j){var W=j[_];for(var Q in W)m(W[Q].object),delete W[Q];delete j[_]}delete l[H.id]}}function X(H){for(var j in l){var _=l[j];if(_[H.id]!==void 0){var W=_[H.id];for(var Q in W)m(W[Q].object),delete W[Q];delete _[H.id]}}}function z(){D(),h!==c&&(h=c,v(h.object))}function D(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:d,reset:z,resetDefaultState:D,dispose:N,releaseStatesOfGeometry:V,releaseStatesOfProgram:X,initAttributes:y,enableAttribute:O,disableUnusedAttributes:L}}function Gg(r,t,e,n){var i=n.isWebGL2,a;function o(h){a=h}function l(h,d){r.drawArrays(a,h,d),e.update(d,a,1)}function c(h,d,p){if(p!==0){var v,m;if(i)v=r,m="drawArraysInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](a,h,d,p),e.update(d,a,p)}}this.setMode=o,this.render=l,this.renderInstances=c}function Ug(r,t,e){var n;function i(){if(n!==void 0)return n;var C=t.get("EXT_texture_filter_anisotropic");return C!==null?n=r.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT):n=0,n}function a(C){if(C==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o=typeof WebGL2RenderingContext!="undefined"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&r instanceof WebGL2ComputeRenderingContext,l=e.precision!==void 0?e.precision:"highp",c=a(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);var h=e.logarithmicDepthBuffer===!0,d=r.getParameter(34930),p=r.getParameter(35660),v=r.getParameter(3379),m=r.getParameter(34076),x=r.getParameter(34921),M=r.getParameter(36347),A=r.getParameter(36348),S=r.getParameter(36349),y=p>0,O=o||!!t.get("OES_texture_float"),P=y&&O,L=o?r.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:a,precision:l,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:m,maxAttributes:x,maxVertexUniforms:M,maxVaryings:A,maxFragmentUniforms:S,vertexTextures:y,floatFragmentTextures:O,floatVertexTextures:P,maxSamples:L}}function Hg(r){var t=this,e=null,n=0,i=!1,a=!1,o=new Zn,l=new In,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,v,m){var x=p.length!==0||v||n!==0||i;return i=v,e=d(p,m,0),n=p.length,x},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,h()},this.setState=function(p,v,m){var x=p.clippingPlanes,M=p.clipIntersection,A=p.clipShadows,S=r.get(p);if(!i||x===null||x.length===0||a&&!A)a?d(null):h();else{var y=a?0:n,O=y*4,P=S.clippingState||null;c.value=P,P=d(x,v,O,m);for(var L=0;L!==O;++L)P[L]=e[L];S.clippingState=P,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=y}};function h(){c.value!==e&&(c.value=e,c.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(p,v,m,x){var M=p!==null?p.length:0,A=null;if(M!==0){if(A=c.value,x!==!0||A===null){var S=m+M*4,y=v.matrixWorldInverse;l.getNormalMatrix(y),(A===null||A.length<S)&&(A=new Float32Array(S));for(var O=0,P=m;O!==M;++O,P+=4)o.copy(p[O]).applyMatrix4(y,l),o.normal.toArray(A,P),A[P+3]=o.constant}c.value=A,c.needsUpdate=!0}return t.numPlanes=M,t.numIntersection=0,A}}function kg(r){var t=new WeakMap;function e(o,l){return l===uu?o.mapping=ds:l===po&&(o.mapping=ps),o}function n(o){if(o&&o.isTexture){var l=o.mapping;if(l===uu||l===po)if(t.has(o)){var c=t.get(o).texture;return e(c,o.mapping)}else{var h=o.image;if(h&&h.height>0){var d=r.getRenderList(),p=r.getRenderTarget(),v=r.getRenderState(),m=new yi(h.height/2);return m.fromEquirectangularTexture(r,o),t.set(o,m),r.setRenderTarget(p),r.setRenderList(d),r.setRenderState(v),o.addEventListener("dispose",i),e(m.texture,o.mapping)}else return null}}return o}function i(o){var l=o.target;l.removeEventListener("dispose",i);var c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function a(){t=new WeakMap}return{get:n,dispose:a}}function Vg(r){var t={};return{has:function(n){if(t[n]!==void 0)return t[n]!==null;var i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return t[n]=i,i!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]}}}function _g(r,t,e,n){var i=new WeakMap,a=new WeakMap;function o(p){var v=p.target,m=i.get(v);m.index!==null&&t.remove(m.index);for(var x in m.attributes)t.remove(m.attributes[x]);v.removeEventListener("dispose",o),i.delete(v);var M=a.get(m);M&&(t.remove(M),a.delete(m)),n.releaseStatesOfGeometry(m),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(p,v){var m=i.get(v);return m||(v.addEventListener("dispose",o),v.isBufferGeometry?m=v:v.isGeometry&&(v._bufferGeometry===void 0&&(v._bufferGeometry=new Ne().setFromObject(p)),m=v._bufferGeometry),i.set(v,m),e.memory.geometries++,m)}function c(p){var v=p.attributes;for(var m in v)t.update(v[m],34962);var x=p.morphAttributes;for(var M in x)for(var A=x[M],S=0,y=A.length;S<y;S++)t.update(A[S],34962)}function h(p){var v=[],m=p.index,x=p.attributes.position,M=0;if(m!==null){var A=m.array;M=m.version;for(var S=0,y=A.length;S<y;S+=3){var O=A[S+0],P=A[S+1],L=A[S+2];v.push(O,P,P,L,L,O)}}else{var C=x.array;M=x.version;for(var R=0,N=C.length/3-1;R<N;R+=3){var V=R+0,X=R+1,z=R+2;v.push(V,X,X,z,z,V)}}var D=new(Fs(v)>65535?Hi:vi)(v,1);D.version=M;var H=a.get(p);H&&t.remove(H),a.set(p,D)}function d(p){var v=a.get(p);if(v){var m=p.index;m!==null&&v.version<m.version&&h(p)}else h(p);return a.get(p)}return{get:l,update:c,getWireframeAttribute:d}}function Wg(r,t,e,n){var i=n.isWebGL2,a;function o(v){a=v}var l,c;function h(v){l=v.type,c=v.bytesPerElement}function d(v,m){r.drawElements(a,m,l,v*c),e.update(m,a,1)}function p(v,m,x){if(x!==0){var M,A;if(i)M=r,A="drawElementsInstanced";else if(M=t.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[A](a,m,l,v*c,x),e.update(m,a,x)}}this.setMode=o,this.setIndex=h,this.render=d,this.renderInstances=p}function jg(r){var t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(a/3);break;case 1:e.lines+=l*(a/2);break;case 3:e.lines+=l*(a-1);break;case 2:e.lines+=l*a;break;case 0:e.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:i,update:n}}function Xg(r,t){return r[0]-t[0]}function Yg(r,t){return Math.abs(t[1])-Math.abs(r[1])}function Jg(r){for(var t={},e=new Float32Array(8),n=[],i=0;i<8;i++)n[i]=[i,0];function a(o,l,c,h){var d=o.morphTargetInfluences,p=d===void 0?0:d.length,v=t[l.id];if(v===void 0){v=[];for(var m=0;m<p;m++)v[m]=[m,0];t[l.id]=v}for(var x=0;x<p;x++){var M=v[x];M[0]=x,M[1]=d[x]}v.sort(Yg);for(var A=0;A<8;A++)A<p&&v[A][1]?(n[A][0]=v[A][0],n[A][1]=v[A][1]):(n[A][0]=Number.MAX_SAFE_INTEGER,n[A][1]=0);n.sort(Xg);for(var S=c.morphTargets&&l.morphAttributes.position,y=c.morphNormals&&l.morphAttributes.normal,O=0,P=0;P<8;P++){var L=n[P],C=L[0],R=L[1];C!==Number.MAX_SAFE_INTEGER&&R?(S&&l.getAttribute("morphTarget"+P)!==S[C]&&l.setAttribute("morphTarget"+P,S[C]),y&&l.getAttribute("morphNormal"+P)!==y[C]&&l.setAttribute("morphNormal"+P,y[C]),e[P]=R,O+=R):(S&&l.hasAttribute("morphTarget"+P)===!0&&l.deleteAttribute("morphTarget"+P),y&&l.hasAttribute("morphNormal"+P)===!0&&l.deleteAttribute("morphNormal"+P),e[P]=0)}var N=l.morphTargetsRelative?1:1-O;h.getUniforms().setValue(r,"morphTargetBaseInfluence",N),h.getUniforms().setValue(r,"morphTargetInfluences",e)}return{update:a}}function Zg(r,t,e,n){var i=new WeakMap;function a(l){var c=n.render.frame,h=l.geometry,d=t.get(l,h);return i.get(d)!==c&&(h.isGeometry&&d.updateFromObject(l),t.update(d),i.set(d,c)),l.isInstancedMesh&&(e.update(l.instanceMatrix,34962),l.instanceColor!==null&&e.update(l.instanceColor,34962)),d}function o(){i=new WeakMap}return{update:a,dispose:o}}function ju(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;$e.call(this,null),this.image={data:r,width:t,height:e,depth:n},this.magFilter=gn,this.minFilter=gn,this.wrapR=Un,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ju.prototype=Object.create($e.prototype),ju.prototype.constructor=ju,ju.prototype.isDataTexture2DArray=!0;function Xu(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;$e.call(this,null),this.image={data:r,width:t,height:e,depth:n},this.magFilter=gn,this.minFilter=gn,this.wrapR=Un,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Xu.prototype=Object.create($e.prototype),Xu.prototype.constructor=Xu,Xu.prototype.isDataTexture3D=!0;var bp=new $e,Qg=new ju,Kg=new Xu,Ep=new cn,Tp=[],Ap=[],Lp=new Float32Array(16),Cp=new Float32Array(9),Rp=new Float32Array(4);function Yu(r,t,e){var n=r[0];if(n<=0||n>0)return r;var i=t*e,a=Tp[i];if(a===void 0&&(a=new Float32Array(i),Tp[i]=a),t!==0){n.toArray(a,0);for(var o=1,l=0;o!==t;++o)l+=e,r[o].toArray(a,l)}return a}function xi(r,t){if(r.length!==t.length)return!1;for(var e=0,n=r.length;e<n;e++)if(r[e]!==t[e])return!1;return!0}function _r(r,t){for(var e=0,n=t.length;e<n;e++)r[e]=t[e]}function Pp(r,t){var e=Ap[t];e===void 0&&(e=new Int32Array(t),Ap[t]=e);for(var n=0;n!==t;++n)e[n]=r.allocateTextureUnit();return e}function $g(r,t){var e=this.cache;e[0]!==t&&(r.uniform1f(this.addr,t),e[0]=t)}function qg(r,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(xi(e,t))return;r.uniform2fv(this.addr,t),_r(e,t)}}function ey(r,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(xi(e,t))return;r.uniform3fv(this.addr,t),_r(e,t)}}function ty(r,t){var e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(xi(e,t))return;r.uniform4fv(this.addr,t),_r(e,t)}}function ny(r,t){var e=this.cache,n=t.elements;if(n===void 0){if(xi(e,t))return;r.uniformMatrix2fv(this.addr,!1,t),_r(e,t)}else{if(xi(e,n))return;Rp.set(n),r.uniformMatrix2fv(this.addr,!1,Rp),_r(e,n)}}function ry(r,t){var e=this.cache,n=t.elements;if(n===void 0){if(xi(e,t))return;r.uniformMatrix3fv(this.addr,!1,t),_r(e,t)}else{if(xi(e,n))return;Cp.set(n),r.uniformMatrix3fv(this.addr,!1,Cp),_r(e,n)}}function iy(r,t){var e=this.cache,n=t.elements;if(n===void 0){if(xi(e,t))return;r.uniformMatrix4fv(this.addr,!1,t),_r(e,t)}else{if(xi(e,n))return;Lp.set(n),r.uniformMatrix4fv(this.addr,!1,Lp),_r(e,n)}}function ay(r,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),e.safeSetTexture2D(t||bp,i)}function oy(r,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),e.setTexture2DArray(t||Qg,i)}function sy(r,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),e.setTexture3D(t||Kg,i)}function uy(r,t,e){var n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),e.safeSetTextureCube(t||Ep,i)}function ly(r,t){var e=this.cache;e[0]!==t&&(r.uniform1i(this.addr,t),e[0]=t)}function cy(r,t){var e=this.cache;xi(e,t)||(r.uniform2iv(this.addr,t),_r(e,t))}function fy(r,t){var e=this.cache;xi(e,t)||(r.uniform3iv(this.addr,t),_r(e,t))}function hy(r,t){var e=this.cache;xi(e,t)||(r.uniform4iv(this.addr,t),_r(e,t))}function dy(r,t){var e=this.cache;e[0]!==t&&(r.uniform1ui(this.addr,t),e[0]=t)}function py(r){switch(r){case 5126:return $g;case 35664:return qg;case 35665:return ey;case 35666:return ty;case 35674:return ny;case 35675:return ry;case 35676:return iy;case 5124:case 35670:return ly;case 35667:case 35671:return cy;case 35668:case 35672:return fy;case 35669:case 35673:return hy;case 5125:return dy;case 35678:case 36198:case 36298:case 36306:case 35682:return ay;case 35679:case 36299:case 36307:return sy;case 35680:case 36300:case 36308:case 36293:return uy;case 36289:case 36303:case 36311:case 36292:return oy}}function vy(r,t){r.uniform1fv(this.addr,t)}function my(r,t){r.uniform1iv(this.addr,t)}function gy(r,t){r.uniform2iv(this.addr,t)}function yy(r,t){r.uniform3iv(this.addr,t)}function xy(r,t){r.uniform4iv(this.addr,t)}function My(r,t){var e=Yu(t,this.size,2);r.uniform2fv(this.addr,e)}function Sy(r,t){var e=Yu(t,this.size,3);r.uniform3fv(this.addr,e)}function wy(r,t){var e=Yu(t,this.size,4);r.uniform4fv(this.addr,e)}function by(r,t){var e=Yu(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,e)}function Ey(r,t){var e=Yu(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,e)}function Ty(r,t){var e=Yu(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,e)}function Ay(r,t,e){var n=t.length,i=Pp(e,n);r.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)e.safeSetTexture2D(t[a]||bp,i[a])}function Ly(r,t,e){var n=t.length,i=Pp(e,n);r.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)e.safeSetTextureCube(t[a]||Ep,i[a])}function Cy(r){switch(r){case 5126:return vy;case 35664:return My;case 35665:return Sy;case 35666:return wy;case 35674:return by;case 35675:return Ey;case 35676:return Ty;case 5124:case 35670:return my;case 35667:case 35671:return gy;case 35668:case 35672:return yy;case 35669:case 35673:return xy;case 35678:case 36198:case 36298:case 36306:case 35682:return Ay;case 35680:case 36300:case 36308:case 36293:return Ly}}function Ry(r,t,e){this.id=r,this.addr=e,this.cache=[],this.setValue=py(t.type)}function Op(r,t,e){this.id=r,this.addr=e,this.cache=[],this.size=t.size,this.setValue=Cy(t.type)}Op.prototype.updateCache=function(r){var t=this.cache;r instanceof Float32Array&&t.length!==r.length&&(this.cache=new Float32Array(r.length)),_r(t,r)};function Ip(r){this.id=r,this.seq=[],this.map={}}Ip.prototype.setValue=function(r,t,e){for(var n=this.seq,i=0,a=n.length;i!==a;++i){var o=n[i];o.setValue(r,t[o.id],e)}};var ad=/([\w\d_]+)(\])?(\[|\.)?/g;function Bp(r,t){r.seq.push(t),r.map[t.id]=t}function Py(r,t,e){var n=r.name,i=n.length;for(ad.lastIndex=0;;){var a=ad.exec(n),o=ad.lastIndex,l=a[1],c=a[2]==="]",h=a[3];if(c&&(l=l|0),h===void 0||h==="["&&o+2===i){Bp(e,h===void 0?new Ry(l,r,t):new Op(l,r,t));break}else{var d=e.map,p=d[l];p===void 0&&(p=new Ip(l),Bp(e,p)),e=p}}}function Jo(r,t){this.seq=[],this.map={};for(var e=r.getProgramParameter(t,35718),n=0;n<e;++n){var i=r.getActiveUniform(t,n),a=r.getUniformLocation(t,i.name);Py(i,a,this)}}Jo.prototype.setValue=function(r,t,e,n){var i=this.map[t];i!==void 0&&i.setValue(r,e,n)},Jo.prototype.setOptional=function(r,t,e){var n=t[e];n!==void 0&&this.setValue(r,e,n)},Jo.upload=function(r,t,e,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],l=e[o.id];l.needsUpdate!==!1&&o.setValue(r,l.value,n)}},Jo.seqWithValue=function(r,t){for(var e=[],n=0,i=r.length;n!==i;++n){var a=r[n];a.id in t&&e.push(a)}return e};function Dp(r,t,e){var n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}var Oy=0;function Iy(r){for(var t=r.split(`
`),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function Fp(r){switch(r){case Bn:return["Linear","( value )"];case Mr:return["sRGB","( value )"];case Fr:return["RGBE","( value )"];case Mu:return["RGBM","( value, 7.0 )"];case ri:return["RGBM","( value, 16.0 )"];case ii:return["RGBD","( value, 256.0 )"];case kn:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case xu:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function Np(r,t,e){var n=r.getShaderParameter(t,35713),i=r.getShaderInfoLog(t).trim();if(n&&i==="")return"";var a=r.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+e+`
`+i+Iy(a)}function ql(r,t){var e=Fp(t);return"vec4 "+r+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function By(r,t){var e=Fp(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Dy(r,t){var e;switch(t){case _c:e="Linear";break;case Wc:e="Reinhard";break;case jc:e="OptimizedCineon";break;case ml:e="ACESFilmic";break;case gl:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+r+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Fy(r){var t=[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(ec).join(`
`)}function Ny(r){var t=[];for(var e in r){var n=r[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function zy(r,t){for(var e={},n=r.getProgramParameter(t,35721),i=0;i<n;i++){var a=r.getActiveAttrib(t,i),o=a.name;e[o]=r.getAttribLocation(t,o)}return e}function ec(r){return r!==""}function zp(r,t){return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Gp(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Gy=/^[ \t]*#include +<([\w\d./]+)>/gm;function od(r){return r.replace(Gy,Uy)}function Uy(r,t){var e=pt[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return od(e)}var Hy=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ky=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Up(r){return r.replace(ky,Hp).replace(Hy,Vy)}function Vy(r,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Hp(r,t,e,n)}function Hp(r,t,e,n){for(var i="",a=parseInt(t);a<parseInt(e);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function kp(r){var t="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function _y(r){var t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Oa?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===Kr?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ir&&(t="SHADOWMAP_TYPE_VSM"),t}function Wy(r){var t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ds:case ps:t="ENVMAP_TYPE_CUBE";break;case vo:case mo:t="ENVMAP_TYPE_CUBE_UV";break}return t}function jy(r){var t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case ps:case mo:t="ENVMAP_MODE_REFRACTION";break}return t}function Xy(r){var t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case hs:t="ENVMAP_BLENDING_MULTIPLY";break;case kc:t="ENVMAP_BLENDING_MIX";break;case Vc:t="ENVMAP_BLENDING_ADD";break}return t}function Yy(r,t,e,n){var i=r.getContext(),a=e.defines,o=e.vertexShader,l=e.fragmentShader,c=_y(e),h=Wy(e),d=jy(e),p=Xy(e),v=r.gammaFactor>0?r.gammaFactor:1,m=e.isWebGL2?"":Fy(e),x=Ny(a),M=i.createProgram(),A,S,y=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(A=[x].filter(ec).join(`
`),A.length>0&&(A+=`
`),S=[m,x].filter(ec).join(`
`),S.length>0&&(S+=`
`)):(A=[kp(e),"#define SHADER_NAME "+e.shaderName,x,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ec).join(`
`),S=[m,kp(e),"#define SHADER_NAME "+e.shaderName,x,e.alphaTest?"#define ALPHATEST "+e.alphaTest+(e.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+h:"",e.envMap?"#define "+d:"",e.envMap?"#define "+p:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.sheen?"#define USE_SHEEN":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Da?"#define TONE_MAPPING":"",e.toneMapping!==Da?pt.tonemapping_pars_fragment:"",e.toneMapping!==Da?Dy("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",pt.encodings_pars_fragment,e.map?ql("mapTexelToLinear",e.mapEncoding):"",e.matcap?ql("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?ql("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?ql("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.lightMap?ql("lightMapTexelToLinear",e.lightMapEncoding):"",By("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(ec).join(`
`)),o=od(o),o=zp(o,e),o=Gp(o,e),l=od(l),l=zp(l,e),l=Gp(l,e),o=Up(o),l=Up(l),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,A=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,S=["#define varying in",e.glslVersion===Au?"":"out highp vec4 pc_fragColor;",e.glslVersion===Au?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);var O=y+A+o,P=y+S+l,L=Dp(i,35633,O),C=Dp(i,35632,P);if(i.attachShader(M,L),i.attachShader(M,C),e.index0AttributeName!==void 0?i.bindAttribLocation(M,0,e.index0AttributeName):e.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M),r.debug.checkShaderErrors){var R=i.getProgramInfoLog(M).trim(),N=i.getShaderInfoLog(L).trim(),V=i.getShaderInfoLog(C).trim(),X=!0,z=!0;if(i.getProgramParameter(M,35714)===!1){X=!1;var D=Np(i,L,"vertex"),H=Np(i,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(M,35715),"gl.getProgramInfoLog",R,D,H)}else R!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):(N===""||V==="")&&(z=!1);z&&(this.diagnostics={runnable:X,programLog:R,vertexShader:{log:N,prefix:A},fragmentShader:{log:V,prefix:S}})}i.deleteShader(L),i.deleteShader(C);var j;this.getUniforms=function(){return j===void 0&&(j=new Jo(i,M)),j};var _;return this.getAttributes=function(){return _===void 0&&(_=zy(i,M)),_},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.name=e.shaderName,this.id=Oy++,this.cacheKey=t,this.usedTimes=1,this.program=M,this.vertexShader=L,this.fragmentShader=C,this}function Jy(r,t,e,n,i,a){var o=[],l=n.isWebGL2,c=n.logarithmicDepthBuffer,h=n.floatVertexTextures,d=n.maxVertexUniforms,p=n.vertexTextures,v=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},x=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function M(C){var R=C.skeleton,N=R.bones;if(h)return 1024;var V=d,X=Math.floor((V-20)/4),z=Math.min(X,N.length);return z<N.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+N.length+" bones. This GPU supports "+z+"."),0):z}function A(C){var R;return C?C.isTexture?R=C.encoding:C.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),R=C.texture.encoding):R=Bn,R}function S(C,R,N,V,X){var z=V.fog,D=C.isMeshStandardMaterial?V.environment:null,H=t.get(C.envMap||D),j=m[C.type],_=X.isSkinnedMesh?M(X):0;C.precision!==null&&(v=n.getMaxPrecision(C.precision),v!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",v,"instead."));var W,Q;if(j){var te=Wi[j];W=te.vertexShader,Q=te.fragmentShader}else W=C.vertexShader,Q=C.fragmentShader;var oe=r.getRenderTarget(),he={isWebGL2:l,shaderID:j,shaderName:C.type,vertexShader:W,fragmentShader:Q,defines:C.defines,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:v,instancing:X.isInstancedMesh===!0,instancingColor:X.isInstancedMesh===!0&&X.instanceColor!==null,supportsVertexTextures:p,outputEncoding:oe!==null?A(oe.texture):r.outputEncoding,map:!!C.map,mapEncoding:A(C.map),matcap:!!C.matcap,matcapEncoding:A(C.matcap),envMap:!!H,envMapMode:H&&H.mapping,envMapEncoding:A(H),envMapCubeUV:!!H&&(H.mapping===vo||H.mapping===mo),lightMap:!!C.lightMap,lightMapEncoding:A(C.lightMap),aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,emissiveMapEncoding:A(C.emissiveMap),bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===Bl,tangentSpaceNormalMap:C.normalMapType===fa,clearcoatMap:!!C.clearcoatMap,clearcoatRoughnessMap:!!C.clearcoatRoughnessMap,clearcoatNormalMap:!!C.clearcoatNormalMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,alphaMap:!!C.alphaMap,gradientMap:!!C.gradientMap,sheen:!!C.sheen,transmissionMap:!!C.transmissionMap,combine:C.combine,vertexTangents:C.normalMap&&C.vertexTangents,vertexColors:C.vertexColors,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.displacementMap||!!C.transmissionMap,uvsVertexOnly:!(!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatNormalMap||!!C.transmissionMap)&&!!C.displacementMap,fog:!!z,useFog:C.fog,fogExp2:z&&z.isFogExp2,flatShading:C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:c,skinning:C.skinning&&_>0,maxBones:_,useVertexTexture:h,morphTargets:C.morphTargets,morphNormals:C.morphNormals,maxMorphTargets:r.maxMorphTargets,maxMorphNormals:r.maxMorphNormals,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:r.shadowMap.enabled&&N.length>0,shadowMapType:r.shadowMap.type,toneMapping:C.toneMapped?r.toneMapping:Da,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,alphaTest:C.alphaTest,doubleSided:C.side===mn,flipSided:C.side===un,depthPacking:C.depthPacking!==void 0?C.depthPacking:!1,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||e.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||e.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||e.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()};return he}function y(C){var R=[];if(C.shaderID?R.push(C.shaderID):(R.push(C.fragmentShader),R.push(C.vertexShader)),C.defines!==void 0)for(var N in C.defines)R.push(N),R.push(C.defines[N]);if(C.isRawShaderMaterial===!1){for(var V=0;V<x.length;V++)R.push(C[x[V]]);R.push(r.outputEncoding),R.push(r.gammaFactor)}return R.push(C.customProgramCacheKey),R.join()}function O(C){var R=m[C.type],N;if(R){var V=Wi[R];N=ks.clone(V.uniforms)}else N=C.uniforms;return N}function P(C,R){for(var N,V=0,X=o.length;V<X;V++){var z=o[V];if(z.cacheKey===R){N=z,++N.usedTimes;break}}return N===void 0&&(N=new Yy(r,R,C,i),o.push(N)),N}function L(C){if(--C.usedTimes==0){var R=o.indexOf(C);o[R]=o[o.length-1],o.pop(),C.destroy()}}return{getParameters:S,getProgramCacheKey:y,getUniforms:O,acquireProgram:P,releaseProgram:L,programs:o}}function Zy(){var r=new WeakMap;function t(a){var o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function e(a){r.delete(a)}function n(a,o,l){r.get(a)[o]=l}function i(){r=new WeakMap}return{get:t,remove:e,update:n,dispose:i}}function Qy(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.program!==t.program?r.program.id-t.program.id:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function Ky(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function Vp(r){var t=[],e=0,n=[],i=[],a={id:-1};function o(){e=0,n.length=0,i.length=0}function l(v,m,x,M,A,S){var y=t[e],O=r.get(x);return y===void 0?(y={id:v.id,object:v,geometry:m,material:x,program:O.program||a,groupOrder:M,renderOrder:v.renderOrder,z:A,group:S},t[e]=y):(y.id=v.id,y.object=v,y.geometry=m,y.material=x,y.program=O.program||a,y.groupOrder=M,y.renderOrder=v.renderOrder,y.z=A,y.group=S),e++,y}function c(v,m,x,M,A,S){var y=l(v,m,x,M,A,S);(x.transparent===!0?i:n).push(y)}function h(v,m,x,M,A,S){var y=l(v,m,x,M,A,S);(x.transparent===!0?i:n).unshift(y)}function d(v,m){n.length>1&&n.sort(v||Qy),i.length>1&&i.sort(m||Ky)}function p(){for(var v=e,m=t.length;v<m;v++){var x=t[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.program=null,x.group=null}}return{opaque:n,transparent:i,init:o,push:c,unshift:h,finish:p,sort:d}}function $y(r){var t=new WeakMap;function e(i,a){var o=t.get(i),l;return o===void 0?(l=new Vp(r),t.set(i,new WeakMap),t.get(i).set(a,l)):(l=o.get(a),l===void 0&&(l=new Vp(r),o.set(a,l))),l}function n(){t=new WeakMap}return{get:e,dispose:n}}function qy(){var r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new I,color:new Pe};break;case"SpotLight":n={position:new I,direction:new I,color:new Pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new I,color:new Pe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new I,skyColor:new Pe,groundColor:new Pe};break;case"RectAreaLight":n={color:new Pe,position:new I,halfWidth:new I,halfHeight:new I};break}return r[e.id]=n,n}}}function e0(){var r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];var n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=n,n}}}var t0=0;function n0(r,t){return(t.castShadow?1:0)-(r.castShadow?1:0)}function r0(r,t){for(var e=new qy,n=e0(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new I);var o=new I,l=new ct,c=new ct;function h(d,p,v){for(var m=0,x=0,M=0,A=0;A<9;A++)i.probe[A].set(0,0,0);var S=0,y=0,O=0,P=0,L=0,C=0,R=0,N=0,V=v.matrixWorldInverse;d.sort(n0);for(var X=0,z=d.length;X<z;X++){var D=d[X],H=D.color,j=D.intensity,_=D.distance,W=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)m+=H.r*j,x+=H.g*j,M+=H.b*j;else if(D.isLightProbe)for(var Q=0;Q<9;Q++)i.probe[Q].addScaledVector(D.sh.coefficients[Q],j);else if(D.isDirectionalLight){var te=e.get(D);if(te.color.copy(D.color).multiplyScalar(D.intensity),te.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),te.direction.sub(o),te.direction.transformDirection(V),D.castShadow){var oe=D.shadow,he=n.get(D);he.shadowBias=oe.bias,he.shadowNormalBias=oe.normalBias,he.shadowRadius=oe.radius,he.shadowMapSize=oe.mapSize,i.directionalShadow[S]=he,i.directionalShadowMap[S]=W,i.directionalShadowMatrix[S]=D.shadow.matrix,C++}i.directional[S]=te,S++}else if(D.isSpotLight){var re=e.get(D);if(re.position.setFromMatrixPosition(D.matrixWorld),re.position.applyMatrix4(V),re.color.copy(H).multiplyScalar(j),re.distance=_,re.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),re.direction.sub(o),re.direction.transformDirection(V),re.coneCos=Math.cos(D.angle),re.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),re.decay=D.decay,D.castShadow){var de=D.shadow,Me=n.get(D);Me.shadowBias=de.bias,Me.shadowNormalBias=de.normalBias,Me.shadowRadius=de.radius,Me.shadowMapSize=de.mapSize,i.spotShadow[O]=Me,i.spotShadowMap[O]=W,i.spotShadowMatrix[O]=D.shadow.matrix,N++}i.spot[O]=re,O++}else if(D.isRectAreaLight){var Xe=e.get(D);Xe.color.copy(H).multiplyScalar(j),Xe.position.setFromMatrixPosition(D.matrixWorld),Xe.position.applyMatrix4(V),c.identity(),l.copy(D.matrixWorld),l.premultiply(V),c.extractRotation(l),Xe.halfWidth.set(D.width*.5,0,0),Xe.halfHeight.set(0,D.height*.5,0),Xe.halfWidth.applyMatrix4(c),Xe.halfHeight.applyMatrix4(c),i.rectArea[P]=Xe,P++}else if(D.isPointLight){var $=e.get(D);if($.position.setFromMatrixPosition(D.matrixWorld),$.position.applyMatrix4(V),$.color.copy(D.color).multiplyScalar(D.intensity),$.distance=D.distance,$.decay=D.decay,D.castShadow){var at=D.shadow,qe=n.get(D);qe.shadowBias=at.bias,qe.shadowNormalBias=at.normalBias,qe.shadowRadius=at.radius,qe.shadowMapSize=at.mapSize,qe.shadowCameraNear=at.camera.near,qe.shadowCameraFar=at.camera.far,i.pointShadow[y]=qe,i.pointShadowMap[y]=W,i.pointShadowMatrix[y]=D.shadow.matrix,R++}i.point[y]=$,y++}else if(D.isHemisphereLight){var Ze=e.get(D);Ze.direction.setFromMatrixPosition(D.matrixWorld),Ze.direction.transformDirection(V),Ze.direction.normalize(),Ze.skyColor.copy(D.color).multiplyScalar(j),Ze.groundColor.copy(D.groundColor).multiplyScalar(j),i.hemi[L]=Ze,L++}}P>0&&(t.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=we.LTC_FLOAT_1,i.rectAreaLTC2=we.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=we.LTC_HALF_1,i.rectAreaLTC2=we.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=x,i.ambient[2]=M;var Ae=i.hash;(Ae.directionalLength!==S||Ae.pointLength!==y||Ae.spotLength!==O||Ae.rectAreaLength!==P||Ae.hemiLength!==L||Ae.numDirectionalShadows!==C||Ae.numPointShadows!==R||Ae.numSpotShadows!==N)&&(i.directional.length=S,i.spot.length=O,i.rectArea.length=P,i.point.length=y,i.hemi.length=L,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=R,i.spotShadowMatrix.length=N,Ae.directionalLength=S,Ae.pointLength=y,Ae.spotLength=O,Ae.rectAreaLength=P,Ae.hemiLength=L,Ae.numDirectionalShadows=C,Ae.numPointShadows=R,Ae.numSpotShadows=N,i.version=t0++)}return{setup:h,state:i}}function _p(r,t){var e=new r0(r,t),n=[],i=[];function a(){n.length=0,i.length=0}function o(d){n.push(d)}function l(d){i.push(d)}function c(d){e.setup(n,i,d)}var h={lightsArray:n,shadowsArray:i,lights:e};return{init:a,state:h,setupLights:c,pushLight:o,pushShadow:l}}function i0(r,t){var e=new WeakMap;function n(a,o){var l;return e.has(a)===!1?(l=new _p(r,t),e.set(a,new WeakMap),e.get(a).set(o,l)):e.get(a).has(o)===!1?(l=new _p(r,t),e.get(a).set(o,l)):l=e.get(a).get(o),l}function i(){e=new WeakMap}return{get:n,dispose:i}}function Zo(r){Qe.call(this),this.type="MeshDepthMaterial",this.depthPacking=Il,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(r)}Zo.prototype=Object.create(Qe.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isMeshDepthMaterial=!0,Zo.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.depthPacking=r.depthPacking,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this};function Qo(r){Qe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new I,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(r)}Qo.prototype=Object.create(Qe.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isMeshDistanceMaterial=!0,Qo.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this};var a0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,o0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Wp(r,t,e){var n=new Wo,i=new se,a=new se,o=new it,l=[],c=[],h={},d={0:un,1:Ei,2:mn},p=new Sn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new se},radius:{value:4}},vertexShader:o0,fragmentShader:a0}),v=p.clone();v.defines.HORIZONAL_PASS=1;var m=new Ne;m.setAttribute("position",new We(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var x=new It(m,p),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Oa,this.render=function(L,C,R){if(M.enabled!==!1&&!(M.autoUpdate===!1&&M.needsUpdate===!1)&&L.length!==0){var N=r.getRenderTarget(),V=r.getActiveCubeFace(),X=r.getActiveMipmapLevel(),z=r.state;z.setBlending(Br),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);for(var D=0,H=L.length;D<H;D++){var j=L[D],_=j.shadow;if(_===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(!(_.autoUpdate===!1&&_.needsUpdate===!1)){i.copy(_.mapSize);var W=_.getFrameExtents();if(i.multiply(W),a.copy(_.mapSize),(i.x>e||i.y>e)&&(i.x>e&&(a.x=Math.floor(e/W.x),i.x=a.x*W.x,_.mapSize.x=a.x),i.y>e&&(a.y=Math.floor(e/W.y),i.y=a.y*W.y,_.mapSize.y=a.y)),_.map===null&&!_.isPointLightShadow&&this.type===Ir){var Q={minFilter:Tn,magFilter:Tn,format:Wt};_.map=new Dn(i.x,i.y,Q),_.map.texture.name=j.name+".shadowMap",_.mapPass=new Dn(i.x,i.y,Q),_.camera.updateProjectionMatrix()}if(_.map===null){var te={minFilter:gn,magFilter:gn,format:Wt};_.map=new Dn(i.x,i.y,te),_.map.texture.name=j.name+".shadowMap",_.camera.updateProjectionMatrix()}r.setRenderTarget(_.map),r.clear();for(var oe=_.getViewportCount(),he=0;he<oe;he++){var re=_.getViewport(he);o.set(a.x*re.x,a.y*re.y,a.x*re.z,a.y*re.w),z.viewport(o),_.updateMatrices(j,he),n=_.getFrustum(),P(C,R,_.camera,j,this.type)}!_.isPointLightShadow&&this.type===Ir&&A(_,R),_.needsUpdate=!1}}M.needsUpdate=!1,r.setRenderTarget(N,V,X)}};function A(L,C){var R=t.update(x);p.uniforms.shadow_pass.value=L.map.texture,p.uniforms.resolution.value=L.mapSize,p.uniforms.radius.value=L.radius,r.setRenderTarget(L.mapPass),r.clear(),r.renderBufferDirect(C,null,R,p,x,null),v.uniforms.shadow_pass.value=L.mapPass.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,r.setRenderTarget(L.map),r.clear(),r.renderBufferDirect(C,null,R,v,x,null)}function S(L,C,R){var N=L<<0|C<<1|R<<2,V=l[N];return V===void 0&&(V=new Zo({depthPacking:Lo,morphTargets:L,skinning:C}),l[N]=V),V}function y(L,C,R){var N=L<<0|C<<1|R<<2,V=c[N];return V===void 0&&(V=new Qo({morphTargets:L,skinning:C}),c[N]=V),V}function O(L,C,R,N,V,X,z){var D=null,H=S,j=L.customDepthMaterial;if(N.isPointLight===!0&&(H=y,j=L.customDistanceMaterial),j===void 0){var _=!1;R.morphTargets===!0&&(_=C.morphAttributes&&C.morphAttributes.position&&C.morphAttributes.position.length>0);var W=!1;L.isSkinnedMesh===!0&&(R.skinning===!0?W=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",L));var Q=L.isInstancedMesh===!0;D=H(_,W,Q)}else D=j;if(r.localClippingEnabled&&R.clipShadows===!0&&R.clippingPlanes.length!==0){var te=D.uuid,oe=R.uuid,he=h[te];he===void 0&&(he={},h[te]=he);var re=he[oe];re===void 0&&(re=D.clone(),he[oe]=re),D=re}return D.visible=R.visible,D.wireframe=R.wireframe,z===Ir?D.side=R.shadowSide!==null?R.shadowSide:R.side:D.side=R.shadowSide!==null?R.shadowSide:d[R.side],D.clipShadows=R.clipShadows,D.clippingPlanes=R.clippingPlanes,D.clipIntersection=R.clipIntersection,D.wireframeLinewidth=R.wireframeLinewidth,D.linewidth=R.linewidth,N.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(N.matrixWorld),D.nearDistance=V,D.farDistance=X),D}function P(L,C,R,N,V){if(L.visible!==!1){var X=L.layers.test(C.layers);if(X&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&V===Ir)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,L.matrixWorld);var z=t.update(L),D=L.material;if(Array.isArray(D))for(var H=z.groups,j=0,_=H.length;j<_;j++){var W=H[j],Q=D[W.materialIndex];if(Q&&Q.visible){var te=O(L,z,Q,N,R.near,R.far,V);r.renderBufferDirect(R,null,z,te,L,W)}}else if(D.visible){var oe=O(L,z,D,N,R.near,R.far,V);r.renderBufferDirect(R,null,z,oe,L,null)}}for(var he=L.children,re=0,de=he.length;re<de;re++)P(he[re],C,R,N,V)}}}function s0(r,t,e){var n,i,a=e.isWebGL2;function o(){var J=!1,q=new it,ie=null,ye=new it(0,0,0,0);return{setMask:function(ue){ie!==ue&&!J&&(r.colorMask(ue,ue,ue,ue),ie=ue)},setLocked:function(ue){J=ue},setClear:function(ue,xe,ze,lt,ft){ft===!0&&(ue*=lt,xe*=lt,ze*=lt),q.set(ue,xe,ze,lt),ye.equals(q)===!1&&(r.clearColor(ue,xe,ze,lt),ye.copy(q))},reset:function(){J=!1,ie=null,ye.set(-1,0,0,0)}}}function l(){var J=!1,q=null,ie=null,ye=null;return{setTest:function(ue){ue?de(2929):Me(2929)},setMask:function(ue){q!==ue&&!J&&(r.depthMask(ue),q=ue)},setFunc:function(ue){if(ie!==ue){if(ue)switch(ue){case Dc:r.depthFunc(512);break;case Fc:r.depthFunc(519);break;case Nc:r.depthFunc(513);break;case oa:r.depthFunc(515);break;case zc:r.depthFunc(514);break;case Gc:r.depthFunc(518);break;case Uc:r.depthFunc(516);break;case Hc:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);ie=ue}},setLocked:function(ue){J=ue},setClear:function(ue){ye!==ue&&(r.clearDepth(ue),ye=ue)},reset:function(){J=!1,q=null,ie=null,ye=null}}}function c(){var J=!1,q=null,ie=null,ye=null,ce=null,ue=null,xe=null,ze=null,lt=null;return{setTest:function(vt){J||(vt?de(2960):Me(2960))},setMask:function(vt){q!==vt&&!J&&(r.stencilMask(vt),q=vt)},setFunc:function(vt,mt,zt){(ie!==vt||ye!==mt||ce!==zt)&&(r.stencilFunc(vt,mt,zt),ie=vt,ye=mt,ce=zt)},setOp:function(vt,mt,zt){(ue!==vt||xe!==mt||ze!==zt)&&(r.stencilOp(vt,mt,zt),ue=vt,xe=mt,ze=zt)},setLocked:function(vt){J=vt},setClear:function(vt){lt!==vt&&(r.clearStencil(vt),lt=vt)},reset:function(){J=!1,q=null,ie=null,ye=null,ce=null,ue=null,xe=null,ze=null,lt=null}}}var h=new o,d=new l,p=new c,v={},m=null,x=null,M=null,A=null,S=null,y=null,O=null,P=null,L=null,C=!1,R=null,N=null,V=null,X=null,z=null,D=r.getParameter(35661),H=!1,j=0,_=r.getParameter(7938);_.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL\ ([0-9])/.exec(_)[1]),H=j>=1):_.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(_)[1]),H=j>=2);var W=null,Q={},te=new it,oe=new it;function he(J,q,ie){var ye=new Uint8Array(4),ce=r.createTexture();r.bindTexture(J,ce),r.texParameteri(J,10241,9728),r.texParameteri(J,10240,9728);for(var ue=0;ue<ie;ue++)r.texImage2D(q+ue,0,6408,1,1,0,6408,5121,ye);return ce}var re={};re[3553]=he(3553,3553,1),re[34067]=he(34067,34069,6),h.setClear(0,0,0,1),d.setClear(1),p.setClear(0),de(2929),d.setFunc(oa),fe(!1),rt(na),de(2884),Ze(Br);function de(J){v[J]!==!0&&(r.enable(J),v[J]=!0)}function Me(J){v[J]!==!1&&(r.disable(J),v[J]=!1)}function Xe(J){return m!==J?(r.useProgram(J),m=J,!0):!1}var $=(n={},Object(_e.a)(n,Dr,32774),Object(_e.a)(n,cs,32778),Object(_e.a)(n,Ba,32779),n);if(a)$[hl]=32775,$[fs]=32776;else{var at=t.get("EXT_blend_minmax");at!==null&&($[hl]=at.MIN_EXT,$[fs]=at.MAX_EXT)}var qe=(i={},Object(_e.a)(i,aa,0),Object(_e.a)(i,gr,1),Object(_e.a)(i,fo,768),Object(_e.a)(i,dl,770),Object(_e.a)(i,ho,776),Object(_e.a)(i,Ic,774),Object(_e.a)(i,ou,772),Object(_e.a)(i,yr,769),Object(_e.a)(i,pl,771),Object(_e.a)(i,Bc,775),Object(_e.a)(i,vl,773),i);function Ze(J,q,ie,ye,ce,ue,xe,ze){if(J===Br){x&&(Me(3042),x=!1);return}if(x||(de(3042),x=!0),J!==ls){if(J!==M||ze!==C){if((A!==Dr||O!==Dr)&&(r.blendEquation(32774),A=Dr,O=Dr),ze)switch(J){case ia:r.blendFuncSeparate(1,771,1,771);break;case us:r.blendFunc(1,1);break;case Ia:r.blendFuncSeparate(0,0,769,771);break;case co:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case ia:r.blendFuncSeparate(770,771,1,771);break;case us:r.blendFunc(770,1);break;case Ia:r.blendFunc(0,769);break;case co:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}S=null,y=null,P=null,L=null,M=J,C=ze}return}ce=ce||q,ue=ue||ie,xe=xe||ye,(q!==A||ce!==O)&&(r.blendEquationSeparate($[q],$[ce]),A=q,O=ce),(ie!==S||ye!==y||ue!==P||xe!==L)&&(r.blendFuncSeparate(qe[ie],qe[ye],qe[ue],qe[xe]),S=ie,y=ye,P=ue,L=xe),M=J,C=null}function Ae(J,q){J.side===mn?Me(2884):de(2884);var ie=J.side===un;q&&(ie=!ie),fe(ie),J.blending===ia&&J.transparent===!1?Ze(Br):Ze(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),d.setFunc(J.depthFunc),d.setTest(J.depthTest),d.setMask(J.depthWrite),h.setMask(J.colorWrite);var ye=J.stencilWrite;p.setTest(ye),ye&&(p.setMask(J.stencilWriteMask),p.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),p.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),st(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits)}function fe(J){R!==J&&(J?r.frontFace(2304):r.frontFace(2305),R=J)}function rt(J){J!==sn?(de(2884),J!==N&&(J===na?r.cullFace(1029):J===ra?r.cullFace(1028):r.cullFace(1032))):Me(2884),N=J}function yt(J){J!==V&&(H&&r.lineWidth(J),V=J)}function st(J,q,ie){J?(de(32823),(X!==q||z!==ie)&&(r.polygonOffset(q,ie),X=q,z=ie)):Me(32823)}function At(J){J?de(3089):Me(3089)}function Kt(J){J===void 0&&(J=33984+D-1),W!==J&&(r.activeTexture(J),W=J)}function rn(J,q){W===null&&Kt();var ie=Q[W];ie===void 0&&(ie={type:void 0,texture:void 0},Q[W]=ie),(ie.type!==J||ie.texture!==q)&&(r.bindTexture(J,q||re[J]),ie.type=J,ie.texture=q)}function an(){var J=Q[W];J!==void 0&&J.type!==void 0&&(r.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function Bt(){try{r.compressedTexImage2D.apply(r,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function U(){try{r.texImage2D.apply(r,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function G(){try{r.texImage3D.apply(r,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function be(J){te.equals(J)===!1&&(r.scissor(J.x,J.y,J.z,J.w),te.copy(J))}function ge(J){oe.equals(J)===!1&&(r.viewport(J.x,J.y,J.z,J.w),oe.copy(J))}function He(){v={},W=null,Q={},m=null,x=null,M=null,A=null,S=null,y=null,O=null,P=null,L=null,C=!1,R=null,N=null,V=null,X=null,z=null,h.reset(),d.reset(),p.reset()}return{buffers:{color:h,depth:d,stencil:p},enable:de,disable:Me,useProgram:Xe,setBlending:Ze,setMaterial:Ae,setFlipSided:fe,setCullFace:rt,setLineWidth:yt,setPolygonOffset:st,setScissorTest:At,activeTexture:Kt,bindTexture:rn,unbindTexture:an,compressedTexImage2D:Bt,texImage2D:U,texImage3D:G,scissor:be,viewport:ge,reset:He}}function u0(r,t,e,n,i,a,o){var l,c,h=i.isWebGL2,d=i.maxTextures,p=i.maxCubemapSize,v=i.maxTextureSize,m=i.maxSamples,x=new WeakMap,M,A=!1;try{A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(U){}function S(U,G){return A?new OffscreenCanvas(U,G):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(U,G,be,ge){var He=1;if((U.width>ge||U.height>ge)&&(He=ge/Math.max(U.width,U.height)),He<1||G===!0)if(typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&U instanceof ImageBitmap){var J=G?Ke.floorPowerOfTwo:Math.floor,q=J(He*U.width),ie=J(He*U.height);M===void 0&&(M=S(q,ie));var ye=be?S(q,ie):M;ye.width=q,ye.height=ie;var ce=ye.getContext("2d");return ce.drawImage(U,0,0,q,ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+q+"x"+ie+")."),ye}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function O(U){return Ke.isPowerOfTwo(U.width)&&Ke.isPowerOfTwo(U.height)}function P(U){return h?!1:U.wrapS!==Un||U.wrapT!==Un||U.minFilter!==gn&&U.minFilter!==Tn}function L(U,G){return U.generateMipmaps&&G&&U.minFilter!==gn&&U.minFilter!==Tn}function C(U,G,be,ge){r.generateMipmap(U);var He=n.get(G);He.__maxMipLevel=Math.log(Math.max(be,ge))*Math.LOG2E}function R(U,G,be){if(h===!1)return G;if(U!==null){if(r[U]!==void 0)return r[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}var ge=G;return G===6403&&(be===5126&&(ge=33326),be===5131&&(ge=33325),be===5121&&(ge=33321)),G===6407&&(be===5126&&(ge=34837),be===5131&&(ge=34843),be===5121&&(ge=32849)),G===6408&&(be===5126&&(ge=34836),be===5131&&(ge=34842),be===5121&&(ge=32856)),(ge===33325||ge===33326||ge===34842||ge===34836)&&t.get("EXT_color_buffer_float"),ge}function N(U){return U===gn||U===vs||U===lu?9728:9729}function V(U){var G=U.target;G.removeEventListener("dispose",V),z(G),G.isVideoTexture&&x.delete(G),o.memory.textures--}function X(U){var G=U.target;G.removeEventListener("dispose",X),D(G),o.memory.textures--}function z(U){var G=n.get(U);G.__webglInit!==void 0&&(r.deleteTexture(G.__webglTexture),n.remove(U))}function D(U){var G=n.get(U),be=n.get(U.texture);if(!!U){if(be.__webglTexture!==void 0&&r.deleteTexture(be.__webglTexture),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(var ge=0;ge<6;ge++)r.deleteFramebuffer(G.__webglFramebuffer[ge]),G.__webglDepthbuffer&&r.deleteRenderbuffer(G.__webglDepthbuffer[ge]);else r.deleteFramebuffer(G.__webglFramebuffer),G.__webglDepthbuffer&&r.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&r.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer&&r.deleteRenderbuffer(G.__webglColorRenderbuffer),G.__webglDepthRenderbuffer&&r.deleteRenderbuffer(G.__webglDepthRenderbuffer);n.remove(U.texture),n.remove(U)}}var H=0;function j(){H=0}function _(){var U=H;return U>=d&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+d),H+=1,U}function W(U,G){var be=n.get(U);if(U.isVideoTexture&&At(U),U.version>0&&be.__version!==U.version){var ge=U.image;if(ge===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(be,U,G);return}}e.activeTexture(33984+G),e.bindTexture(3553,be.__webglTexture)}function Q(U,G){var be=n.get(U);if(U.version>0&&be.__version!==U.version){Xe(be,U,G);return}e.activeTexture(33984+G),e.bindTexture(35866,be.__webglTexture)}function te(U,G){var be=n.get(U);if(U.version>0&&be.__version!==U.version){Xe(be,U,G);return}e.activeTexture(33984+G),e.bindTexture(32879,be.__webglTexture)}function oe(U,G){var be=n.get(U);if(U.version>0&&be.__version!==U.version){$(be,U,G);return}e.activeTexture(33984+G),e.bindTexture(34067,be.__webglTexture)}var he=(l={},Object(_e.a)(l,go,10497),Object(_e.a)(l,Un,33071),Object(_e.a)(l,yo,33648),l),re=(c={},Object(_e.a)(c,gn,9728),Object(_e.a)(c,vs,9984),Object(_e.a)(c,lu,9986),Object(_e.a)(c,Tn,9729),Object(_e.a)(c,ms,9985),Object(_e.a)(c,xo,9987),c);function de(U,G,be){be?(r.texParameteri(U,10242,he[G.wrapS]),r.texParameteri(U,10243,he[G.wrapT]),(U===32879||U===35866)&&r.texParameteri(U,32882,he[G.wrapR]),r.texParameteri(U,10240,re[G.magFilter]),r.texParameteri(U,10241,re[G.minFilter])):(r.texParameteri(U,10242,33071),r.texParameteri(U,10243,33071),(U===32879||U===35866)&&r.texParameteri(U,32882,33071),(G.wrapS!==Un||G.wrapT!==Un)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(U,10240,N(G.magFilter)),r.texParameteri(U,10241,N(G.minFilter)),G.minFilter!==gn&&G.minFilter!==Tn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var ge=t.get("EXT_texture_filter_anisotropic");if(ge){if(G.type===xr&&t.get("OES_texture_float_linear")===null||G.type===za&&(h||t.get("OES_texture_half_float_linear"))===null)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(r.texParameterf(U,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function Me(U,G){U.__webglInit===void 0&&(U.__webglInit=!0,G.addEventListener("dispose",V),U.__webglTexture=r.createTexture(),o.memory.textures++)}function Xe(U,G,be){var ge=3553;G.isDataTexture2DArray&&(ge=35866),G.isDataTexture3D&&(ge=32879),Me(U,G),e.activeTexture(33984+be),e.bindTexture(ge,U.__webglTexture),r.pixelStorei(37440,G.flipY),r.pixelStorei(37441,G.premultiplyAlpha),r.pixelStorei(3317,G.unpackAlignment);var He=P(G)&&O(G.image)===!1,J=y(G.image,He,!1,v),q=O(J)||h,ie=a.convert(G.format),ye=a.convert(G.type),ce=R(G.internalFormat,ie,ye);de(ge,G,q);var ue,xe=G.mipmaps;if(G.isDepthTexture)ce=6402,h?G.type===xr?ce=36012:G.type===Na?ce=33190:G.type===Gt?ce=35056:ce=33189:G.type===xr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===qr&&ce===6402&&G.type!==Fa&&G.type!==Na&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=Fa,ye=a.convert(G.type)),G.format===Ha&&ce===6402&&(ce=34041,G.type!==Gt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Gt,ye=a.convert(G.type))),e.texImage2D(3553,0,ce,J.width,J.height,0,ie,ye,null);else if(G.isDataTexture)if(xe.length>0&&q){for(var ze=0,lt=xe.length;ze<lt;ze++)ue=xe[ze],e.texImage2D(3553,ze,ce,ue.width,ue.height,0,ie,ye,ue.data);G.generateMipmaps=!1,U.__maxMipLevel=xe.length-1}else e.texImage2D(3553,0,ce,J.width,J.height,0,ie,ye,J.data),U.__maxMipLevel=0;else if(G.isCompressedTexture){for(var ft=0,vt=xe.length;ft<vt;ft++)ue=xe[ft],G.format!==Wt&&G.format!==qt?ie!==null?e.compressedTexImage2D(3553,ft,ce,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,ft,ce,ue.width,ue.height,0,ie,ye,ue.data);U.__maxMipLevel=xe.length-1}else if(G.isDataTexture2DArray)e.texImage3D(35866,0,ce,J.width,J.height,J.depth,0,ie,ye,J.data),U.__maxMipLevel=0;else if(G.isDataTexture3D)e.texImage3D(32879,0,ce,J.width,J.height,J.depth,0,ie,ye,J.data),U.__maxMipLevel=0;else if(xe.length>0&&q){for(var mt=0,zt=xe.length;mt<zt;mt++)ue=xe[mt],e.texImage2D(3553,mt,ce,ie,ye,ue);G.generateMipmaps=!1,U.__maxMipLevel=xe.length-1}else e.texImage2D(3553,0,ce,ie,ye,J),U.__maxMipLevel=0;L(G,q)&&C(ge,G,J.width,J.height),U.__version=G.version,G.onUpdate&&G.onUpdate(G)}function $(U,G,be){if(G.image.length===6){Me(U,G),e.activeTexture(33984+be),e.bindTexture(34067,U.__webglTexture),r.pixelStorei(37440,G.flipY);for(var ge=G&&(G.isCompressedTexture||G.image[0].isCompressedTexture),He=G.image[0]&&G.image[0].isDataTexture,J=[],q=0;q<6;q++)!ge&&!He?J[q]=y(G.image[q],!1,!0,p):J[q]=He?G.image[q].image:G.image[q];var ie=J[0],ye=O(ie)||h,ce=a.convert(G.format),ue=a.convert(G.type),xe=R(G.internalFormat,ce,ue);de(34067,G,ye);var ze;if(ge){for(var lt=0;lt<6;lt++){ze=J[lt].mipmaps;for(var ft=0;ft<ze.length;ft++){var vt=ze[ft];G.format!==Wt&&G.format!==qt?ce!==null?e.compressedTexImage2D(34069+lt,ft,xe,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+lt,ft,xe,vt.width,vt.height,0,ce,ue,vt.data)}}U.__maxMipLevel=ze.length-1}else{ze=G.mipmaps;for(var mt=0;mt<6;mt++)if(He){e.texImage2D(34069+mt,0,xe,J[mt].width,J[mt].height,0,ce,ue,J[mt].data);for(var zt=0;zt<ze.length;zt++){var dr=ze[zt],$i=dr.image[mt].image;e.texImage2D(34069+mt,zt+1,xe,$i.width,$i.height,0,ce,ue,$i.data)}}else{e.texImage2D(34069+mt,0,xe,ce,ue,J[mt]);for(var pr=0;pr<ze.length;pr++){var qi=ze[pr];e.texImage2D(34069+mt,pr+1,xe,ce,ue,qi.image[mt])}}U.__maxMipLevel=ze.length}L(G,ye)&&C(34067,G,ie.width,ie.height),U.__version=G.version,G.onUpdate&&G.onUpdate(G)}}function at(U,G,be,ge){var He=a.convert(G.texture.format),J=a.convert(G.texture.type),q=R(G.texture.internalFormat,He,J);e.texImage2D(ge,0,q,G.width,G.height,0,He,J,null),r.bindFramebuffer(36160,U),r.framebufferTexture2D(36160,be,ge,n.get(G.texture).__webglTexture,0),r.bindFramebuffer(36160,null)}function qe(U,G,be){if(r.bindRenderbuffer(36161,U),G.depthBuffer&&!G.stencilBuffer){var ge=33189;if(be){var He=G.depthTexture;He&&He.isDepthTexture&&(He.type===xr?ge=36012:He.type===Na&&(ge=33190));var J=st(G);r.renderbufferStorageMultisample(36161,J,ge,G.width,G.height)}else r.renderbufferStorage(36161,ge,G.width,G.height);r.framebufferRenderbuffer(36160,36096,36161,U)}else if(G.depthBuffer&&G.stencilBuffer){if(be){var q=st(G);r.renderbufferStorageMultisample(36161,q,35056,G.width,G.height)}else r.renderbufferStorage(36161,34041,G.width,G.height);r.framebufferRenderbuffer(36160,33306,36161,U)}else{var ie=a.convert(G.texture.format),ye=a.convert(G.texture.type),ce=R(G.texture.internalFormat,ie,ye);if(be){var ue=st(G);r.renderbufferStorageMultisample(36161,ue,ce,G.width,G.height)}else r.renderbufferStorage(36161,ce,G.width,G.height)}r.bindRenderbuffer(36161,null)}function Ze(U,G){var be=G&&G.isWebGLCubeRenderTarget;if(be)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,U),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),W(G.depthTexture,0);var ge=n.get(G.depthTexture).__webglTexture;if(G.depthTexture.format===qr)r.framebufferTexture2D(36160,36096,3553,ge,0);else if(G.depthTexture.format===Ha)r.framebufferTexture2D(36160,33306,3553,ge,0);else throw new Error("Unknown depthTexture format")}function Ae(U){var G=n.get(U),be=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture){if(be)throw new Error("target.depthTexture not supported in Cube render targets");Ze(G.__webglFramebuffer,U)}else if(be){G.__webglDepthbuffer=[];for(var ge=0;ge<6;ge++)r.bindFramebuffer(36160,G.__webglFramebuffer[ge]),G.__webglDepthbuffer[ge]=r.createRenderbuffer(),qe(G.__webglDepthbuffer[ge],U,!1)}else r.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=r.createRenderbuffer(),qe(G.__webglDepthbuffer,U,!1);r.bindFramebuffer(36160,null)}function fe(U){var G=n.get(U),be=n.get(U.texture);U.addEventListener("dispose",X),be.__webglTexture=r.createTexture(),o.memory.textures++;var ge=U.isWebGLCubeRenderTarget===!0,He=U.isWebGLMultisampleRenderTarget===!0,J=O(U)||h;if(h&&U.texture.format===qt&&(U.texture.type===xr||U.texture.type===za)&&(U.texture.format=Wt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ge){G.__webglFramebuffer=[];for(var q=0;q<6;q++)G.__webglFramebuffer[q]=r.createFramebuffer()}else if(G.__webglFramebuffer=r.createFramebuffer(),He)if(h){G.__webglMultisampledFramebuffer=r.createFramebuffer(),G.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,G.__webglColorRenderbuffer);var ie=a.convert(U.texture.format),ye=a.convert(U.texture.type),ce=R(U.texture.internalFormat,ie,ye),ue=st(U);r.renderbufferStorageMultisample(36161,ue,ce,U.width,U.height),r.bindFramebuffer(36160,G.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064,36161,G.__webglColorRenderbuffer),r.bindRenderbuffer(36161,null),U.depthBuffer&&(G.__webglDepthRenderbuffer=r.createRenderbuffer(),qe(G.__webglDepthRenderbuffer,U,!0)),r.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ge){e.bindTexture(34067,be.__webglTexture),de(34067,U.texture,J);for(var xe=0;xe<6;xe++)at(G.__webglFramebuffer[xe],U,36064,34069+xe);L(U.texture,J)&&C(34067,U.texture,U.width,U.height),e.bindTexture(34067,null)}else e.bindTexture(3553,be.__webglTexture),de(3553,U.texture,J),at(G.__webglFramebuffer,U,36064,3553),L(U.texture,J)&&C(3553,U.texture,U.width,U.height),e.bindTexture(3553,null);U.depthBuffer&&Ae(U)}function rt(U){var G=U.texture,be=O(U)||h;if(L(G,be)){var ge=U.isWebGLCubeRenderTarget?34067:3553,He=n.get(G).__webglTexture;e.bindTexture(ge,He),C(ge,G,U.width,U.height),e.bindTexture(ge,null)}}function yt(U){if(U.isWebGLMultisampleRenderTarget)if(h){var G=n.get(U);r.bindFramebuffer(36008,G.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,G.__webglFramebuffer);var be=U.width,ge=U.height,He=16384;U.depthBuffer&&(He|=256),U.stencilBuffer&&(He|=1024),r.blitFramebuffer(0,0,be,ge,0,0,be,ge,He,9728),r.bindFramebuffer(36160,G.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function st(U){return h&&U.isWebGLMultisampleRenderTarget?Math.min(m,U.samples):0}function At(U){var G=o.render.frame;x.get(U)!==G&&(x.set(U,G),U.update())}var Kt=!1,rn=!1;function an(U,G){U&&U.isWebGLRenderTarget&&(Kt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Kt=!0),U=U.texture),W(U,G)}function Bt(U,G){U&&U.isWebGLCubeRenderTarget&&(rn===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),rn=!0),U=U.texture),oe(U,G)}this.allocateTextureUnit=_,this.resetTextureUnits=j,this.setTexture2D=W,this.setTexture2DArray=Q,this.setTexture3D=te,this.setTextureCube=oe,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=rt,this.updateMultisampleRenderTarget=yt,this.safeSetTexture2D=an,this.safeSetTextureCube=Bt}function jp(r,t,e){var n=e.isWebGL2;function i(a){var o;if(a===Mo)return 5121;if(a===Ga)return 32819;if(a===Ai)return 32820;if(a===_t)return 33635;if(a===yl)return 5120;if(a===Yc)return 5122;if(a===Fa)return 5123;if(a===So)return 5124;if(a===Na)return 5125;if(a===xr)return 5126;if(a===za)return n?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===Li)return 6406;if(a===qt)return 6407;if(a===Wt)return 6408;if(a===sa)return 6409;if(a===Ua)return 6410;if(a===qr)return 6402;if(a===Ha)return 34041;if(a===xl)return 6403;if(a===gs)return 36244;if(a===Ml)return 33319;if(a===cu)return 33320;if(a===ua)return 36248;if(a===Jc)return 36249;if(a===wo||a===Nt||a===Ci||a===Sl)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===wo)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Nt)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Ci)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Sl)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===wl||a===ka||a===fu||a===bo)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===wl)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===ka)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===fu)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===bo)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===Va)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((a===ys||a===Eo)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(a===ys)return o.COMPRESSED_RGB8_ETC2;if(a===Eo)return o.COMPRESSED_RGBA8_ETC2_EAC}if(a===Ri||a===Zc||a===Qc||a===Kc||a===$c||a===hu||a===du||a===qc||a===bl||a===pu||a===ef||a===xs||a===El||a===Tl||a===Ll||a===vu||a===tf||a===ei||a===Ms||a===mu||a===Cl||a===An||a===_a||a===Rl||a===ti||a===To||a===ir||a===Pl)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?a:null;if(a===Al)return o=t.get("EXT_texture_compression_bptc"),o!==null?a:null;if(a===Gt)return n?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}function Cf(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];xt.call(this),this.cameras=r}Cf.prototype=Object.assign(Object.create(xt.prototype),{constructor:Cf,isArrayCamera:!0});function Ko(){Fe.call(this),this.type="Group"}Ko.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Ko,isGroup:!0});function tc(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(tc.prototype,{constructor:tc,getHandSpace:function(){if(this._hand===null&&(this._hand=new Ko,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new Ko;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Ko,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Ko,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,e,n){var i=null,a=null,o=null,l=this._targetRay,c=this._grip,h=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(h&&t.hand){o=!0;for(var d=0;d<=window.XRHand.LITTLE_PHALANX_TIP;d++)if(t.hand[d]){var p=e.getJointPose(t.hand[d],n),v=h.joints[d];p!==null&&(v.matrix.fromArray(p.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=p.radius),v.visible=p!==null;var m=h.joints[window.XRHand.INDEX_PHALANX_TIP],x=h.joints[window.XRHand.THUMB_PHALANX_TIP],M=m.position.distanceTo(x.position),A=.02,S=.005;h.inputState.pinching&&M>A+S?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&M<=A-S&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else l!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale))),c!==null&&t.gripSpace&&(a=e.getPose(t.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale)));return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=a!==null),h!==null&&(h.visible=o!==null),this}});function Xp(r,t){var e=this,n=null,i=1,a=null,o="local-floor",l=null,c=[],h=new Map,d=new xt;d.layers.enable(1),d.viewport=new it;var p=new xt;p.layers.enable(2),p.viewport=new it;var v=[d,p],m=new Cf;m.layers.enable(1),m.layers.enable(2);var x=null,M=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(z){var D=c[z];return D===void 0&&(D=new tc,c[z]=D),D.getTargetRaySpace()},this.getControllerGrip=function(z){var D=c[z];return D===void 0&&(D=new tc,c[z]=D),D.getGripSpace()},this.getHand=function(z){var D=c[z];return D===void 0&&(D=new tc,c[z]=D),D.getHandSpace()};function A(z){var D=h.get(z.inputSource);D&&D.dispatchEvent({type:z.type,data:z.inputSource})}function S(){h.forEach(function(z,D){z.disconnect(D)}),h.clear(),r.setFramebuffer(null),r.setRenderTarget(r.getRenderTarget()),X.stop(),e.isPresenting=!1,e.dispatchEvent({type:"sessionend"})}function y(z){a=z,X.setContext(n),X.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(z){i=z,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){o=z,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return n},this.setSession=function(z){if(n=z,n!==null){n.addEventListener("select",A),n.addEventListener("selectstart",A),n.addEventListener("selectend",A),n.addEventListener("squeeze",A),n.addEventListener("squeezestart",A),n.addEventListener("squeezeend",A),n.addEventListener("end",S);var D=t.getContextAttributes();D.xrCompatible!==!0&&t.makeXRCompatible();var H={antialias:D.antialias,alpha:D.alpha,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:i},j=new XRWebGLLayer(n,t,H);n.updateRenderState({baseLayer:j}),n.requestReferenceSpace(o).then(y),n.addEventListener("inputsourceschange",O)}};function O(z){for(var D=n.inputSources,H=0;H<c.length;H++)h.set(D[H],c[H]);for(var j=0;j<z.removed.length;j++){var _=z.removed[j],W=h.get(_);W&&(W.dispatchEvent({type:"disconnected",data:_}),h.delete(_))}for(var Q=0;Q<z.added.length;Q++){var te=z.added[Q],oe=h.get(te);oe&&oe.dispatchEvent({type:"connected",data:te})}}var P=new I,L=new I;function C(z,D,H){P.setFromMatrixPosition(D.matrixWorld),L.setFromMatrixPosition(H.matrixWorld);var j=P.distanceTo(L),_=D.projectionMatrix.elements,W=H.projectionMatrix.elements,Q=_[14]/(_[10]-1),te=_[14]/(_[10]+1),oe=(_[9]+1)/_[5],he=(_[9]-1)/_[5],re=(_[8]-1)/_[0],de=(W[8]+1)/W[0],Me=Q*re,Xe=Q*de,$=j/(-re+de),at=$*-re;D.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(at),z.translateZ($),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();var qe=Q+$,Ze=te+$,Ae=Me-at,fe=Xe+(j-at),rt=oe*te/Ze*qe,yt=he*te/Ze*qe;z.projectionMatrix.makePerspective(Ae,fe,rt,yt,qe,Ze)}function R(z,D){D===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(D.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.getCamera=function(z){m.near=p.near=d.near=z.near,m.far=p.far=d.far=z.far,(x!==m.near||M!==m.far)&&(n.updateRenderState({depthNear:m.near,depthFar:m.far}),x=m.near,M=m.far);var D=z.parent,H=m.cameras;R(m,D);for(var j=0;j<H.length;j++)R(H[j],D);z.matrixWorld.copy(m.matrixWorld);for(var _=z.children,W=0,Q=_.length;W<Q;W++)_[W].updateMatrixWorld(!0);return H.length===2?C(m,d,p):m.projectionMatrix.copy(d.projectionMatrix),m};var N=null;function V(z,D){if(l=D.getViewerPose(a),l!==null){var H=l.views,j=n.renderState.baseLayer;r.setFramebuffer(j.framebuffer);var _=!1;H.length!==m.cameras.length&&(m.cameras.length=0,_=!0);for(var W=0;W<H.length;W++){var Q=H[W],te=j.getViewport(Q),oe=v[W];oe.matrix.fromArray(Q.transform.matrix),oe.projectionMatrix.fromArray(Q.projectionMatrix),oe.viewport.set(te.x,te.y,te.width,te.height),W===0&&m.matrix.copy(oe.matrix),_===!0&&m.cameras.push(oe)}}for(var he=n.inputSources,re=0;re<c.length;re++){var de=c[re],Me=he[re];de.update(Me,D,a)}N&&N(z,D)}var X=new Xl;X.setAnimationLoop(V),this.setAnimationLoop=function(z){N=z},this.dispose=function(){}}Object.assign(Xp.prototype,Nr.prototype);function l0(r){function t(S,y){S.fogColor.value.copy(y.color),y.isFog?(S.fogNear.value=y.near,S.fogFar.value=y.far):y.isFogExp2&&(S.fogDensity.value=y.density)}function e(S,y,O,P){y.isMeshBasicMaterial?n(S,y):y.isMeshLambertMaterial?(n(S,y),c(S,y)):y.isMeshToonMaterial?(n(S,y),d(S,y)):y.isMeshPhongMaterial?(n(S,y),h(S,y)):y.isMeshStandardMaterial?(n(S,y),y.isMeshPhysicalMaterial?v(S,y):p(S,y)):y.isMeshMatcapMaterial?(n(S,y),m(S,y)):y.isMeshDepthMaterial?(n(S,y),x(S,y)):y.isMeshDistanceMaterial?(n(S,y),M(S,y)):y.isMeshNormalMaterial?(n(S,y),A(S,y)):y.isLineBasicMaterial?(i(S,y),y.isLineDashedMaterial&&a(S,y)):y.isPointsMaterial?o(S,y,O,P):y.isSpriteMaterial?l(S,y):y.isShadowMaterial?(S.color.value.copy(y.color),S.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function n(S,y){S.opacity.value=y.opacity,y.color&&S.diffuse.value.copy(y.color),y.emissive&&S.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(S.map.value=y.map),y.alphaMap&&(S.alphaMap.value=y.alphaMap),y.specularMap&&(S.specularMap.value=y.specularMap);var O=r.get(y).envMap;if(O){S.envMap.value=O,S.flipEnvMap.value=O.isCubeTexture&&O._needsFlipEnvMap?-1:1,S.reflectivity.value=y.reflectivity,S.refractionRatio.value=y.refractionRatio;var P=r.get(O).__maxMipLevel;P!==void 0&&(S.maxMipLevel.value=P)}y.lightMap&&(S.lightMap.value=y.lightMap,S.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(S.aoMap.value=y.aoMap,S.aoMapIntensity.value=y.aoMapIntensity);var L;y.map?L=y.map:y.specularMap?L=y.specularMap:y.displacementMap?L=y.displacementMap:y.normalMap?L=y.normalMap:y.bumpMap?L=y.bumpMap:y.roughnessMap?L=y.roughnessMap:y.metalnessMap?L=y.metalnessMap:y.alphaMap?L=y.alphaMap:y.emissiveMap?L=y.emissiveMap:y.clearcoatMap?L=y.clearcoatMap:y.clearcoatNormalMap?L=y.clearcoatNormalMap:y.clearcoatRoughnessMap&&(L=y.clearcoatRoughnessMap),L!==void 0&&(L.isWebGLRenderTarget&&(L=L.texture),L.matrixAutoUpdate===!0&&L.updateMatrix(),S.uvTransform.value.copy(L.matrix));var C;y.aoMap?C=y.aoMap:y.lightMap&&(C=y.lightMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),S.uv2Transform.value.copy(C.matrix))}function i(S,y){S.diffuse.value.copy(y.color),S.opacity.value=y.opacity}function a(S,y){S.dashSize.value=y.dashSize,S.totalSize.value=y.dashSize+y.gapSize,S.scale.value=y.scale}function o(S,y,O,P){S.diffuse.value.copy(y.color),S.opacity.value=y.opacity,S.size.value=y.size*O,S.scale.value=P*.5,y.map&&(S.map.value=y.map),y.alphaMap&&(S.alphaMap.value=y.alphaMap);var L;y.map?L=y.map:y.alphaMap&&(L=y.alphaMap),L!==void 0&&(L.matrixAutoUpdate===!0&&L.updateMatrix(),S.uvTransform.value.copy(L.matrix))}function l(S,y){S.diffuse.value.copy(y.color),S.opacity.value=y.opacity,S.rotation.value=y.rotation,y.map&&(S.map.value=y.map),y.alphaMap&&(S.alphaMap.value=y.alphaMap);var O;y.map?O=y.map:y.alphaMap&&(O=y.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),S.uvTransform.value.copy(O.matrix))}function c(S,y){y.emissiveMap&&(S.emissiveMap.value=y.emissiveMap)}function h(S,y){S.specular.value.copy(y.specular),S.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(S.emissiveMap.value=y.emissiveMap),y.bumpMap&&(S.bumpMap.value=y.bumpMap,S.bumpScale.value=y.bumpScale,y.side===un&&(S.bumpScale.value*=-1)),y.normalMap&&(S.normalMap.value=y.normalMap,S.normalScale.value.copy(y.normalScale),y.side===un&&S.normalScale.value.negate()),y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias)}function d(S,y){y.gradientMap&&(S.gradientMap.value=y.gradientMap),y.emissiveMap&&(S.emissiveMap.value=y.emissiveMap),y.bumpMap&&(S.bumpMap.value=y.bumpMap,S.bumpScale.value=y.bumpScale,y.side===un&&(S.bumpScale.value*=-1)),y.normalMap&&(S.normalMap.value=y.normalMap,S.normalScale.value.copy(y.normalScale),y.side===un&&S.normalScale.value.negate()),y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias)}function p(S,y){S.roughness.value=y.roughness,S.metalness.value=y.metalness,y.roughnessMap&&(S.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(S.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(S.emissiveMap.value=y.emissiveMap),y.bumpMap&&(S.bumpMap.value=y.bumpMap,S.bumpScale.value=y.bumpScale,y.side===un&&(S.bumpScale.value*=-1)),y.normalMap&&(S.normalMap.value=y.normalMap,S.normalScale.value.copy(y.normalScale),y.side===un&&S.normalScale.value.negate()),y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias);var O=r.get(y).envMap;O&&(S.envMapIntensity.value=y.envMapIntensity)}function v(S,y){p(S,y),S.reflectivity.value=y.reflectivity,S.clearcoat.value=y.clearcoat,S.clearcoatRoughness.value=y.clearcoatRoughness,y.sheen&&S.sheen.value.copy(y.sheen),y.clearcoatMap&&(S.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(S.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),S.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===un&&S.clearcoatNormalScale.value.negate()),S.transmission.value=y.transmission,y.transmissionMap&&(S.transmissionMap.value=y.transmissionMap)}function m(S,y){y.matcap&&(S.matcap.value=y.matcap),y.bumpMap&&(S.bumpMap.value=y.bumpMap,S.bumpScale.value=y.bumpScale,y.side===un&&(S.bumpScale.value*=-1)),y.normalMap&&(S.normalMap.value=y.normalMap,S.normalScale.value.copy(y.normalScale),y.side===un&&S.normalScale.value.negate()),y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias)}function x(S,y){y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias)}function M(S,y){y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias),S.referencePosition.value.copy(y.referencePosition),S.nearDistance.value=y.nearDistance,S.farDistance.value=y.farDistance}function A(S,y){y.bumpMap&&(S.bumpMap.value=y.bumpMap,S.bumpScale.value=y.bumpScale,y.side===un&&(S.bumpScale.value*=-1)),y.normalMap&&(S.normalMap.value=y.normalMap,S.normalScale.value.copy(y.normalScale),y.side===un&&S.normalScale.value.negate()),y.displacementMap&&(S.displacementMap.value=y.displacementMap,S.displacementScale.value=y.displacementScale,S.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function c0(){var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.style.display="block",r}function Ju(r){r=r||{};var t=r.canvas!==void 0?r.canvas:c0(),e=r.context!==void 0?r.context:null,n=r.alpha!==void 0?r.alpha:!1,i=r.depth!==void 0?r.depth:!0,a=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,l=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,c=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.powerPreference!==void 0?r.powerPreference:"default",d=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1,p=null,v=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Bn,this.physicallyCorrectLights=!1,this.toneMapping=Da,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var m=this,x=!1,M=null,A=0,S=0,y=null,O=null,P=-1,L=null,C=null,R=new it,N=new it,V=null,X=t.width,z=t.height,D=1,H=null,j=null,_=new it(0,0,X,z),W=new it(0,0,X,z),Q=!1,te=new Wo,oe=!1,he=!1,re=new ct,de=new I,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return y===null?D:1}var $=e;function at(F,ae){for(var ee=0;ee<F.length;ee++){var le=F[ee],Ee=t.getContext(le,ae);if(Ee!==null)return Ee}return null}try{var qe={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",ft,!1),t.addEventListener("webglcontextrestored",vt,!1),$===null){var Ze=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Ze.shift(),$=at(Ze,qe),$===null)throw at(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}var Ae,fe,rt,yt,st,At,Kt,rn,an,Bt,U,G,be,ge,He,J,q,ie,ye,ce,ue;function xe(){Ae=new Vg($),fe=new Ug($,Ae,r),fe.isWebGL2===!1&&(Ae.get("WEBGL_depth_texture"),Ae.get("OES_texture_float"),Ae.get("OES_texture_half_float"),Ae.get("OES_texture_half_float_linear"),Ae.get("OES_standard_derivatives"),Ae.get("OES_element_index_uint"),Ae.get("OES_vertex_array_object"),Ae.get("ANGLE_instanced_arrays")),Ae.get("OES_texture_float_linear"),ce=new jp($,Ae,fe),rt=new s0($,Ae,fe),rt.scissor(N.copy(W).multiplyScalar(D).floor()),rt.viewport(R.copy(_).multiplyScalar(D).floor()),yt=new jg($),st=new Zy,At=new u0($,Ae,rt,st,fe,ce,yt),Kt=new kg(m),rn=new Hu($,fe),ue=new zg($,Ae,rn,fe),an=new _g($,rn,yt,ue),Bt=new Zg($,an,rn,yt),q=new Jg($),He=new Hg(st),U=new Jy(m,Kt,Ae,fe,ue,He),G=new l0(st),be=new $y(st),ge=new i0(Ae,fe),J=new Ng(m,Kt,rt,Bt,l),ie=new Gg($,Ae,yt,fe),ye=new Wg($,Ae,yt,fe),yt.programs=U.programs,m.capabilities=fe,m.extensions=Ae,m.properties=st,m.renderLists=be,m.state=rt,m.info=yt}xe();var ze=new Xp(m,$);this.xr=ze;var lt=new Wp(m,Bt,fe.maxTextureSize);this.shadowMap=lt,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){var F=Ae.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){var F=Ae.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(F){F!==void 0&&(D=F,this.setSize(X,z,!1))},this.getSize=function(F){return F===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),F=new se),F.set(X,z)},this.setSize=function(F,ae,ee){if(ze.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=F,z=ae,t.width=Math.floor(F*D),t.height=Math.floor(ae*D),ee!==!1&&(t.style.width=F+"px",t.style.height=ae+"px"),this.setViewport(0,0,F,ae)},this.getDrawingBufferSize=function(F){return F===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),F=new se),F.set(X*D,z*D).floor()},this.setDrawingBufferSize=function(F,ae,ee){X=F,z=ae,D=ee,t.width=Math.floor(F*ee),t.height=Math.floor(ae*ee),this.setViewport(0,0,F,ae)},this.getCurrentViewport=function(F){return F===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),F=new it),F.copy(R)},this.getViewport=function(F){return F.copy(_)},this.setViewport=function(F,ae,ee,le){F.isVector4?_.set(F.x,F.y,F.z,F.w):_.set(F,ae,ee,le),rt.viewport(R.copy(_).multiplyScalar(D).floor())},this.getScissor=function(F){return F.copy(W)},this.setScissor=function(F,ae,ee,le){F.isVector4?W.set(F.x,F.y,F.z,F.w):W.set(F,ae,ee,le),rt.scissor(N.copy(W).multiplyScalar(D).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(F){rt.setScissorTest(Q=F)},this.setOpaqueSort=function(F){H=F},this.setTransparentSort=function(F){j=F},this.getClearColor=function(){return J.getClearColor()},this.setClearColor=function(){J.setClearColor.apply(J,arguments)},this.getClearAlpha=function(){return J.getClearAlpha()},this.setClearAlpha=function(){J.setClearAlpha.apply(J,arguments)},this.clear=function(F,ae,ee){var le=0;(F===void 0||F)&&(le|=16384),(ae===void 0||ae)&&(le|=256),(ee===void 0||ee)&&(le|=1024),$.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ft,!1),t.removeEventListener("webglcontextrestored",vt,!1),be.dispose(),ge.dispose(),st.dispose(),Kt.dispose(),Bt.dispose(),ue.dispose(),ze.dispose(),vr.stop()};function ft(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1,xe()}function mt(F){var ae=F.target;ae.removeEventListener("dispose",mt),zt(ae)}function zt(F){dr(F),st.remove(F)}function dr(F){var ae=st.get(F).program;ae!==void 0&&U.releaseProgram(ae)}function $i(F,ae){F.render(function(ee){m.renderBufferImmediate(ee,ae)})}this.renderBufferImmediate=function(F,ae){ue.initAttributes();var ee=st.get(F);F.hasPositions&&!ee.position&&(ee.position=$.createBuffer()),F.hasNormals&&!ee.normal&&(ee.normal=$.createBuffer()),F.hasUvs&&!ee.uv&&(ee.uv=$.createBuffer()),F.hasColors&&!ee.color&&(ee.color=$.createBuffer());var le=ae.getAttributes();F.hasPositions&&($.bindBuffer(34962,ee.position),$.bufferData(34962,F.positionArray,35048),ue.enableAttribute(le.position),$.vertexAttribPointer(le.position,3,5126,!1,0,0)),F.hasNormals&&($.bindBuffer(34962,ee.normal),$.bufferData(34962,F.normalArray,35048),ue.enableAttribute(le.normal),$.vertexAttribPointer(le.normal,3,5126,!1,0,0)),F.hasUvs&&($.bindBuffer(34962,ee.uv),$.bufferData(34962,F.uvArray,35048),ue.enableAttribute(le.uv),$.vertexAttribPointer(le.uv,2,5126,!1,0,0)),F.hasColors&&($.bindBuffer(34962,ee.color),$.bufferData(34962,F.colorArray,35048),ue.enableAttribute(le.color),$.vertexAttribPointer(le.color,3,5126,!1,0,0)),ue.disableUnusedAttributes(),$.drawArrays(4,0,F.count),F.count=0},this.renderBufferDirect=function(F,ae,ee,le,Ee,St){ae===null&&(ae=Me);var ht=Ee.isMesh&&Ee.matrixWorld.determinant()<0,Dt=Pc(F,ae,le,Ee);rt.setMaterial(le,ht);var ot=ee.index,bn=ee.attributes.position;if(ot===null){if(bn===void 0||bn.count===0)return}else if(ot.count===0)return;var hn=1;le.wireframe===!0&&(ot=an.getWireframeAttribute(ee),hn=2),(le.morphTargets||le.morphNormals)&&q.update(Ee,ee,le,Dt),ue.setup(Ee,le,Dt,ee,ot);var En,Ve=ie;ot!==null&&(En=rn.get(ot),Ve=ye,Ve.setIndex(En));var zn=ot!==null?ot.count:bn.count,Gn=ee.drawRange.start*hn,Rt=ee.drawRange.count*hn,Pn=St!==null?St.start*hn:0,Et=St!==null?St.count*hn:Infinity,ut=Math.max(Gn,Pn),Pt=Math.min(zn,Gn+Rt,Pn+Et)-1,gt=Math.max(0,Pt-ut+1);if(gt!==0){if(Ee.isMesh)le.wireframe===!0?(rt.setLineWidth(le.wireframeLinewidth*Xe()),Ve.setMode(1)):Ve.setMode(4);else if(Ee.isLine){var wt=le.linewidth;wt===void 0&&(wt=1),rt.setLineWidth(wt*Xe()),Ee.isLineSegments?Ve.setMode(1):Ee.isLineLoop?Ve.setMode(2):Ve.setMode(3)}else Ee.isPoints?Ve.setMode(0):Ee.isSprite&&Ve.setMode(4);if(Ee.isInstancedMesh)Ve.renderInstances(ut,gt,Ee.count);else if(ee.isInstancedBufferGeometry){var on=Math.min(ee.instanceCount,ee._maxInstanceCount);Ve.renderInstances(ut,gt,on)}else Ve.render(ut,gt)}},this.compile=function(F,ae){v=ge.get(F,ae),v.init(),F.traverseVisible(function(le){le.isLight&&le.layers.test(ae.layers)&&(v.pushLight(le),le.castShadow&&v.pushShadow(le))}),v.setupLights(ae);var ee=new WeakMap;F.traverse(function(le){var Ee=le.material;if(Ee)if(Array.isArray(Ee))for(var St=0;St<Ee.length;St++){var ht=Ee[St];ee.has(ht)===!1&&(Jr(ht,F,le),ee.set(ht))}else ee.has(Ee)===!1&&(Jr(Ee,F,le),ee.set(Ee))})};var pr=null;function qi(F){ze.isPresenting||pr&&pr(F)}var vr=new Xl;vr.setAnimationLoop(qi),typeof window!="undefined"&&vr.setContext(window),this.setAnimationLoop=function(F){pr=F,ze.setAnimationLoop(F),F===null?vr.stop():vr.start()},this.render=function(F,ae){var ee,le;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),ee=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),le=arguments[3]),ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x!==!0){ue.resetDefaultState(),P=-1,L=null,F.autoUpdate===!0&&F.updateMatrixWorld(),ae.parent===null&&ae.updateMatrixWorld(),ze.enabled===!0&&ze.isPresenting===!0&&(ae=ze.getCamera(ae)),F.isScene===!0&&F.onBeforeRender(m,F,ae,ee||y),v=ge.get(F,ae),v.init(),re.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),te.setFromProjectionMatrix(re),he=this.localClippingEnabled,oe=He.init(this.clippingPlanes,he,ae),p=be.get(F,ae),p.init(),ea(F,ae,0,m.sortObjects),p.finish(),m.sortObjects===!0&&p.sort(H,j),oe===!0&&He.beginShadows();var Ee=v.state.shadowsArray;lt.render(Ee,F,ae),v.setupLights(ae),oe===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),ee!==void 0&&this.setRenderTarget(ee),J.render(p,F,ae,le);var St=p.opaque,ht=p.transparent;St.length>0&&bi(St,F,ae),ht.length>0&&bi(ht,F,ae),F.isScene===!0&&F.onAfterRender(m,F,ae),y!==null&&(At.updateRenderTargetMipmap(y),At.updateMultisampleRenderTarget(y)),rt.buffers.depth.setTest(!0),rt.buffers.depth.setMask(!0),rt.buffers.color.setMask(!0),rt.setPolygonOffset(!1),p=null,v=null}};function ea(F,ae,ee,le){if(F.visible!==!1){var Ee=F.layers.test(ae.layers);if(Ee){if(F.isGroup)ee=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ae);else if(F.isLight)v.pushLight(F),F.castShadow&&v.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||te.intersectsSprite(F)){le&&de.setFromMatrixPosition(F.matrixWorld).applyMatrix4(re);var St=Bt.update(F),ht=F.material;ht.visible&&p.push(F,St,ht,ee,de.z,null)}}else if(F.isImmediateRenderObject)le&&de.setFromMatrixPosition(F.matrixWorld).applyMatrix4(re),p.push(F,null,F.material,ee,de.z,null);else if((F.isMesh||F.isLine||F.isPoints)&&(F.isSkinnedMesh&&F.skeleton.frame!==yt.render.frame&&(F.skeleton.update(),F.skeleton.frame=yt.render.frame),!F.frustumCulled||te.intersectsObject(F))){le&&de.setFromMatrixPosition(F.matrixWorld).applyMatrix4(re);var Dt=Bt.update(F),ot=F.material;if(Array.isArray(ot))for(var bn=Dt.groups,hn=0,En=bn.length;hn<En;hn++){var Ve=bn[hn],zn=ot[Ve.materialIndex];zn&&zn.visible&&p.push(F,Dt,zn,ee,de.z,Ve)}else ot.visible&&p.push(F,Dt,ot,ee,de.z,null)}}for(var Gn=F.children,Rt=0,Pn=Gn.length;Rt<Pn;Rt++)ea(Gn[Rt],ae,ee,le)}}function bi(F,ae,ee){for(var le=ae.isScene===!0?ae.overrideMaterial:null,Ee=0,St=F.length;Ee<St;Ee++){var ht=F[Ee],Dt=ht.object,ot=ht.geometry,bn=le===null?ht.material:le,hn=ht.group;if(ee.isArrayCamera){C=ee;for(var En=ee.cameras,Ve=0,zn=En.length;Ve<zn;Ve++){var Gn=En[Ve];Dt.layers.test(Gn.layers)&&(rt.viewport(R.copy(Gn.viewport)),v.setupLights(Gn),au(Dt,ae,Gn,ot,bn,hn))}}else C=null,au(Dt,ae,ee,ot,bn,hn)}}function au(F,ae,ee,le,Ee,St){if(F.onBeforeRender(m,ae,ee,le,Ee,St),v=ge.get(ae,C||ee),F.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),F.isImmediateRenderObject){var ht=Pc(ee,ae,Ee,F);rt.setMaterial(Ee),ue.reset(),$i(F,ht)}else m.renderBufferDirect(ee,ae,le,Ee,F,St);F.onAfterRender(m,ae,ee,le,Ee,St),v=ge.get(ae,C||ee)}function Jr(F,ae,ee){ae.isScene!==!0&&(ae=Me);var le=st.get(F),Ee=v.state.lights,St=v.state.shadowsArray,ht=Ee.state.version,Dt=U.getParameters(F,Ee.state,St,ae,ee),ot=U.getProgramCacheKey(Dt),bn=le.program,hn=!0;if(bn===void 0)F.addEventListener("dispose",mt);else if(bn.cacheKey!==ot)dr(F);else if(le.lightsStateVersion!==ht)hn=!1;else if(Dt.shaderID!==void 0){var En=F.isMeshStandardMaterial?ae.environment:null;le.envMap=Kt.get(F.envMap||En);return}else hn=!1;hn&&(Dt.uniforms=U.getUniforms(F),F.onBeforeCompile(Dt,m),bn=U.acquireProgram(Dt,ot),le.program=bn,le.uniforms=Dt.uniforms,le.outputEncoding=Dt.outputEncoding);var Ve=le.uniforms;(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(le.numClippingPlanes=He.numPlanes,le.numIntersection=He.numIntersection,Ve.clippingPlanes=He.uniform),le.environment=F.isMeshStandardMaterial?ae.environment:null,le.fog=ae.fog,le.envMap=Kt.get(F.envMap||le.environment),le.needsLights=zh(F),le.lightsStateVersion=ht,le.needsLights&&(Ve.ambientLightColor.value=Ee.state.ambient,Ve.lightProbe.value=Ee.state.probe,Ve.directionalLights.value=Ee.state.directional,Ve.directionalLightShadows.value=Ee.state.directionalShadow,Ve.spotLights.value=Ee.state.spot,Ve.spotLightShadows.value=Ee.state.spotShadow,Ve.rectAreaLights.value=Ee.state.rectArea,Ve.ltc_1.value=Ee.state.rectAreaLTC1,Ve.ltc_2.value=Ee.state.rectAreaLTC2,Ve.pointLights.value=Ee.state.point,Ve.pointLightShadows.value=Ee.state.pointShadow,Ve.hemisphereLights.value=Ee.state.hemi,Ve.directionalShadowMap.value=Ee.state.directionalShadowMap,Ve.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,Ve.spotShadowMap.value=Ee.state.spotShadowMap,Ve.spotShadowMatrix.value=Ee.state.spotShadowMatrix,Ve.pointShadowMap.value=Ee.state.pointShadowMap,Ve.pointShadowMatrix.value=Ee.state.pointShadowMatrix);var zn=le.program.getUniforms(),Gn=Jo.seqWithValue(zn.seq,Ve);le.uniformsList=Gn}function Pc(F,ae,ee,le){ae.isScene!==!0&&(ae=Me),At.resetTextureUnits();var Ee=ae.fog,St=ee.isMeshStandardMaterial?ae.environment:null,ht=y===null?m.outputEncoding:y.texture.encoding,Dt=Kt.get(ee.envMap||St),ot=st.get(ee),bn=v.state.lights;if(oe===!0&&(he===!0||F!==L)){var hn=F===L&&ee.id===P;He.setState(ee,F,hn)}ee.version===ot.__version?(ee.fog&&ot.fog!==Ee||ot.environment!==St||ot.needsLights&&ot.lightsStateVersion!==bn.state.version||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==He.numPlanes||ot.numIntersection!==He.numIntersection)||ot.outputEncoding!==ht||ot.envMap!==Dt)&&Jr(ee,ae,le):(Jr(ee,ae,le),ot.__version=ee.version);var En=!1,Ve=!1,zn=!1,Gn=ot.program,Rt=Gn.getUniforms(),Pn=ot.uniforms;if(rt.useProgram(Gn.program)&&(En=!0,Ve=!0,zn=!0),ee.id!==P&&(P=ee.id,Ve=!0),En||L!==F){if(Rt.setValue($,"projectionMatrix",F.projectionMatrix),fe.logarithmicDepthBuffer&&Rt.setValue($,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),L!==F&&(L=F,Ve=!0,zn=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){var Et=Rt.map.cameraPosition;Et!==void 0&&Et.setValue($,de.setFromMatrixPosition(F.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&Rt.setValue($,"isOrthographic",F.isOrthographicCamera===!0),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||ee.skinning)&&Rt.setValue($,"viewMatrix",F.matrixWorldInverse)}if(ee.skinning){Rt.setOptional($,le,"bindMatrix"),Rt.setOptional($,le,"bindMatrixInverse");var ut=le.skeleton;if(ut){var Pt=ut.bones;if(fe.floatVertexTextures){if(ut.boneTexture===null){var gt=Math.sqrt(Pt.length*4);gt=Ke.ceilPowerOfTwo(gt),gt=Math.max(gt,4);var wt=new Float32Array(gt*gt*4);wt.set(ut.boneMatrices);var on=new qn(wt,gt,gt,Wt,xr);ut.boneMatrices=wt,ut.boneTexture=on,ut.boneTextureSize=gt}Rt.setValue($,"boneTexture",ut.boneTexture,At),Rt.setValue($,"boneTextureSize",ut.boneTextureSize)}else Rt.setOptional($,ut,"boneMatrices")}}return(Ve||ot.receiveShadow!==le.receiveShadow)&&(ot.receiveShadow=le.receiveShadow,Rt.setValue($,"receiveShadow",le.receiveShadow)),Ve&&(Rt.setValue($,"toneMappingExposure",m.toneMappingExposure),ot.needsLights&&Oc(Pn,zn),Ee&&ee.fog&&G.refreshFogUniforms(Pn,Ee),G.refreshMaterialUniforms(Pn,ee,D,z),Jo.upload($,ot.uniformsList,Pn,At)),ee.isShaderMaterial&&ee.uniformsNeedUpdate===!0&&(Jo.upload($,ot.uniformsList,Pn,At),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&Rt.setValue($,"center",le.center),Rt.setValue($,"modelViewMatrix",le.modelViewMatrix),Rt.setValue($,"normalMatrix",le.normalMatrix),Rt.setValue($,"modelMatrix",le.matrixWorld),Gn}function Oc(F,ae){F.ambientLightColor.needsUpdate=ae,F.lightProbe.needsUpdate=ae,F.directionalLights.needsUpdate=ae,F.directionalLightShadows.needsUpdate=ae,F.pointLights.needsUpdate=ae,F.pointLightShadows.needsUpdate=ae,F.spotLights.needsUpdate=ae,F.spotLightShadows.needsUpdate=ae,F.rectAreaLights.needsUpdate=ae,F.hemisphereLights.needsUpdate=ae}function zh(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.setFramebuffer=function(F){M!==F&&y===null&&$.bindFramebuffer(36160,F),M=F},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return S},this.getRenderList=function(){return p},this.setRenderList=function(F){p=F},this.getRenderState=function(){return v},this.setRenderState=function(F){v=F},this.getRenderTarget=function(){return y},this.setRenderTarget=function(F){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;y=F,A=ae,S=ee,F&&st.get(F).__webglFramebuffer===void 0&&At.setupRenderTarget(F);var le=M,Ee=!1;if(F){var St=st.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(le=St[ae],Ee=!0):F.isWebGLMultisampleRenderTarget?le=st.get(F).__webglMultisampledFramebuffer:le=St,R.copy(F.viewport),N.copy(F.scissor),V=F.scissorTest}else R.copy(_).multiplyScalar(D).floor(),N.copy(W).multiplyScalar(D).floor(),V=Q;if(O!==le&&($.bindFramebuffer(36160,le),O=le),rt.viewport(R),rt.scissor(N),rt.setScissorTest(V),Ee){var ht=st.get(F.texture);$.framebufferTexture2D(36160,36064,34069+ae,ht.__webglTexture,ee)}},this.readRenderTargetPixels=function(F,ae,ee,le,Ee,St,ht){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Dt=st.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&ht!==void 0&&(Dt=Dt[ht]),Dt){var ot=!1;Dt!==O&&($.bindFramebuffer(36160,Dt),ot=!0);try{var bn=F.texture,hn=bn.format,En=bn.type;if(hn!==Wt&&ce.convert(hn)!==$.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(En!==Mo&&ce.convert(En)!==$.getParameter(35738)&&!(En===xr&&(fe.isWebGL2||Ae.get("OES_texture_float")||Ae.get("WEBGL_color_buffer_float")))&&!(En===za&&(fe.isWebGL2?Ae.get("EXT_color_buffer_float"):Ae.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$.checkFramebufferStatus(36160)===36053?ae>=0&&ae<=F.width-le&&ee>=0&&ee<=F.height-Ee&&$.readPixels(ae,ee,le,Ee,ce.convert(hn),ce.convert(En),St):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ot&&$.bindFramebuffer(36160,O)}}},this.copyFramebufferToTexture=function(F,ae){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,le=Math.pow(2,-ee),Ee=Math.floor(ae.image.width*le),St=Math.floor(ae.image.height*le),ht=ce.convert(ae.format);At.setTexture2D(ae,0),$.copyTexImage2D(3553,ee,ht,F.x,F.y,Ee,St,0),rt.unbindTexture()},this.copyTextureToTexture=function(F,ae,ee){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Ee=ae.image.width,St=ae.image.height,ht=ce.convert(ee.format),Dt=ce.convert(ee.type);At.setTexture2D(ee,0),$.pixelStorei(37440,ee.flipY),$.pixelStorei(37441,ee.premultiplyAlpha),$.pixelStorei(3317,ee.unpackAlignment),ae.isDataTexture?$.texSubImage2D(3553,le,F.x,F.y,Ee,St,ht,Dt,ae.image.data):ae.isCompressedTexture?$.compressedTexSubImage2D(3553,le,F.x,F.y,ae.mipmaps[0].width,ae.mipmaps[0].height,ht,ae.mipmaps[0].data):$.texSubImage2D(3553,le,F.x,F.y,ht,Dt,ae.image),le===0&&ee.generateMipmaps&&$.generateMipmap(3553),rt.unbindTexture()},this.initTexture=function(F){At.setTexture2D(F,0),rt.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Rf(r){Ju.call(this,r)}Rf.prototype=Object.assign(Object.create(Ju.prototype),{constructor:Rf,isWebGL1Renderer:!0});var Yp=function(){function r(t,e){Object(pe.a)(this,r),Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Pe(t),this.density=e!==void 0?e:25e-5}return Object(Ge.a)(r,[{key:"clone",value:function(){return new r(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),r}(),Jp=function(){function r(t,e,n){Object(pe.a)(this,r),Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Pe(t),this.near=e!==void 0?e:1,this.far=n!==void 0?n:1e3}return Object(Ge.a)(r,[{key:"clone",value:function(){return new r(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),r}(),Pf=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n;return Object(pe.a)(this,e),n=t.call(this),Object.defineProperty(Object(dn.a)(n),"isScene",{value:!0}),n.type="Scene",n.background=null,n.environment=null,n.fog=null,n.overrideMaterial=null,n.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Object(dn.a)(n)})),n}return Object(Ge.a)(e,[{key:"copy",value:function(i,a){return Lt(Object(Wn.a)(e.prototype),"copy",this).call(this,i,a),i.background!==null&&(this.background=i.background.clone()),i.environment!==null&&(this.environment=i.environment.clone()),i.fog!==null&&(this.fog=i.fog.clone()),i.overrideMaterial!==null&&(this.overrideMaterial=i.overrideMaterial.clone()),this.autoUpdate=i.autoUpdate,this.matrixAutoUpdate=i.matrixAutoUpdate,this}},{key:"toJSON",value:function(i){var a=Lt(Object(Wn.a)(e.prototype),"toJSON",this).call(this,i);return this.background!==null&&(a.object.background=this.background.toJSON(i)),this.environment!==null&&(a.object.environment=this.environment.toJSON(i)),this.fog!==null&&(a.object.fog=this.fog.toJSON()),a}}]),e}(Fe);function Wr(r,t){this.array=r,this.stride=t,this.count=r!==void 0?r.length/t:0,this.usage=Xn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ke.generateUUID()}Object.defineProperty(Wr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(Wr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,a=this.stride;i<a;i++)this.array[t+i]=e.array[n+i];return this},set:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.array.set(t,e),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ke.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new Wr(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ke.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var _s=new I;function $o(r,t,e,n){this.name="",this.data=r,this.itemSize=t,this.offset=e,this.normalized=n===!0}Object.defineProperties($o.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign($o.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)_s.x=this.getX(e),_s.y=this.getY(e),_s.z=this.getZ(e),_s.applyMatrix4(t),this.setXYZ(e,_s.x,_s.y,_s.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,a){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=a,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)e.push(this.data.array[i+a]);return new We(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new $o(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)e.push(this.data.array[i+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function qo(r){Qe.call(this),this.type="SpriteMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(r)}qo.prototype=Object.create(Qe.prototype),qo.prototype.constructor=qo,qo.prototype.isSpriteMaterial=!0,qo.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.rotation=r.rotation,this.sizeAttenuation=r.sizeAttenuation,this};var Zu,nc=new I,Qu=new I,Ku=new I,$u=new se,rc=new se,Zp=new ct,Of=new I,ic=new I,If=new I,Qp=new se,sd=new se,Kp=new se;function ac(r){if(Fe.call(this),this.type="Sprite",Zu===void 0){Zu=new Ne;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Wr(t,5);Zu.setIndex([0,1,2,0,2,3]),Zu.setAttribute("position",new $o(e,3,0,!1)),Zu.setAttribute("uv",new $o(e,2,3,!1))}this.geometry=Zu,this.material=r!==void 0?r:new qo,this.center=new se(.5,.5)}ac.prototype=Object.assign(Object.create(Fe.prototype),{constructor:ac,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qu.setFromMatrixScale(this.matrixWorld),Zp.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ku.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Qu.multiplyScalar(-Ku.z);var n=this.material.rotation,i,a;n!==0&&(a=Math.cos(n),i=Math.sin(n));var o=this.center;Bf(Of.set(-.5,-.5,0),Ku,o,Qu,i,a),Bf(ic.set(.5,-.5,0),Ku,o,Qu,i,a),Bf(If.set(.5,.5,0),Ku,o,Qu,i,a),Qp.set(0,0),sd.set(1,0),Kp.set(1,1);var l=t.ray.intersectTriangle(Of,ic,If,!1,nc);if(!(l===null&&(Bf(ic.set(-.5,.5,0),Ku,o,Qu,i,a),sd.set(0,1),l=t.ray.intersectTriangle(Of,If,ic,!1,nc),l===null))){var c=t.ray.origin.distanceTo(nc);c<t.near||c>t.far||e.push({distance:c,point:nc.clone(),uv:br.getUV(nc,Of,ic,If,Qp,sd,Kp,new se),face:null,object:this})}},copy:function(t){return Fe.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function Bf(r,t,e,n,i,a){$u.subVectors(r,e).addScalar(.5).multiply(n),i!==void 0?(rc.x=a*$u.x-i*$u.y,rc.y=i*$u.x+a*$u.y):rc.copy($u),r.copy(t),r.x+=rc.x,r.y+=rc.y,r.applyMatrix4(Zp)}var Df=new I,$p=new I;function oc(){Fe.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}oc.prototype=Object.assign(Object.create(Fe.prototype),{constructor:oc,isLOD:!0,copy:function(t){Fe.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var a=e[n];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;e=Math.abs(e);var n=this.levels,i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){var n=this.levels;if(n.length>0){Df.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(Df);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Df.setFromMatrixPosition(t.matrixWorld),$p.setFromMatrixPosition(this.matrixWorld);var n=Df.distanceTo($p)/t.zoom;e[0].object.visible=!0;var i,a;for(i=1,a=e.length;i<a&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<a;i++)e[i].object.visible=!1}},toJSON:function(t){var e=Fe.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,a=n.length;i<a;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}});function sc(r,t){r&&r.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),It.call(this,r,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ct,this.bindMatrixInverse=new ct}sc.prototype=Object.assign(Object.create(It.prototype),{constructor:sc,isSkinnedMesh:!0,copy:function(t){return It.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new it,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var a=1/t.manhattanLength();a!==Infinity?t.multiplyScalar(a):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){It.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var r=new I,t=new it,e=new it,n=new I,i=new ct;return function(a,o){var l=this.skeleton,c=this.geometry;t.fromBufferAttribute(c.attributes.skinIndex,a),e.fromBufferAttribute(c.attributes.skinWeight,a),r.fromBufferAttribute(c.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var h=0;h<4;h++){var d=e.getComponent(h);if(d!==0){var p=t.getComponent(h);i.multiplyMatrices(l.bones[p].matrixWorld,l.boneInverses[p]),o.addScaledVector(n.copy(r).applyMatrix4(i),d)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});function uc(){Fe.call(this),this.type="Bone"}uc.prototype=Object.assign(Object.create(Fe.prototype),{constructor:uc,isBone:!0});var qp=new ct,f0=new ct;function lc(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.uuid=Ke.generateUUID(),this.bones=r.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(lc.prototype,{init:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new ct)}},calculateInverses:function(){this.boneInverses.length=0;for(var t=0,e=this.bones.length;t<e;t++){var n=new ct;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,a=this.bones.length;i<a;i++){var o=this.bones[i];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,a=0,o=t.length;a<o;a++){var l=t[a]?t[a].matrixWorld:f0;qp.multiplyMatrices(l,e[a]),qp.toArray(n,a*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new lc(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var a=t.bones[n],o=e[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new uc),this.bones.push(o),this.boneInverses.push(new ct().fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,a=e.length;i<a;i++){var o=e[i];t.bones.push(o.uuid);var l=n[i];t.boneInverses.push(l.toArray())}return t}});var ev=new ct,tv=new ct,Ff=[],cc=new It;function Nf(r,t,e){It.call(this,r,t),this.instanceMatrix=new We(new Float32Array(e*16),16),this.instanceColor=null,this.count=e,this.frustumCulled=!1}Nf.prototype=Object.assign(Object.create(It.prototype),{constructor:Nf,isInstancedMesh:!0,copy:function(t){return It.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(cc.geometry=this.geometry,cc.material=this.material,cc.material!==void 0)for(var a=0;a<i;a++){this.getMatrixAt(a,ev),tv.multiplyMatrices(n,ev),cc.matrixWorld=tv,cc.raycast(t,Ff);for(var o=0,l=Ff.length;o<l;o++){var c=Ff[o];c.instanceId=a,c.object=this,e.push(c)}Ff.length=0}},setColorAt:function(t,e){this.instanceColor===null&&(this.instanceColor=new We(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,t*3)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){}});function fn(r){Qe.call(this),this.type="LineBasicMaterial",this.color=new Pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(r)}fn.prototype=Object.create(Qe.prototype),fn.prototype.constructor=fn,fn.prototype.isLineBasicMaterial=!0,fn.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this.morphTargets=r.morphTargets,this};var nv=new I,rv=new I,iv=new ct,zf=new Bo,Gf=new ci;function Mi(r,t,e){e===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Fe.call(this),this.type="Line",this.geometry=r!==void 0?r:new Ne,this.material=t!==void 0?t:new fn,this.updateMorphTargets()}Mi.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Mi,isLine:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,n=[0],i=1,a=e.count;i<a;i++)nv.fromBufferAttribute(e,i-1),rv.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=nv.distanceTo(rv);t.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices,l=t.lineDistances;l[0]=0;for(var c=1,h=o.length;c<h;c++)l[c]=l[c-1],l[c]+=o[c-1].distanceTo(o[c])}return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,a=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Gf.copy(n.boundingSphere),Gf.applyMatrix4(i),Gf.radius+=a,t.ray.intersectsSphere(Gf)!==!1){iv.copy(i).invert(),zf.copy(t.ray).applyMatrix4(iv);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new I,h=new I,d=new I,p=new I,v=this.isLineSegments?2:1;if(n.isBufferGeometry){var m=n.index,x=n.attributes,M=x.position;if(m!==null)for(var A=m.array,S=0,y=A.length-1;S<y;S+=v){var O=A[S],P=A[S+1];c.fromBufferAttribute(M,O),h.fromBufferAttribute(M,P);var L=zf.distanceSqToSegment(c,h,p,d);if(!(L>l)){p.applyMatrix4(this.matrixWorld);var C=t.ray.origin.distanceTo(p);C<t.near||C>t.far||e.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else for(var R=0,N=M.count-1;R<N;R+=v){c.fromBufferAttribute(M,R),h.fromBufferAttribute(M,R+1);var V=zf.distanceSqToSegment(c,h,p,d);if(!(V>l)){p.applyMatrix4(this.matrixWorld);var X=t.ray.origin.distanceTo(p);X<t.near||X>t.far||e.push({distance:X,point:d.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var z=n.vertices,D=z.length,H=0;H<D-1;H+=v){var j=zf.distanceSqToSegment(z[H],z[H+1],p,d);if(!(j>l)){p.applyMatrix4(this.matrixWorld);var _=t.ray.origin.distanceTo(p);_<t.near||_>t.far||e.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++){var l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{var c=t.morphTargets;c!==void 0&&c.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Uf=new I,Hf=new I;function fr(r,t){Mi.call(this,r,t),this.type="LineSegments"}fr.prototype=Object.assign(Object.create(Mi.prototype),{constructor:fr,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,n=[],i=0,a=e.count;i<a;i+=2)Uf.fromBufferAttribute(e,i),Hf.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Uf.distanceTo(Hf);t.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(var o=t.vertices,l=t.lineDistances,c=0,h=o.length;c<h;c+=2)Uf.copy(o[c]),Hf.copy(o[c+1]),l[c]=c===0?0:l[c-1],l[c+1]=l[c]+Uf.distanceTo(Hf);return this}});function kf(r,t){Mi.call(this,r,t),this.type="LineLoop"}kf.prototype=Object.assign(Object.create(Mi.prototype),{constructor:kf,isLineLoop:!0});function ji(r){Qe.call(this),this.type="PointsMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(r)}ji.prototype=Object.create(Qe.prototype),ji.prototype.constructor=ji,ji.prototype.isPointsMaterial=!0,ji.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this.morphTargets=r.morphTargets,this};var av=new ct,ud=new Bo,Vf=new ci,_f=new I;function qu(r,t){Fe.call(this),this.type="Points",this.geometry=r!==void 0?r:new Ne,this.material=t!==void 0?t:new ji,this.updateMorphTargets()}qu.prototype=Object.assign(Object.create(Fe.prototype),{constructor:qu,isPoints:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,a=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Vf.copy(n.boundingSphere),Vf.applyMatrix4(i),Vf.radius+=a,t.ray.intersectsSphere(Vf)!==!1){av.copy(i).invert(),ud.copy(t.ray).applyMatrix4(av);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o;if(n.isBufferGeometry){var c=n.index,h=n.attributes,d=h.position;if(c!==null)for(var p=c.array,v=0,m=p.length;v<m;v++){var x=p[v];_f.fromBufferAttribute(d,x),ld(_f,x,l,i,t,e,this)}else for(var M=0,A=d.count;M<A;M++)_f.fromBufferAttribute(d,M),ld(_f,M,l,i,t,e,this)}else for(var S=n.vertices,y=0,O=S.length;y<O;y++)ld(S[y],y,l,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++){var l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{var c=t.morphTargets;c!==void 0&&c.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function ld(r,t,e,n,i,a,o){var l=ud.distanceSqToPoint(r);if(l<e){var c=new I;ud.closestPointToPoint(r,c),c.applyMatrix4(n);var h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;a.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:t,face:null,object:o})}}function cd(r,t,e,n,i,a,o,l,c){$e.call(this,r,t,e,n,i,a,o,l,c),this.format=o!==void 0?o:qt,this.minFilter=a!==void 0?a:Tn,this.magFilter=i!==void 0?i:Tn,this.generateMipmaps=!1;var h=this;function d(){h.needsUpdate=!0,r.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in r&&r.requestVideoFrameCallback(d)}cd.prototype=Object.assign(Object.create($e.prototype),{constructor:cd,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){var t=this.image,e="requestVideoFrameCallback"in t;e===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function el(r,t,e,n,i,a,o,l,c,h,d,p){$e.call(this,null,a,o,l,c,h,n,i,d,p),this.image={width:t,height:e},this.mipmaps=r,this.flipY=!1,this.generateMipmaps=!1}el.prototype=Object.create($e.prototype),el.prototype.constructor=el,el.prototype.isCompressedTexture=!0;function fc(r,t,e,n,i,a,o,l,c){$e.call(this,r,t,e,n,i,a,o,l,c),this.needsUpdate=!0}fc.prototype=Object.create($e.prototype),fc.prototype.constructor=fc,fc.prototype.isCanvasTexture=!0;function hc(r,t,e,n,i,a,o,l,c,h){if(h=h!==void 0?h:qr,h!==qr&&h!==Ha)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");e===void 0&&h===qr&&(e=Fa),e===void 0&&h===Ha&&(e=Gt),$e.call(this,null,n,i,a,o,l,h,e,c),this.image={width:r,height:t},this.magFilter=o!==void 0?o:gn,this.minFilter=l!==void 0?l:gn,this.flipY=!1,this.generateMipmaps=!1}hc.prototype=Object.create($e.prototype),hc.prototype.constructor=hc,hc.prototype.isDepthTexture=!0;var h0=0,ba=new ct,fd=new Fe,Wf=new I;function Xt(){Object.defineProperty(this,"id",{value:h0+=2}),this.uuid=Ke.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Xt.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Xt,isGeometry:!0,applyMatrix4:function(t){for(var e=new In().getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){var a=this.vertices[n];a.applyMatrix4(t)}for(var o=0,l=this.faces.length;o<l;o++){var c=this.faces[o];c.normal.applyMatrix3(e).normalize();for(var h=0,d=c.vertexNormals.length;h<d;h++)c.vertexNormals[h].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return ba.makeRotationX(t),this.applyMatrix4(ba),this},rotateY:function(t){return ba.makeRotationY(t),this.applyMatrix4(ba),this},rotateZ:function(t){return ba.makeRotationZ(t),this.applyMatrix4(ba),this},translate:function(t,e,n){return ba.makeTranslation(t,e,n),this.applyMatrix4(ba),this},scale:function(t,e,n){return ba.makeScale(t,e,n),this.applyMatrix4(ba),this},lookAt:function(t){return fd.lookAt(t),fd.updateMatrix(),this.applyMatrix4(fd.matrix),this},fromBufferGeometry:function(t){var e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var a=i.position,o=i.normal,l=i.color,c=i.uv,h=i.uv2;h!==void 0&&(this.faceVertexUvs[1]=[]);for(var d=0;d<a.count;d++)e.vertices.push(new I().fromBufferAttribute(a,d)),l!==void 0&&e.colors.push(new Pe().fromBufferAttribute(l,d));function p(L,C,R,N){var V=l===void 0?[]:[e.colors[L].clone(),e.colors[C].clone(),e.colors[R].clone()],X=o===void 0?[]:[new I().fromBufferAttribute(o,L),new I().fromBufferAttribute(o,C),new I().fromBufferAttribute(o,R)],z=new qa(L,C,R,X,V,N);e.faces.push(z),c!==void 0&&e.faceVertexUvs[0].push([new se().fromBufferAttribute(c,L),new se().fromBufferAttribute(c,C),new se().fromBufferAttribute(c,R)]),h!==void 0&&e.faceVertexUvs[1].push([new se().fromBufferAttribute(h,L),new se().fromBufferAttribute(h,C),new se().fromBufferAttribute(h,R)])}var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var x=v[m],M=x.start,A=x.count,S=M,y=M+A;S<y;S+=3)n!==void 0?p(n.getX(S),n.getX(S+1),n.getX(S+2),x.materialIndex):p(S,S+1,S+2,x.materialIndex);else if(n!==void 0)for(var O=0;O<n.count;O+=3)p(n.getX(O),n.getX(O+1),n.getX(O+2));else for(var P=0;P<a.count;P+=3)p(P,P+1,P+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wf).negate(),this.translate(Wf.x,Wf.y,Wf.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new ct;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new I,e=new I,n=0,i=this.faces.length;n<i;n++){var a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c];t.subVectors(c,l),e.subVectors(o,l),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)e[n]=new I;if(t)for(var a=new I,o=new I,l=0,c=this.faces.length;l<c;l++){var h=this.faces[l],d=this.vertices[h.a],p=this.vertices[h.b],v=this.vertices[h.c];a.subVectors(v,p),o.subVectors(d,p),a.cross(o),e[h.a].add(a),e[h.b].add(a),e[h.c].add(a)}else{this.computeFaceNormals();for(var m=0,x=this.faces.length;m<x;m++){var M=this.faces[m];e[M.a].add(M.normal),e[M.b].add(M.normal),e[M.c].add(M.normal)}}for(var A=0,S=this.vertices.length;A<S;A++)e[A].normalize();for(var y=0,O=this.faces.length;y<O;y++){var P=this.faces[y],L=P.vertexNormals;L.length===3?(L[0].copy(e[P.a]),L[1].copy(e[P.b]),L[2].copy(e[P.c])):(L[0]=e[P.a].clone(),L[1]=e[P.b].clone(),L[2]=e[P.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,a=n.vertexNormals.length;i<a;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var o=new Xt;o.faces=this.faces;for(var l=0,c=this.morphTargets.length;l<c;l++){if(!this.morphNormals[l]){this.morphNormals[l]={},this.morphNormals[l].faceNormals=[],this.morphNormals[l].vertexNormals=[];for(var h=this.morphNormals[l].faceNormals,d=this.morphNormals[l].vertexNormals,p=0,v=this.faces.length;p<v;p++){var m=new I,x={a:new I,b:new I,c:new I};h.push(m),d.push(x)}}var M=this.morphNormals[l];o.vertices=this.morphTargets[l].vertices,o.computeFaceNormals(),o.computeVertexNormals();for(var A=0,S=this.faces.length;A<S;A++){var y=this.faces[A],O=M.faceNormals[A],P=M.vertexNormals[A];O.copy(y.normal),P.a.copy(y.vertexNormals[0]),P.b.copy(y.vertexNormals[1]),P.c.copy(y.vertexNormals[2])}}for(var L=0,C=this.faces.length;L<C;L++){var R=this.faces[L];R.normal=R.__originalFaceNormal,R.vertexNormals=R.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Fn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ci),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}var i,a=this.vertices.length,o=this.vertices,l=t.vertices,c=this.faces,h=t.faces,d=this.colors,p=t.colors;e!==void 0&&(i=new In().getNormalMatrix(e));for(var v=0,m=l.length;v<m;v++){var x=l[v],M=x.clone();e!==void 0&&M.applyMatrix4(e),o.push(M)}for(var A=0,S=p.length;A<S;A++)d.push(p[A].clone());for(var y=0,O=h.length;y<O;y++){var P=h[y],L=void 0,C=void 0,R=P.vertexNormals,N=P.vertexColors,V=new qa(P.a+a,P.b+a,P.c+a);V.normal.copy(P.normal),i!==void 0&&V.normal.applyMatrix3(i).normalize();for(var X=0,z=R.length;X<z;X++)L=R[X].clone(),i!==void 0&&L.applyMatrix3(i).normalize(),V.vertexNormals.push(L);V.color.copy(P.color);for(var D=0,H=N.length;D<H;D++)C=N[D],V.vertexColors.push(C.clone());V.materialIndex=P.materialIndex+n,c.push(V)}for(var j=0,_=t.faceVertexUvs.length;j<_;j++){var W=t.faceVertexUvs[j];this.faceVertexUvs[j]===void 0&&(this.faceVertexUvs[j]=[]);for(var Q=0,te=W.length;Q<te;Q++){for(var oe=W[Q],he=[],re=0,de=oe.length;re<de;re++)he.push(oe[re].clone());this.faceVertexUvs[j].push(he)}}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:4,e={},n=[],i=[],a=Math.pow(10,t),o=0,l=this.vertices.length;o<l;o++){var c=this.vertices[o],h=Math.round(c.x*a)+"_"+Math.round(c.y*a)+"_"+Math.round(c.z*a);e[h]===void 0?(e[h]=o,n.push(this.vertices[o]),i[o]=n.length-1):i[o]=i[e[h]]}for(var d=[],p=0,v=this.faces.length;p<v;p++){var m=this.faces[p];m.a=i[m.a],m.b=i[m.b],m.c=i[m.c];for(var x=[m.a,m.b,m.c],M=0;M<3;M++)if(x[M]===x[(M+1)%3]){d.push(p);break}}for(var A=d.length-1;A>=0;A--){var S=d[A];this.faces.splice(S,1);for(var y=0,O=this.faceVertexUvs.length;y<O;y++)this.faceVertexUvs[y].splice(S,1)}var P=this.vertices.length-n.length;return this.vertices=n,P},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new I(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function i(p,v){return p.materialIndex-v.materialIndex}t.sort(i);var a=this.faceVertexUvs[0],o=this.faceVertexUvs[1],l,c;a&&a.length===e&&(l=[]),o&&o.length===e&&(c=[]);for(var h=0;h<e;h++){var d=t[h]._id;l&&l.push(a[d]),c&&c.push(o[d])}l&&(this.faceVertexUvs[0]=l),c&&(this.faceVertexUvs[1]=c)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){var e=this.parameters;for(var n in e)e[n]!==void 0&&(t[n]=e[n]);return t}for(var i=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];i.push(o.x,o.y,o.z)}for(var l=[],c=[],h={},d=[],p={},v=[],m={},x=0;x<this.faces.length;x++){var M=this.faces[x],A=!0,S=!1,y=this.faceVertexUvs[0][x]!==void 0,O=M.normal.length()>0,P=M.vertexNormals.length>0,L=M.color.r!==1||M.color.g!==1||M.color.b!==1,C=M.vertexColors.length>0,R=0;if(R=z(R,0,0),R=z(R,1,A),R=z(R,2,S),R=z(R,3,y),R=z(R,4,O),R=z(R,5,P),R=z(R,6,L),R=z(R,7,C),l.push(R),l.push(M.a,M.b,M.c),l.push(M.materialIndex),y){var N=this.faceVertexUvs[0][x];l.push(j(N[0]),j(N[1]),j(N[2]))}if(O&&l.push(D(M.normal)),P){var V=M.vertexNormals;l.push(D(V[0]),D(V[1]),D(V[2]))}if(L&&l.push(H(M.color)),C){var X=M.vertexColors;l.push(H(X[0]),H(X[1]),H(X[2]))}}function z(_,W,Q){return Q?_|1<<W:_&~(1<<W)}function D(_){var W=_.x.toString()+_.y.toString()+_.z.toString();return h[W]!==void 0||(h[W]=c.length/3,c.push(_.x,_.y,_.z)),h[W]}function H(_){var W=_.r.toString()+_.g.toString()+_.b.toString();return p[W]!==void 0||(p[W]=d.length,d.push(_.getHex())),p[W]}function j(_){var W=_.x.toString()+_.y.toString();return m[W]!==void 0||(m[W]=v.length/2,v.push(_.x,_.y)),m[W]}return t.data={},t.data.vertices=i,t.data.normals=c,d.length>0&&(t.data.colors=d),v.length>0&&(t.data.uvs=[v]),t.data.faces=l,t},clone:function(){return new Xt().copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var a=t.colors,o=0,l=a.length;o<l;o++)this.colors.push(a[o].clone());for(var c=t.faces,h=0,d=c.length;h<d;h++)this.faces.push(c[h].clone());for(var p=0,v=t.faceVertexUvs.length;p<v;p++){var m=t.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(var x=0,M=m.length;x<M;x++){for(var A=m[x],S=[],y=0,O=A.length;y<O;y++){var P=A[y];S.push(P.clone())}this.faceVertexUvs[p].push(S)}}for(var L=t.morphTargets,C=0,R=L.length;C<R;C++){var N={};if(N.name=L[C].name,L[C].vertices!==void 0){N.vertices=[];for(var V=0,X=L[C].vertices.length;V<X;V++)N.vertices.push(L[C].vertices[V].clone())}if(L[C].normals!==void 0){N.normals=[];for(var z=0,D=L[C].normals.length;z<D;z++)N.normals.push(L[C].normals[z].clone())}this.morphTargets.push(N)}for(var H=t.morphNormals,j=0,_=H.length;j<_;j++){var W={};if(H[j].vertexNormals!==void 0){W.vertexNormals=[];for(var Q=0,te=H[j].vertexNormals.length;Q<te;Q++){var oe=H[j].vertexNormals[Q],he={};he.a=oe.a.clone(),he.b=oe.b.clone(),he.c=oe.c.clone(),W.vertexNormals.push(he)}}if(H[j].faceNormals!==void 0){W.faceNormals=[];for(var re=0,de=H[j].faceNormals.length;re<de;re++)W.faceNormals.push(H[j].faceNormals[re].clone())}this.morphNormals.push(W)}for(var Me=t.skinWeights,Xe=0,$=Me.length;Xe<$;Xe++)this.skinWeights.push(Me[Xe].clone());for(var at=t.skinIndices,qe=0,Ze=at.length;qe<Ze;qe++)this.skinIndices.push(at[qe].clone());for(var Ae=t.lineDistances,fe=0,rt=Ae.length;fe<rt;fe++)this.lineDistances.push(Ae[fe]);var yt=t.boundingBox;yt!==null&&(this.boundingBox=yt.clone());var st=t.boundingSphere;return st!==null&&(this.boundingSphere=st.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c){var h;return Object(pe.a)(this,e),h=t.call(this),h.type="BoxGeometry",h.parameters={width:n,height:i,depth:a,widthSegments:o,heightSegments:l,depthSegments:c},h.fromBufferGeometry(new lr(n,i,a,o,l,c)),h.mergeVertices(),h}return e}(Xt),dd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.PI*2;Object(pe.a)(this,e),n=t.call(this),n.type="CircleBufferGeometry",n.parameters={radius:i,segments:a,thetaStart:o,thetaLength:l},a=Math.max(3,a);var c=[],h=[],d=[],p=[],v=new I,m=new se;h.push(0,0,0),d.push(0,0,1),p.push(.5,.5);for(var x=0,M=3;x<=a;x++,M+=3){var A=o+x/a*l;v.x=i*Math.cos(A),v.y=i*Math.sin(A),h.push(v.x,v.y,v.z),d.push(0,0,1),m.x=(h[M]/i+1)/2,m.y=(h[M+1]/i+1)/2,p.push(m.x,m.y)}for(var S=1;S<=a;S++)c.push(S,S+1,0);return n.setIndex(c),n.setAttribute("position",new Se(h,3)),n.setAttribute("normal",new Se(d,3)),n.setAttribute("uv",new Se(p,2)),n}return e}(Ne),ov=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o){var l;return Object(pe.a)(this,e),l=t.call(this),l.type="CircleGeometry",l.parameters={radius:n,segments:i,thetaStart:a,thetaLength:o},l.fromBufferGeometry(new dd(n,i,a,o)),l.mergeVertices(),l}return e}(Xt),dc=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:8,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,p=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Math.PI*2;Object(pe.a)(this,e),n=t.call(this),n.type="CylinderBufferGeometry",n.parameters={radiusTop:i,radiusBottom:a,height:o,radialSegments:l,heightSegments:c,openEnded:h,thetaStart:d,thetaLength:p};var v=Object(dn.a)(n);l=Math.floor(l),c=Math.floor(c);var m=[],x=[],M=[],A=[],S=0,y=[],O=o/2,P=0;L(),h===!1&&(i>0&&C(!0),a>0&&C(!1)),n.setIndex(m),n.setAttribute("position",new Se(x,3)),n.setAttribute("normal",new Se(M,3)),n.setAttribute("uv",new Se(A,2));function L(){for(var R=new I,N=new I,V=0,X=(a-i)/o,z=0;z<=c;z++){for(var D=[],H=z/c,j=H*(a-i)+i,_=0;_<=l;_++){var W=_/l,Q=W*p+d,te=Math.sin(Q),oe=Math.cos(Q);N.x=j*te,N.y=-H*o+O,N.z=j*oe,x.push(N.x,N.y,N.z),R.set(te,X,oe).normalize(),M.push(R.x,R.y,R.z),A.push(W,1-H),D.push(S++)}y.push(D)}for(var he=0;he<l;he++)for(var re=0;re<c;re++){var de=y[re][he],Me=y[re+1][he],Xe=y[re+1][he+1],$=y[re][he+1];m.push(de,Me,$),m.push(Me,Xe,$),V+=6}v.addGroup(P,V,0),P+=V}function C(R){for(var N=S,V=new se,X=new I,z=0,D=R===!0?i:a,H=R===!0?1:-1,j=1;j<=l;j++)x.push(0,O*H,0),M.push(0,H,0),A.push(.5,.5),S++;for(var _=S,W=0;W<=l;W++){var Q=W/l,te=Q*p+d,oe=Math.cos(te),he=Math.sin(te);X.x=D*he,X.y=O*H,X.z=D*oe,x.push(X.x,X.y,X.z),M.push(0,H,0),V.x=oe*.5+.5,V.y=he*.5*H+.5,A.push(V.x,V.y),S++}for(var re=0;re<l;re++){var de=N+re,Me=_+re;R===!0?m.push(Me,Me+1,de):m.push(Me+1,Me,de),z+=3}v.addGroup(P,z,R===!0?1:2),P+=z}return n}return e}(Ne),pd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c,h,d){var p;return Object(pe.a)(this,e),p=t.call(this),p.type="CylinderGeometry",p.parameters={radiusTop:n,radiusBottom:i,height:a,radialSegments:o,heightSegments:l,openEnded:c,thetaStart:h,thetaLength:d},p.fromBufferGeometry(new dc(n,i,a,o,l,c,h,d)),p.mergeVertices(),p}return e}(Xt),sv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c,h){var d;return Object(pe.a)(this,e),d=t.call(this,0,n,i,a,o,l,c,h),d.type="ConeGeometry",d.parameters={radius:n,height:i,radialSegments:a,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:h},d}return e}(pd),uv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Math.PI*2;return Object(pe.a)(this,e),n=t.call(this,0,i,a,o,l,c,h,d),n.type="ConeBufferGeometry",n.parameters={radius:i,height:a,radialSegments:o,heightSegments:l,openEnded:c,thetaStart:h,thetaLength:d},n}return e}(dc),Ws=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;Object(pe.a)(this,e),a=t.call(this),a.type="PolyhedronBufferGeometry",a.parameters={vertices:n,indices:i,radius:o,detail:l};var c=[],h=[];d(l),v(o),m(),a.setAttribute("position",new Se(c,3)),a.setAttribute("normal",new Se(c.slice(),3)),a.setAttribute("uv",new Se(h,2)),l===0?a.computeVertexNormals():a.normalizeNormals();function d(L){for(var C=new I,R=new I,N=new I,V=0;V<i.length;V+=3)A(i[V+0],C),A(i[V+1],R),A(i[V+2],N),p(C,R,N,L)}function p(L,C,R,N){for(var V=N+1,X=[],z=0;z<=V;z++){X[z]=[];for(var D=L.clone().lerp(R,z/V),H=C.clone().lerp(R,z/V),j=V-z,_=0;_<=j;_++)_===0&&z===V?X[z][_]=D:X[z][_]=D.clone().lerp(H,_/j)}for(var W=0;W<V;W++)for(var Q=0;Q<2*(V-W)-1;Q++){var te=Math.floor(Q/2);Q%2==0?(M(X[W][te+1]),M(X[W+1][te]),M(X[W][te])):(M(X[W][te+1]),M(X[W+1][te+1]),M(X[W+1][te]))}}function v(L){for(var C=new I,R=0;R<c.length;R+=3)C.x=c[R+0],C.y=c[R+1],C.z=c[R+2],C.normalize().multiplyScalar(L),c[R+0]=C.x,c[R+1]=C.y,c[R+2]=C.z}function m(){for(var L=new I,C=0;C<c.length;C+=3){L.x=c[C+0],L.y=c[C+1],L.z=c[C+2];var R=O(L)/2/Math.PI+.5,N=P(L)/Math.PI+.5;h.push(R,1-N)}S(),x()}function x(){for(var L=0;L<h.length;L+=6){var C=h[L+0],R=h[L+2],N=h[L+4],V=Math.max(C,R,N),X=Math.min(C,R,N);V>.9&&X<.1&&(C<.2&&(h[L+0]+=1),R<.2&&(h[L+2]+=1),N<.2&&(h[L+4]+=1))}}function M(L){c.push(L.x,L.y,L.z)}function A(L,C){var R=L*3;C.x=n[R+0],C.y=n[R+1],C.z=n[R+2]}function S(){for(var L=new I,C=new I,R=new I,N=new I,V=new se,X=new se,z=new se,D=0,H=0;D<c.length;D+=9,H+=6){L.set(c[D+0],c[D+1],c[D+2]),C.set(c[D+3],c[D+4],c[D+5]),R.set(c[D+6],c[D+7],c[D+8]),V.set(h[H+0],h[H+1]),X.set(h[H+2],h[H+3]),z.set(h[H+4],h[H+5]),N.copy(L).add(C).add(R).divideScalar(3);var j=O(N);y(V,H+0,L,j),y(X,H+2,C,j),y(z,H+4,R,j)}}function y(L,C,R,N){N<0&&L.x===1&&(h[C]=L.x-1),R.x===0&&R.z===0&&(h[C]=N/2/Math.PI+.5)}function O(L){return Math.atan2(L.z,-L.x)}function P(L){return Math.atan2(-L.y,Math.sqrt(L.x*L.x+L.z*L.z))}return a}return e}(Ne),vd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Object(pe.a)(this,e);var o=(1+Math.sqrt(5))/2,l=1/o,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-o,0,-l,o,0,l,-o,0,l,o,-l,-o,0,-l,o,0,l,-o,0,l,o,0,-o,0,-l,o,0,-l,-o,0,l,o,0,l],h=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return n=t.call(this,c,h,i,a),n.type="DodecahedronBufferGeometry",n.parameters={radius:i,detail:a},n}return e}(Ws),lv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="DodecahedronGeometry",a.parameters={radius:n,detail:i},a.fromBufferGeometry(new vd(n,i)),a.mergeVertices(),a}return e}(Xt),jf=new I,Xf=new I,md=new I,tl=new br,gd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;Object(pe.a)(this,e),a=t.call(this),a.type="EdgesGeometry",a.parameters={thresholdAngle:i},i=i!==void 0?i:1,n.isGeometry&&(n=new Ne().fromGeometry(n));for(var o=4,l=Math.pow(10,o),c=Math.cos(Ke.DEG2RAD*i),h=n.getIndex(),d=n.getAttribute("position"),p=h?h.count:d.count,v=[0,0,0],m=["a","b","c"],x=new Array(3),M={},A=[],S=0;S<p;S+=3){h?(v[0]=h.getX(S),v[1]=h.getX(S+1),v[2]=h.getX(S+2)):(v[0]=S,v[1]=S+1,v[2]=S+2);var y=tl.a,O=tl.b,P=tl.c;if(y.fromBufferAttribute(d,v[0]),O.fromBufferAttribute(d,v[1]),P.fromBufferAttribute(d,v[2]),tl.getNormal(md),x[0]="".concat(Math.round(y.x*l),",").concat(Math.round(y.y*l),",").concat(Math.round(y.z*l)),x[1]="".concat(Math.round(O.x*l),",").concat(Math.round(O.y*l),",").concat(Math.round(O.z*l)),x[2]="".concat(Math.round(P.x*l),",").concat(Math.round(P.y*l),",").concat(Math.round(P.z*l)),!(x[0]===x[1]||x[1]===x[2]||x[2]===x[0]))for(var L=0;L<3;L++){var C=(L+1)%3,R=x[L],N=x[C],V=tl[m[L]],X=tl[m[C]],z="".concat(R,"_").concat(N),D="".concat(N,"_").concat(R);D in M&&M[D]?(md.dot(M[D].normal)<=c&&(A.push(V.x,V.y,V.z),A.push(X.x,X.y,X.z)),M[D]=null):z in M||(M[z]={index0:v[L],index1:v[C],normal:md.clone()})}}for(var H in M)if(M[H]){var j=M[H],_=j.index0,W=j.index1;jf.fromBufferAttribute(d,_),Xf.fromBufferAttribute(d,W),A.push(jf.x,jf.y,jf.z),A.push(Xf.x,Xf.y,Xf.z)}return a.setAttribute("position",new Se(A,3)),a}return e}(Ne),d0={triangulate:function(t,e,n){n=n||2;var i=e&&e.length,a=i?e[0]*n:t.length,o=cv(t,0,a,n,!0),l=[];if(!o||o.next===o.prev)return l;var c,h,d,p,v,m,x;if(i&&(o=y0(t,e,o,n)),t.length>80*n){c=d=t[0],h=p=t[1];for(var M=n;M<a;M+=n)v=t[M],m=t[M+1],v<c&&(c=v),m<h&&(h=m),v>d&&(d=v),m>p&&(p=m);x=Math.max(d-c,p-h),x=x!==0?1/x:0}return pc(o,l,n,c,h,x),l}};function cv(r,t,e,n,i){var a,o;if(i===R0(r,t,e,n)>0)for(a=t;a<e;a+=n)o=dv(a,r[a],r[a+1],o);else for(a=e-n;a>=t;a-=n)o=dv(a,r[a],r[a+1],o);return o&&Yf(o,o.next)&&(mc(o),o=o.next),o}function es(r,t){if(!r)return r;t||(t=r);var e=r,n;do if(n=!1,!e.steiner&&(Yf(e,e.next)||pn(e.prev,e,e.next)===0)){if(mc(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function pc(r,t,e,n,i,a,o){if(!!r){!o&&a&&b0(r,n,i,a);for(var l=r,c,h;r.prev!==r.next;){if(c=r.prev,h=r.next,a?v0(r,n,i,a):p0(r)){t.push(c.i/e),t.push(r.i/e),t.push(h.i/e),mc(r),r=h.next,l=h.next;continue}if(r=h,r===l){o?o===1?(r=m0(es(r),t,e),pc(r,t,e,n,i,a,2)):o===2&&g0(r,t,e,n,i,a):pc(es(r),t,e,n,i,a,1);break}}}}function p0(r){var t=r.prev,e=r,n=r.next;if(pn(t,e,n)>=0)return!1;for(var i=r.next.next;i!==r.prev;){if(nl(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)&&pn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function v0(r,t,e,n){var i=r.prev,a=r,o=r.next;if(pn(i,a,o)>=0)return!1;for(var l=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,c=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,h=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,d=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,p=yd(l,c,t,e,n),v=yd(h,d,t,e,n),m=r.prevZ,x=r.nextZ;m&&m.z>=p&&x&&x.z<=v;){if(m!==r.prev&&m!==r.next&&nl(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&pn(m.prev,m,m.next)>=0||(m=m.prevZ,x!==r.prev&&x!==r.next&&nl(i.x,i.y,a.x,a.y,o.x,o.y,x.x,x.y)&&pn(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;m&&m.z>=p;){if(m!==r.prev&&m!==r.next&&nl(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&pn(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;x&&x.z<=v;){if(x!==r.prev&&x!==r.next&&nl(i.x,i.y,a.x,a.y,o.x,o.y,x.x,x.y)&&pn(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function m0(r,t,e){var n=r;do{var i=n.prev,a=n.next.next;!Yf(i,a)&&fv(i,n,n.next,a)&&vc(i,a)&&vc(a,i)&&(t.push(i.i/e),t.push(n.i/e),t.push(a.i/e),mc(n),mc(n.next),n=r=a),n=n.next}while(n!==r);return es(n)}function g0(r,t,e,n,i,a){var o=r;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&A0(o,l)){var c=hv(o,l);o=es(o,o.next),c=es(c,c.next),pc(o,t,e,n,i,a),pc(c,t,e,n,i,a);return}l=l.next}o=o.next}while(o!==r)}function y0(r,t,e,n){var i=[],a,o,l,c,h;for(a=0,o=t.length;a<o;a++)l=t[a]*n,c=a<o-1?t[a+1]*n:r.length,h=cv(r,l,c,n,!1),h===h.next&&(h.steiner=!0),i.push(T0(h));for(i.sort(x0),a=0;a<i.length;a++)M0(i[a],e),e=es(e,e.next);return e}function x0(r,t){return r.x-t.x}function M0(r,t){if(t=S0(r,t),t){var e=hv(t,r);es(t,t.next),es(e,e.next)}}function S0(r,t){var e=t,n=r.x,i=r.y,a=-Infinity,o;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var l=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(l<=n&&l>a){if(a=l,l===n){if(i===e.y)return e;if(i===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(n===a)return o;var c=o,h=o.x,d=o.y,p=Infinity,v;e=o;do n>=e.x&&e.x>=h&&n!==e.x&&nl(i<d?n:a,i,h,d,i<d?a:n,i,e.x,e.y)&&(v=Math.abs(i-e.y)/(n-e.x),vc(e,r)&&(v<p||v===p&&(e.x>o.x||e.x===o.x&&w0(o,e)))&&(o=e,p=v)),e=e.next;while(e!==c);return o}function w0(r,t){return pn(r.prev,r,t.prev)<0&&pn(t.next,r,r.next)<0}function b0(r,t,e,n){var i=r;do i.z===null&&(i.z=yd(i.x,i.y,t,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,E0(i)}function E0(r){var t,e,n,i,a,o,l,c,h=1;do{for(e=r,r=null,a=null,o=0;e;){for(o++,n=e,l=0,t=0;t<h&&(l++,n=n.nextZ,!!n);t++);for(c=h;l>0||c>0&&n;)l!==0&&(c===0||!n||e.z<=n.z)?(i=e,e=e.nextZ,l--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;e=n}a.nextZ=null,h*=2}while(o>1);return r}function yd(r,t,e,n,i){return r=32767*(r-e)*i,t=32767*(t-n)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function T0(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function nl(r,t,e,n,i,a,o,l){return(i-o)*(t-l)-(r-o)*(a-l)>=0&&(r-o)*(n-l)-(e-o)*(t-l)>=0&&(e-o)*(a-l)-(i-o)*(n-l)>=0}function A0(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!L0(r,t)&&(vc(r,t)&&vc(t,r)&&C0(r,t)&&(pn(r.prev,r,t.prev)||pn(r,t.prev,t))||Yf(r,t)&&pn(r.prev,r,r.next)>0&&pn(t.prev,t,t.next)>0)}function pn(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Yf(r,t){return r.x===t.x&&r.y===t.y}function fv(r,t,e,n){var i=Zf(pn(r,t,e)),a=Zf(pn(r,t,n)),o=Zf(pn(e,n,r)),l=Zf(pn(e,n,t));return!!(i!==a&&o!==l||i===0&&Jf(r,e,t)||a===0&&Jf(r,n,t)||o===0&&Jf(e,r,n)||l===0&&Jf(e,t,n))}function Jf(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Zf(r){return r>0?1:r<0?-1:0}function L0(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&fv(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function vc(r,t){return pn(r.prev,r,r.next)<0?pn(r,t,r.next)>=0&&pn(r,r.prev,t)>=0:pn(r,t,r.prev)<0||pn(r,r.next,t)<0}function C0(r,t){var e=r,n=!1,i=(r.x+t.x)/2,a=(r.y+t.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&i<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==r);return n}function hv(r,t){var e=new xd(r.i,r.x,r.y),n=new xd(t.i,t.x,t.y),i=r.next,a=t.prev;return r.next=t,t.prev=r,e.next=i,i.prev=e,n.next=e,e.prev=n,a.next=n,n.prev=a,n}function dv(r,t,e,n){var i=new xd(r,t,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function mc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function xd(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R0(r,t,e,n){for(var i=0,a=t,o=e-n;a<e;a+=n)i+=(r[o]-r[a])*(r[a+1]+r[o+1]),o=a;return i}var ro={area:function(t){for(var e=t.length,n=0,i=e-1,a=0;a<e;i=a++)n+=t[i].x*t[a].y-t[a].x*t[i].y;return n*.5},isClockWise:function(t){return ro.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],a=[];pv(t),vv(n,t);var o=t.length;e.forEach(pv);for(var l=0;l<e.length;l++)i.push(o),o+=e[l].length,vv(n,e[l]);for(var c=d0.triangulate(n,i),h=0;h<c.length;h+=3)a.push(c.slice(h,h+3));return a}};function pv(r){var t=r.length;t>2&&r[t-1].equals(r[0])&&r.pop()}function vv(r,t){for(var e=0;e<t.length;e++)r.push(t[e].x),r.push(t[e].y)}var gc=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;Object(pe.a)(this,e),a=t.call(this),a.type="ExtrudeBufferGeometry",a.parameters={shapes:n,options:i},n=Array.isArray(n)?n:[n];for(var o=Object(dn.a)(a),l=[],c=[],h=0,d=n.length;h<d;h++){var p=n[h];v(p)}a.setAttribute("position",new Se(l,3)),a.setAttribute("uv",new Se(c,2)),a.computeVertexNormals();function v(m){var x=[],M=i.curveSegments!==void 0?i.curveSegments:12,A=i.steps!==void 0?i.steps:1,S=i.depth!==void 0?i.depth:100,y=i.bevelEnabled!==void 0?i.bevelEnabled:!0,O=i.bevelThickness!==void 0?i.bevelThickness:6,P=i.bevelSize!==void 0?i.bevelSize:O-2,L=i.bevelOffset!==void 0?i.bevelOffset:0,C=i.bevelSegments!==void 0?i.bevelSegments:3,R=i.extrudePath,N=i.UVGenerator!==void 0?i.UVGenerator:P0;i.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),S=i.amount);var V,X=!1,z,D,H,j;R&&(V=R.getSpacedPoints(A),X=!0,y=!1,z=R.computeFrenetFrames(A,!1),D=new I,H=new I,j=new I),y||(C=0,O=0,P=0,L=0);var _=m.extractPoints(M),W=_.shape,Q=_.holes,te=!ro.isClockWise(W);if(te){W=W.reverse();for(var oe=0,he=Q.length;oe<he;oe++){var re=Q[oe];ro.isClockWise(re)&&(Q[oe]=re.reverse())}}for(var de=ro.triangulateShape(W,Q),Me=W,Xe=0,$=Q.length;Xe<$;Xe++){var at=Q[Xe];W=W.concat(at)}function qe(Et,ut,Pt){return ut||console.error("THREE.ExtrudeGeometry: vec does not exist"),ut.clone().multiplyScalar(Pt).add(Et)}var Ze=W.length,Ae=de.length;function fe(Et,ut,Pt){var gt,wt,on,nr=Et.x-ut.x,rr=Et.y-ut.y,mr=Pt.x-Et.x,Zr=Pt.y-Et.y,so=nr*nr+rr*rr,wp=nr*Zr-rr*mr;if(Math.abs(wp)>Number.EPSILON){var Gh=Math.sqrt(so),Lm=Math.sqrt(mr*mr+Zr*Zr),Cm=ut.x-rr/Gh,Rm=ut.y+nr/Gh,LM=Pt.x-Zr/Lm,CM=Pt.y+mr/Lm,Pm=((LM-Cm)*Zr-(CM-Rm)*mr)/(nr*Zr-rr*mr);gt=Cm+nr*Pm-Et.x,wt=Rm+rr*Pm-Et.y;var Om=gt*gt+wt*wt;if(Om<=2)return new se(gt,wt);on=Math.sqrt(Om/2)}else{var Uh=!1;nr>Number.EPSILON?mr>Number.EPSILON&&(Uh=!0):nr<-Number.EPSILON?mr<-Number.EPSILON&&(Uh=!0):Math.sign(rr)===Math.sign(Zr)&&(Uh=!0),Uh?(gt=-rr,wt=nr,on=Math.sqrt(so)):(gt=nr,wt=rr,on=Math.sqrt(so/2))}return new se(gt/on,wt/on)}for(var rt=[],yt=0,st=Me.length,At=st-1,Kt=yt+1;yt<st;yt++,At++,Kt++)At===st&&(At=0),Kt===st&&(Kt=0),rt[yt]=fe(Me[yt],Me[At],Me[Kt]);for(var rn=[],an,Bt=rt.concat(),U=0,G=Q.length;U<G;U++){var be=Q[U];an=[];for(var ge=0,He=be.length,J=He-1,q=ge+1;ge<He;ge++,J++,q++)J===He&&(J=0),q===He&&(q=0),an[ge]=fe(be[ge],be[J],be[q]);rn.push(an),Bt=Bt.concat(an)}for(var ie=0;ie<C;ie++){for(var ye=ie/C,ce=O*Math.cos(ye*Math.PI/2),ue=P*Math.sin(ye*Math.PI/2)+L,xe=0,ze=Me.length;xe<ze;xe++){var lt=qe(Me[xe],rt[xe],ue);Ve(lt.x,lt.y,-ce)}for(var ft=0,vt=Q.length;ft<vt;ft++){var mt=Q[ft];an=rn[ft];for(var zt=0,dr=mt.length;zt<dr;zt++){var $i=qe(mt[zt],an[zt],ue);Ve($i.x,$i.y,-ce)}}}for(var pr=P+L,qi=0;qi<Ze;qi++){var vr=y?qe(W[qi],Bt[qi],pr):W[qi];X?(H.copy(z.normals[0]).multiplyScalar(vr.x),D.copy(z.binormals[0]).multiplyScalar(vr.y),j.copy(V[0]).add(H).add(D),Ve(j.x,j.y,j.z)):Ve(vr.x,vr.y,0)}for(var ea=1;ea<=A;ea++)for(var bi=0;bi<Ze;bi++){var au=y?qe(W[bi],Bt[bi],pr):W[bi];X?(H.copy(z.normals[ea]).multiplyScalar(au.x),D.copy(z.binormals[ea]).multiplyScalar(au.y),j.copy(V[ea]).add(H).add(D),Ve(j.x,j.y,j.z)):Ve(au.x,au.y,S/A*ea)}for(var Jr=C-1;Jr>=0;Jr--){for(var Pc=Jr/C,Oc=O*Math.cos(Pc*Math.PI/2),zh=P*Math.sin(Pc*Math.PI/2)+L,F=0,ae=Me.length;F<ae;F++){var ee=qe(Me[F],rt[F],zh);Ve(ee.x,ee.y,S+Oc)}for(var le=0,Ee=Q.length;le<Ee;le++){var St=Q[le];an=rn[le];for(var ht=0,Dt=St.length;ht<Dt;ht++){var ot=qe(St[ht],an[ht],zh);X?Ve(ot.x,ot.y+V[A-1].y,V[A-1].x+Oc):Ve(ot.x,ot.y,S+Oc)}}}bn(),hn();function bn(){var Et=l.length/3;if(y){for(var ut=0,Pt=Ze*ut,gt=0;gt<Ae;gt++){var wt=de[gt];zn(wt[2]+Pt,wt[1]+Pt,wt[0]+Pt)}ut=A+C*2,Pt=Ze*ut;for(var on=0;on<Ae;on++){var nr=de[on];zn(nr[0]+Pt,nr[1]+Pt,nr[2]+Pt)}}else{for(var rr=0;rr<Ae;rr++){var mr=de[rr];zn(mr[2],mr[1],mr[0])}for(var Zr=0;Zr<Ae;Zr++){var so=de[Zr];zn(so[0]+Ze*A,so[1]+Ze*A,so[2]+Ze*A)}}o.addGroup(Et,l.length/3-Et,0)}function hn(){var Et=l.length/3,ut=0;En(Me,ut),ut+=Me.length;for(var Pt=0,gt=Q.length;Pt<gt;Pt++){var wt=Q[Pt];En(wt,ut),ut+=wt.length}o.addGroup(Et,l.length/3-Et,1)}function En(Et,ut){for(var Pt=Et.length;--Pt>=0;){var gt=Pt,wt=Pt-1;wt<0&&(wt=Et.length-1);for(var on=0,nr=A+C*2;on<nr;on++){var rr=Ze*on,mr=Ze*(on+1),Zr=ut+gt+rr,so=ut+wt+rr,wp=ut+wt+mr,Gh=ut+gt+mr;Gn(Zr,so,wp,Gh)}}}function Ve(Et,ut,Pt){x.push(Et),x.push(ut),x.push(Pt)}function zn(Et,ut,Pt){Rt(Et),Rt(ut),Rt(Pt);var gt=l.length/3,wt=N.generateTopUV(o,l,gt-3,gt-2,gt-1);Pn(wt[0]),Pn(wt[1]),Pn(wt[2])}function Gn(Et,ut,Pt,gt){Rt(Et),Rt(ut),Rt(gt),Rt(ut),Rt(Pt),Rt(gt);var wt=l.length/3,on=N.generateSideWallUV(o,l,wt-6,wt-3,wt-2,wt-1);Pn(on[0]),Pn(on[1]),Pn(on[3]),Pn(on[1]),Pn(on[2]),Pn(on[3])}function Rt(Et){l.push(x[Et*3+0]),l.push(x[Et*3+1]),l.push(x[Et*3+2])}function Pn(Et){c.push(Et.x),c.push(Et.y)}}return a}return Object(Ge.a)(e,[{key:"toJSON",value:function(){var i=Ne.prototype.toJSON.call(this),a=this.parameters.shapes,o=this.parameters.options;return O0(a,o,i)}}]),e}(Ne),P0={generateTopUV:function(t,e,n,i,a){var o=e[n*3],l=e[n*3+1],c=e[i*3],h=e[i*3+1],d=e[a*3],p=e[a*3+1];return[new se(o,l),new se(c,h),new se(d,p)]},generateSideWallUV:function(t,e,n,i,a,o){var l=e[n*3],c=e[n*3+1],h=e[n*3+2],d=e[i*3],p=e[i*3+1],v=e[i*3+2],m=e[a*3],x=e[a*3+1],M=e[a*3+2],A=e[o*3],S=e[o*3+1],y=e[o*3+2];return Math.abs(c-p)<.01?[new se(l,1-h),new se(d,1-v),new se(m,1-M),new se(A,1-y)]:[new se(c,1-h),new se(p,1-v),new se(x,1-M),new se(S,1-y)]}};function O0(r,t,e){if(e.shapes=[],Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.shapes.push(a.uuid)}else e.shapes.push(r.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}var Md=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="ExtrudeGeometry",a.parameters={shapes:n,options:i},a.fromBufferGeometry(new gc(n,i)),a.mergeVertices(),a}return Object(Ge.a)(e,[{key:"toJSON",value:function(){var i=Lt(Object(Wn.a)(e.prototype),"toJSON",this).call(this),a=this.parameters.shapes,o=this.parameters.options;return I0(a,o,i)}}]),e}(Xt);function I0(r,t,e){if(e.shapes=[],Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.shapes.push(a.uuid)}else e.shapes.push(r.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}var Sd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Object(pe.a)(this,e);var o=(1+Math.sqrt(5))/2,l=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return n=t.call(this,l,c,i,a),n.type="IcosahedronBufferGeometry",n.parameters={radius:i,detail:a},n}return e}(Ws),mv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="IcosahedronGeometry",a.parameters={radius:n,detail:i},a.fromBufferGeometry(new Sd(n,i)),a.mergeVertices(),a}return e}(Xt),wd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.PI*2;Object(pe.a)(this,e),i=t.call(this),i.type="LatheBufferGeometry",i.parameters={points:n,segments:a,phiStart:o,phiLength:l},a=Math.floor(a),l=Ke.clamp(l,0,Math.PI*2);for(var c=[],h=[],d=[],p=1/a,v=new I,m=new se,x=0;x<=a;x++)for(var M=o+x*p*l,A=Math.sin(M),S=Math.cos(M),y=0;y<=n.length-1;y++)v.x=n[y].x*A,v.y=n[y].y,v.z=n[y].x*S,h.push(v.x,v.y,v.z),m.x=x/a,m.y=y/(n.length-1),d.push(m.x,m.y);for(var O=0;O<a;O++)for(var P=0;P<n.length-1;P++){var L=P+O*n.length,C=L,R=L+n.length,N=L+n.length+1,V=L+1;c.push(C,R,V),c.push(R,N,V)}if(i.setIndex(c),i.setAttribute("position",new Se(h,3)),i.setAttribute("uv",new Se(d,2)),i.computeVertexNormals(),l===Math.PI*2)for(var X=i.attributes.normal.array,z=new I,D=new I,H=new I,j=a*n.length*3,_=0,W=0;_<n.length;_++,W+=3)z.x=X[W+0],z.y=X[W+1],z.z=X[W+2],D.x=X[j+W+0],D.y=X[j+W+1],D.z=X[j+W+2],H.addVectors(z,D).normalize(),X[W+0]=X[j+W+0]=H.x,X[W+1]=X[j+W+1]=H.y,X[W+2]=X[j+W+2]=H.z;return i}return e}(Ne),gv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o){var l;return Object(pe.a)(this,e),l=t.call(this),l.type="LatheGeometry",l.parameters={points:n,segments:i,phiStart:a,phiLength:o},l.fromBufferGeometry(new wd(n,i,a,o)),l.mergeVertices(),l}return e}(Xt),Qf=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Object(pe.a)(this,e);var o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],l=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return n=t.call(this,o,l,i,a),n.type="OctahedronBufferGeometry",n.parameters={radius:i,detail:a},n}return e}(Ws),yv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="OctahedronGeometry",a.parameters={radius:n,detail:i},a.fromBufferGeometry(new Qf(n,i)),a.mergeVertices(),a}return e}(Xt);function rl(r,t,e){Ne.call(this),this.type="ParametricBufferGeometry",this.parameters={func:r,slices:t,stacks:e};var n=[],i=[],a=[],o=[],l=1e-5,c=new I,h=new I,d=new I,p=new I,v=new I;r.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var m=t+1,x=0;x<=e;x++)for(var M=x/e,A=0;A<=t;A++){var S=A/t;r(S,M,h),i.push(h.x,h.y,h.z),S-l>=0?(r(S-l,M,d),p.subVectors(h,d)):(r(S+l,M,d),p.subVectors(d,h)),M-l>=0?(r(S,M-l,d),v.subVectors(h,d)):(r(S,M+l,d),v.subVectors(d,h)),c.crossVectors(p,v).normalize(),a.push(c.x,c.y,c.z),o.push(S,M)}for(var y=0;y<e;y++)for(var O=0;O<t;O++){var P=y*m+O,L=y*m+O+1,C=(y+1)*m+O+1,R=(y+1)*m+O;n.push(P,L,R),n.push(L,C,R)}this.setIndex(n),this.setAttribute("position",new Se(i,3)),this.setAttribute("normal",new Se(a,3)),this.setAttribute("uv",new Se(o,2))}rl.prototype=Object.create(Ne.prototype),rl.prototype.constructor=rl;function yc(r,t,e){Xt.call(this),this.type="ParametricGeometry",this.parameters={func:r,slices:t,stacks:e},this.fromBufferGeometry(new rl(r,t,e)),this.mergeVertices()}yc.prototype=Object.create(Xt.prototype),yc.prototype.constructor=yc;var xv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o){var l;return Object(pe.a)(this,e),l=t.call(this),l.type="PlaneGeometry",l.parameters={width:n,height:i,widthSegments:a,heightSegments:o},l.fromBufferGeometry(new jo(n,i,a,o)),l.mergeVertices(),l}return e}(Xt),Mv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o){var l;return Object(pe.a)(this,e),l=t.call(this),l.type="PolyhedronGeometry",l.parameters={vertices:n,indices:i,radius:a,detail:o},l.fromBufferGeometry(new Ws(n,i,a,o)),l.mergeVertices(),l}return e}(Xt),bd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Math.PI*2;Object(pe.a)(this,e),n=t.call(this),n.type="RingBufferGeometry",n.parameters={innerRadius:i,outerRadius:a,thetaSegments:o,phiSegments:l,thetaStart:c,thetaLength:h},o=Math.max(3,o),l=Math.max(1,l);for(var d=[],p=[],v=[],m=[],x=i,M=(a-i)/l,A=new I,S=new se,y=0;y<=l;y++){for(var O=0;O<=o;O++){var P=c+O/o*h;A.x=x*Math.cos(P),A.y=x*Math.sin(P),p.push(A.x,A.y,A.z),v.push(0,0,1),S.x=(A.x/a+1)/2,S.y=(A.y/a+1)/2,m.push(S.x,S.y)}x+=M}for(var L=0;L<l;L++)for(var C=L*(o+1),R=0;R<o;R++){var N=R+C,V=N,X=N+o+1,z=N+o+2,D=N+1;d.push(V,X,D),d.push(X,z,D)}return n.setIndex(d),n.setAttribute("position",new Se(p,3)),n.setAttribute("normal",new Se(v,3)),n.setAttribute("uv",new Se(m,2)),n}return e}(Ne),Sv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c){var h;return Object(pe.a)(this,e),h=t.call(this),h.type="RingGeometry",h.parameters={innerRadius:n,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:l,thetaLength:c},h.fromBufferGeometry(new bd(n,i,a,o,l,c)),h.mergeVertices(),h}return e}(Xt),Ed=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12;Object(pe.a)(this,e),i=t.call(this),i.type="ShapeBufferGeometry",i.parameters={shapes:n,curveSegments:a};var o=[],l=[],c=[],h=[],d=0,p=0;if(Array.isArray(n)===!1)m(n);else for(var v=0;v<n.length;v++)m(n[v]),i.addGroup(d,p,v),d+=p,p=0;i.setIndex(o),i.setAttribute("position",new Se(l,3)),i.setAttribute("normal",new Se(c,3)),i.setAttribute("uv",new Se(h,2));function m(x){var M=l.length/3,A=x.extractPoints(a),S=A.shape,y=A.holes;ro.isClockWise(S)===!1&&(S=S.reverse());for(var O=0,P=y.length;O<P;O++){var L=y[O];ro.isClockWise(L)===!0&&(y[O]=L.reverse())}for(var C=ro.triangulateShape(S,y),R=0,N=y.length;R<N;R++){var V=y[R];S=S.concat(V)}for(var X=0,z=S.length;X<z;X++){var D=S[X];l.push(D.x,D.y,0),c.push(0,0,1),h.push(D.x,D.y)}for(var H=0,j=C.length;H<j;H++){var _=C[H],W=_[0]+M,Q=_[1]+M,te=_[2]+M;o.push(W,Q,te),p+=3}}return i}return Object(Ge.a)(e,[{key:"toJSON",value:function(){var i=Ne.prototype.toJSON.call(this),a=this.parameters.shapes;return B0(a,i)}}]),e}(Ne);function B0(r,t){if(t.shapes=[],Array.isArray(r))for(var e=0,n=r.length;e<n;e++){var i=r[e];t.shapes.push(i.uuid)}else t.shapes.push(r.uuid);return t}var Td=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="ShapeGeometry",typeof i=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),i=i.curveSegments),a.parameters={shapes:n,curveSegments:i},a.fromBufferGeometry(new Ed(n,i)),a.mergeVertices(),a}return Object(Ge.a)(e,[{key:"toJSON",value:function(){var i=Xt.prototype.toJSON.call(this),a=this.parameters.shapes;return D0(a,i)}}]),e}(Xt);function D0(r,t){if(t.shapes=[],Array.isArray(r))for(var e=0,n=r.length;e<n;e++){var i=r[e];t.shapes.push(i.uuid)}else t.shapes.push(r.uuid);return t}var Kf=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:6,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Math.PI*2,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Math.PI;Object(pe.a)(this,e),n=t.call(this),n.type="SphereBufferGeometry",n.parameters={radius:i,widthSegments:a,heightSegments:o,phiStart:l,phiLength:c,thetaStart:h,thetaLength:d},a=Math.max(3,Math.floor(a)),o=Math.max(2,Math.floor(o));for(var p=Math.min(h+d,Math.PI),v=0,m=[],x=new I,M=new I,A=[],S=[],y=[],O=[],P=0;P<=o;P++){var L=[],C=P/o,R=0;P==0&&h==0?R=.5/a:P==o&&p==Math.PI&&(R=-.5/a);for(var N=0;N<=a;N++){var V=N/a;x.x=-i*Math.cos(l+V*c)*Math.sin(h+C*d),x.y=i*Math.cos(h+C*d),x.z=i*Math.sin(l+V*c)*Math.sin(h+C*d),S.push(x.x,x.y,x.z),M.copy(x).normalize(),y.push(M.x,M.y,M.z),O.push(V+R,1-C),L.push(v++)}m.push(L)}for(var X=0;X<o;X++)for(var z=0;z<a;z++){var D=m[X][z+1],H=m[X][z],j=m[X+1][z],_=m[X+1][z+1];(X!==0||h>0)&&A.push(D,H,_),(X!==o-1||p<Math.PI)&&A.push(H,j,_)}return n.setIndex(A),n.setAttribute("position",new Se(S,3)),n.setAttribute("normal",new Se(y,3)),n.setAttribute("uv",new Se(O,2)),n}return e}(Ne),wv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c,h){var d;return Object(pe.a)(this,e),d=t.call(this),d.type="SphereGeometry",d.parameters={radius:n,widthSegments:i,heightSegments:a,phiStart:o,phiLength:l,thetaStart:c,thetaLength:h},d.fromBufferGeometry(new Kf(n,i,a,o,l,c,h)),d.mergeVertices(),d}return e}(Xt),Ad=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Object(pe.a)(this,e);var o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],l=[2,1,0,0,3,2,1,3,0,2,3,1];return n=t.call(this,o,l,i,a),n.type="TetrahedronBufferGeometry",n.parameters={radius:i,detail:a},n}return e}(Ws),bv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="TetrahedronGeometry",a.parameters={radius:n,detail:i},a.fromBufferGeometry(new Ad(n,i)),a.mergeVertices(),a}return e}(Xt),Ld=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object(pe.a)(this,e);var o=a.font;if(!(o&&o.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),Object(vn.a)(i,new Ne);var l=o.generateShapes(n,a.size);return a.depth=a.height!==void 0?a.height:50,a.bevelThickness===void 0&&(a.bevelThickness=10),a.bevelSize===void 0&&(a.bevelSize=8),a.bevelEnabled===void 0&&(a.bevelEnabled=!1),i=t.call(this,l,a),i.type="TextBufferGeometry",i}return e}(gc),Ev=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;return Object(pe.a)(this,e),a=t.call(this),a.type="TextGeometry",a.parameters={text:n,parameters:i},a.fromBufferGeometry(new Ld(n,i)),a.mergeVertices(),a}return e}(Xt),Cd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.4,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Math.PI*2;Object(pe.a)(this,e),n=t.call(this),n.type="TorusBufferGeometry",n.parameters={radius:i,tube:a,radialSegments:o,tubularSegments:l,arc:c},o=Math.floor(o),l=Math.floor(l);for(var h=[],d=[],p=[],v=[],m=new I,x=new I,M=new I,A=0;A<=o;A++)for(var S=0;S<=l;S++){var y=S/l*c,O=A/o*Math.PI*2;x.x=(i+a*Math.cos(O))*Math.cos(y),x.y=(i+a*Math.cos(O))*Math.sin(y),x.z=a*Math.sin(O),d.push(x.x,x.y,x.z),m.x=i*Math.cos(y),m.y=i*Math.sin(y),M.subVectors(x,m).normalize(),p.push(M.x,M.y,M.z),v.push(S/l),v.push(A/o)}for(var P=1;P<=o;P++)for(var L=1;L<=l;L++){var C=(l+1)*P+L-1,R=(l+1)*(P-1)+L-1,N=(l+1)*(P-1)+L,V=(l+1)*P+L;h.push(C,R,V),h.push(R,N,V)}return n.setIndex(h),n.setAttribute("position",new Se(d,3)),n.setAttribute("normal",new Se(p,3)),n.setAttribute("uv",new Se(v,2)),n}return e}(Ne),Tv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l){var c;return Object(pe.a)(this,e),c=t.call(this),c.type="TorusGeometry",c.parameters={radius:n,tube:i,radialSegments:a,tubularSegments:o,arc:l},c.fromBufferGeometry(new Cd(n,i,a,o,l)),c.mergeVertices(),c}return e}(Xt),Rd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.4,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:64,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:8,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:3;Object(pe.a)(this,e),n=t.call(this),n.type="TorusKnotBufferGeometry",n.parameters={radius:i,tube:a,tubularSegments:o,radialSegments:l,p:c,q:h},o=Math.floor(o),l=Math.floor(l);for(var d=[],p=[],v=[],m=[],x=new I,M=new I,A=new I,S=new I,y=new I,O=new I,P=new I,L=0;L<=o;++L){var C=L/o*c*Math.PI*2;Q(C,c,h,i,A),Q(C+.01,c,h,i,S),O.subVectors(S,A),P.addVectors(S,A),y.crossVectors(O,P),P.crossVectors(y,O),y.normalize(),P.normalize();for(var R=0;R<=l;++R){var N=R/l*Math.PI*2,V=-a*Math.cos(N),X=a*Math.sin(N);x.x=A.x+(V*P.x+X*y.x),x.y=A.y+(V*P.y+X*y.y),x.z=A.z+(V*P.z+X*y.z),p.push(x.x,x.y,x.z),M.subVectors(x,A).normalize(),v.push(M.x,M.y,M.z),m.push(L/o),m.push(R/l)}}for(var z=1;z<=o;z++)for(var D=1;D<=l;D++){var H=(l+1)*(z-1)+(D-1),j=(l+1)*z+(D-1),_=(l+1)*z+D,W=(l+1)*(z-1)+D;d.push(H,j,W),d.push(j,_,W)}n.setIndex(d),n.setAttribute("position",new Se(p,3)),n.setAttribute("normal",new Se(v,3)),n.setAttribute("uv",new Se(m,2));function Q(te,oe,he,re,de){var Me=Math.cos(te),Xe=Math.sin(te),$=he/oe*te,at=Math.cos($);de.x=re*(2+at)*.5*Me,de.y=re*(2+at)*Xe*.5,de.z=re*Math.sin($)*.5}return n}return e}(Ne),Av=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c,h){var d;return Object(pe.a)(this,e),d=t.call(this),d.type="TorusKnotGeometry",d.parameters={radius:n,tube:i,tubularSegments:a,radialSegments:o,p:l,q:c},h!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),d.fromBufferGeometry(new Rd(n,i,a,o,l,c)),d.mergeVertices(),d}return e}(Xt),Pd=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:8,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;Object(pe.a)(this,e),i=t.call(this),i.type="TubeBufferGeometry",i.parameters={path:n,tubularSegments:a,radius:o,radialSegments:l,closed:c};var h=n.computeFrenetFrames(a,c);i.tangents=h.tangents,i.normals=h.normals,i.binormals=h.binormals;var d=new I,p=new I,v=new se,m=new I,x=[],M=[],A=[],S=[];y(),i.setIndex(S),i.setAttribute("position",new Se(x,3)),i.setAttribute("normal",new Se(M,3)),i.setAttribute("uv",new Se(A,2));function y(){for(var C=0;C<a;C++)O(C);O(c===!1?a:0),L(),P()}function O(C){m=n.getPointAt(C/a,m);for(var R=h.normals[C],N=h.binormals[C],V=0;V<=l;V++){var X=V/l*Math.PI*2,z=Math.sin(X),D=-Math.cos(X);p.x=D*R.x+z*N.x,p.y=D*R.y+z*N.y,p.z=D*R.z+z*N.z,p.normalize(),M.push(p.x,p.y,p.z),d.x=m.x+o*p.x,d.y=m.y+o*p.y,d.z=m.z+o*p.z,x.push(d.x,d.y,d.z)}}function P(){for(var C=1;C<=a;C++)for(var R=1;R<=l;R++){var N=(l+1)*(C-1)+(R-1),V=(l+1)*C+(R-1),X=(l+1)*C+R,z=(l+1)*(C-1)+R;S.push(N,V,z),S.push(V,X,z)}}function L(){for(var C=0;C<=a;C++)for(var R=0;R<=l;R++)v.x=C/a,v.y=R/l,A.push(v.x,v.y)}return i}return Object(Ge.a)(e,[{key:"toJSON",value:function(){var i=Ne.prototype.toJSON.call(this);return i.path=this.parameters.path.toJSON(),i}}]),e}(Ne),Lv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c){var h;Object(pe.a)(this,e),h=t.call(this),h.type="TubeGeometry",h.parameters={path:n,tubularSegments:i,radius:a,radialSegments:o,closed:l},c!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var d=new Pd(n,i,a,o,l);return h.tangents=d.tangents,h.normals=d.normals,h.binormals=d.binormals,h.fromBufferGeometry(d),h.mergeVertices(),h}return e}(Xt),Od=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i;Object(pe.a)(this,e),i=t.call(this),i.type="WireframeGeometry";var a=[],o=[0,0],l={},c=["a","b","c"];if(n&&n.isGeometry){for(var h=n.faces,d=0,p=h.length;d<p;d++)for(var v=h[d],m=0;m<3;m++){var x=v[c[m]],M=v[c[(m+1)%3]];o[0]=Math.min(x,M),o[1]=Math.max(x,M);var A=o[0]+","+o[1];l[A]===void 0&&(l[A]={index1:o[0],index2:o[1]})}for(var S in l){var y=l[S],O=n.vertices[y.index1];a.push(O.x,O.y,O.z),O=n.vertices[y.index2],a.push(O.x,O.y,O.z)}}else if(n&&n.isBufferGeometry){var P=new I;if(n.index!==null){var L=n.attributes.position,C=n.index,R=n.groups;R.length===0&&(R=[{start:0,count:C.count,materialIndex:0}]);for(var N=0,V=R.length;N<V;++N)for(var X=R[N],z=X.start,D=X.count,H=z,j=z+D;H<j;H+=3)for(var _=0;_<3;_++){var W=C.getX(H+_),Q=C.getX(H+(_+1)%3);o[0]=Math.min(W,Q),o[1]=Math.max(W,Q);var te=o[0]+","+o[1];l[te]===void 0&&(l[te]={index1:o[0],index2:o[1]})}for(var oe in l){var he=l[oe];P.fromBufferAttribute(L,he.index1),a.push(P.x,P.y,P.z),P.fromBufferAttribute(L,he.index2),a.push(P.x,P.y,P.z)}}else for(var re=n.attributes.position,de=0,Me=re.count/3;de<Me;de++)for(var Xe=0;Xe<3;Xe++){var $=3*de+Xe;P.fromBufferAttribute(re,$),a.push(P.x,P.y,P.z);var at=3*de+(Xe+1)%3;P.fromBufferAttribute(re,at),a.push(P.x,P.y,P.z)}}return i.setAttribute("position",new Se(a,3)),i}return e}(Ne),hr=Object.freeze({__proto__:null,BoxGeometry:hd,BoxBufferGeometry:lr,CircleGeometry:ov,CircleBufferGeometry:dd,ConeGeometry:sv,ConeBufferGeometry:uv,CylinderGeometry:pd,CylinderBufferGeometry:dc,DodecahedronGeometry:lv,DodecahedronBufferGeometry:vd,EdgesGeometry:gd,ExtrudeGeometry:Md,ExtrudeBufferGeometry:gc,IcosahedronGeometry:mv,IcosahedronBufferGeometry:Sd,LatheGeometry:gv,LatheBufferGeometry:wd,OctahedronGeometry:yv,OctahedronBufferGeometry:Qf,ParametricGeometry:yc,ParametricBufferGeometry:rl,PlaneGeometry:xv,PlaneBufferGeometry:jo,PolyhedronGeometry:Mv,PolyhedronBufferGeometry:Ws,RingGeometry:Sv,RingBufferGeometry:bd,ShapeGeometry:Td,ShapeBufferGeometry:Ed,SphereGeometry:wv,SphereBufferGeometry:Kf,TetrahedronGeometry:bv,TetrahedronBufferGeometry:Ad,TextGeometry:Ev,TextBufferGeometry:Ld,TorusGeometry:Tv,TorusBufferGeometry:Cd,TorusKnotGeometry:Av,TorusKnotBufferGeometry:Rd,TubeGeometry:Lv,TubeBufferGeometry:Pd,WireframeGeometry:Od});function js(r){Qe.call(this),this.type="ShadowMaterial",this.color=new Pe(0),this.transparent=!0,this.setValues(r)}js.prototype=Object.create(Qe.prototype),js.prototype.constructor=js,js.prototype.isShadowMaterial=!0,js.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this};function io(r){Sn.call(this,r),this.type="RawShaderMaterial"}io.prototype=Object.create(Sn.prototype),io.prototype.constructor=io,io.prototype.isRawShaderMaterial=!0;function Ea(r){Qe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(r)}Ea.prototype=Object.create(Qe.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isMeshStandardMaterial=!0,Ea.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.vertexTangents=r.vertexTangents,this};function ts(r){Ea.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new se(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Ke.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(r)}ts.prototype=Object.create(Ea.prototype),ts.prototype.constructor=ts,ts.prototype.isMeshPhysicalMaterial=!0,ts.prototype.copy=function(r){return Ea.prototype.copy.call(this,r),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=r.clearcoat,this.clearcoatMap=r.clearcoatMap,this.clearcoatRoughness=r.clearcoatRoughness,this.clearcoatRoughnessMap=r.clearcoatRoughnessMap,this.clearcoatNormalMap=r.clearcoatNormalMap,this.clearcoatNormalScale.copy(r.clearcoatNormalScale),this.reflectivity=r.reflectivity,r.sheen?this.sheen=(this.sheen||new Pe).copy(r.sheen):this.sheen=null,this.transmission=r.transmission,this.transmissionMap=r.transmissionMap,this};function ns(r){Qe.call(this),this.type="MeshPhongMaterial",this.color=new Pe(16777215),this.specular=new Pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}ns.prototype=Object.create(Qe.prototype),ns.prototype.constructor=ns,ns.prototype.isMeshPhongMaterial=!0,ns.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this};function Xs(r){Qe.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}Xs.prototype=Object.create(Qe.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isMeshToonMaterial=!0,Xs.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.gradientMap=r.gradientMap,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this};function Ys(r){Qe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}Ys.prototype=Object.create(Qe.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isMeshNormalMaterial=!0,Ys.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this};function Js(r){Qe.call(this),this.type="MeshLambertMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}Js.prototype=Object.create(Qe.prototype),Js.prototype.constructor=Js,Js.prototype.isMeshLambertMaterial=!0,Js.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this};function Zs(r){Qe.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fa,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}Zs.prototype=Object.create(Qe.prototype),Zs.prototype.constructor=Zs,Zs.prototype.isMeshMatcapMaterial=!0,Zs.prototype.copy=function(r){return Qe.prototype.copy.call(this,r),this.defines={MATCAP:""},this.color.copy(r.color),this.matcap=r.matcap,this.map=r.map,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this};function Qs(r){fn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}Qs.prototype=Object.create(fn.prototype),Qs.prototype.constructor=Qs,Qs.prototype.isLineDashedMaterial=!0,Qs.prototype.copy=function(r){return fn.prototype.copy.call(this,r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this};var F0=Object.freeze({__proto__:null,ShadowMaterial:js,SpriteMaterial:qo,RawShaderMaterial:io,ShaderMaterial:Sn,PointsMaterial:ji,MeshPhysicalMaterial:ts,MeshStandardMaterial:Ea,MeshPhongMaterial:ns,MeshToonMaterial:Xs,MeshNormalMaterial:Ys,MeshLambertMaterial:Js,MeshDepthMaterial:Zo,MeshDistanceMaterial:Qo,MeshBasicMaterial:Qn,MeshMatcapMaterial:Zs,LineDashedMaterial:Qs,LineBasicMaterial:fn,Material:Qe}),nn={arraySlice:function(t,e,n){return nn.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(o,l){return t[o]-t[l]}for(var n=t.length,i=new Array(n),a=0;a!==n;++a)i[a]=a;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,a=new t.constructor(i),o=0,l=0;l!==i;++o)for(var c=n[o]*e,h=0;h!==e;++h)a[l++]=t[c+h];return a},flattenJSON:function(t,e,n,i){for(var a=1,o=t[0];o!==void 0&&o[i]===void 0;)o=t[a++];if(o!==void 0){var l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),n.push.apply(n,l)),o=t[a++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(n,n.length)),o=t[a++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),n.push(l)),o=t[a++];while(o!==void 0)}},subclip:function(t,e,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:30,o=t.clone();o.name=e;for(var l=[],c=0;c<o.tracks.length;++c){for(var h=o.tracks[c],d=h.getValueSize(),p=[],v=[],m=0;m<h.times.length;++m){var x=h.times[m]*a;if(!(x<n||x>=i)){p.push(h.times[m]);for(var M=0;M<d;++M)v.push(h.values[m*d+M])}}p.length!==0&&(h.times=nn.convertArray(p,h.times.constructor),h.values=nn.convertArray(v,h.values.constructor),l.push(h))}o.tracks=l;for(var A=Infinity,S=0;S<o.tracks.length;++S)A>o.tracks[S].times[0]&&(A=o.tracks[S].times[0]);for(var y=0;y<o.tracks.length;++y)o.tracks[y].shift(-1*A);return o.resetDuration(),o},makeClipAdditive:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:30;i<=0&&(i=30);for(var a=n.tracks.length,o=e/i,l=function(p){var v=n.tracks[p],m=v.ValueTypeName;if(m==="bool"||m==="string")return"continue";var x=t.tracks.find(function(te){return te.name===v.name&&te.ValueTypeName===m});if(x===void 0)return"continue";var M=0,A=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(M=A/3);var S=0,y=x.getValueSize();x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=y/3);var O=v.times.length-1,P=void 0;if(o<=v.times[0]){var L=M,C=A-M;P=nn.arraySlice(v.values,L,C)}else if(o>=v.times[O]){var R=O*A+M,N=R+A-M;P=nn.arraySlice(v.values,R,N)}else{var V=v.createInterpolant(),X=M,z=A-M;V.evaluate(o),P=nn.arraySlice(V.resultBuffer,X,z)}if(m==="quaternion"){var D=new Ot().fromArray(P).normalize().conjugate();D.toArray(P)}for(var H=x.times.length,j=0;j<H;++j){var _=j*y+S;if(m==="quaternion")Ot.multiplyQuaternionsFlat(x.values,_,P,0,x.values,_);else for(var W=y-S*2,Q=0;Q<W;++Q)x.values[_+Q]-=P[Q]}},c=0;c<a;++c)var h=l(c);return t.blendMode=Ao,t}};function jr(r,t,e,n){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(e),this.sampleValues=t,this.valueSize=e}Object.assign(jr.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],a=e[n-1];e:{t:{var o;n:{r:if(!(t<i)){for(var l=n+2;;){if(i===void 0){if(t<a)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,a)}if(n===l)break;if(a=i,i=e[++n],t<i)break t}o=e.length;break n}if(!(t>=a)){var c=e[1];t<c&&(n=2,a=c);for(var h=n-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===h)break;if(i=a,a=e[--n-1],t>=a)break t}o=n,n=0;break n}break e}for(;n<o;){var d=n+o>>>1;t<e[d]?o=d:n=d+1}if(i=e[n],a=e[n-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,a,t)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=t*i,o=0;o!==i;++o)e[o]=n[a+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(jr.prototype,{beforeStart_:jr.prototype.copySampleValue_,afterEnd_:jr.prototype.copySampleValue_});function $f(r,t,e,n){jr.call(this,r,t,e,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}$f.prototype=Object.assign(Object.create(jr.prototype),{constructor:$f,DefaultSettings_:{endingStart:On,endingEnd:On},intervalChanged_:function(t,e,n){var i=this.parameterPositions,a=t-2,o=t+1,l=i[a],c=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case ni:a=t,l=2*e-n;break;case ca:a=i.length-2,l=e+i[a]-i[a+1];break;default:a=t,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case ni:o=t,c=2*n-e;break;case ca:o=1,c=n+i[1]-i[0];break;default:o=t-1,c=e}var h=(n-e)*.5,d=this.valueSize;this._weightPrev=h/(e-l),this._weightNext=h/(c-n),this._offsetPrev=a*d,this._offsetNext=o*d},interpolate_:function(t,e,n,i){for(var a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=t*l,h=c-l,d=this._offsetPrev,p=this._offsetNext,v=this._weightPrev,m=this._weightNext,x=(n-e)/(i-e),M=x*x,A=M*x,S=-v*A+2*v*M-v*x,y=(1+v)*A+(-1.5-2*v)*M+(-.5+v)*x+1,O=(-1-m)*A+(1.5+m)*M+.5*x,P=m*A-m*M,L=0;L!==l;++L)a[L]=S*o[d+L]+y*o[h+L]+O*o[c+L]+P*o[p+L];return a}});function xc(r,t,e,n){jr.call(this,r,t,e,n)}xc.prototype=Object.assign(Object.create(jr.prototype),{constructor:xc,interpolate_:function(t,e,n,i){for(var a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=t*l,h=c-l,d=(n-e)/(i-e),p=1-d,v=0;v!==l;++v)a[v]=o[h+v]*p+o[c+v]*d;return a}});function qf(r,t,e,n){jr.call(this,r,t,e,n)}qf.prototype=Object.assign(Object.create(jr.prototype),{constructor:qf,interpolate_:function(t){return this.copySampleValue_(t-1)}});function _n(r,t,e,n){if(r===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+r);this.name=r,this.times=nn.convertArray(t,this.TimeBufferType),this.values=nn.convertArray(e,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}Object.assign(_n,{toJSON:function(t){var e=t.constructor,n;if(e.toJSON!==void 0)n=e.toJSON(t);else{n={name:t.name,times:nn.convertArray(t.times,Array),values:nn.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}}),Object.assign(_n.prototype,{constructor:_n,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:la,InterpolantFactoryMethodDiscrete:function(t){return new qf(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new xc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new $f(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ss:e=this.InterpolantFactoryMethodDiscrete;break;case la:e=this.InterpolantFactoryMethodLinear;break;case gu:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ss;case this.InterpolantFactoryMethodLinear:return la;case this.InterpolantFactoryMethodSmooth:return gu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(t!==1)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,a=0,o=i-1;a!==i&&n[a]<t;)++a;for(;o!==-1&&n[o]>e;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);var l=this.getValueSize();this.times=nn.arraySlice(n,a,o),this.values=nn.arraySlice(this.values,a*l,o*l)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,l=0;l!==a;l++){var c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),t=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),t=!1;break}o=c}if(i!==void 0&&nn.isTypedArray(i))for(var h=0,d=i.length;h!==d;++h){var p=i[h];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,p),t=!1;break}}return t},optimize:function(){for(var t=nn.arraySlice(this.times),e=nn.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===gu,a=t.length-1,o=1,l=1;l<a;++l){var c=!1,h=t[l],d=t[l+1];if(h!==d&&(l!==1||h!==h[0]))if(i)c=!0;else for(var p=l*n,v=p-n,m=p+n,x=0;x!==n;++x){var M=e[p+x];if(M!==e[v+x]||M!==e[m+x]){c=!0;break}}if(c){if(l!==o){t[o]=t[l];for(var A=l*n,S=o*n,y=0;y!==n;++y)e[S+y]=e[A+y]}++o}}if(a>0){t[o]=t[a];for(var O=a*n,P=o*n,L=0;L!==n;++L)e[P+L]=e[O+L];++o}return o!==t.length?(this.times=nn.arraySlice(t,0,o),this.values=nn.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){var t=nn.arraySlice(this.times,0),e=nn.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}});function eh(r,t,e){_n.call(this,r,t,e)}eh.prototype=Object.assign(Object.create(_n.prototype),{constructor:eh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ss,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function th(r,t,e,n){_n.call(this,r,t,e,n)}th.prototype=Object.assign(Object.create(_n.prototype),{constructor:th,ValueTypeName:"color"});function il(r,t,e,n){_n.call(this,r,t,e,n)}il.prototype=Object.assign(Object.create(_n.prototype),{constructor:il,ValueTypeName:"number"});function nh(r,t,e,n){jr.call(this,r,t,e,n)}nh.prototype=Object.assign(Object.create(jr.prototype),{constructor:nh,interpolate_:function(t,e,n,i){for(var a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-e)/(i-e),h=t*l,d=h+l;h!==d;h+=4)Ot.slerpFlat(a,0,o,h-l,o,h,c);return a}});function Mc(r,t,e,n){_n.call(this,r,t,e,n)}Mc.prototype=Object.assign(Object.create(_n.prototype),{constructor:Mc,ValueTypeName:"quaternion",DefaultInterpolation:la,InterpolantFactoryMethodLinear:function(t){return new nh(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function rh(r,t,e,n){_n.call(this,r,t,e,n)}rh.prototype=Object.assign(Object.create(_n.prototype),{constructor:rh,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ss,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function al(r,t,e,n){_n.call(this,r,t,e,n)}al.prototype=Object.assign(Object.create(_n.prototype),{constructor:al,ValueTypeName:"vector"});function Xr(r,t,e,n){this.name=r,this.tracks=e,this.duration=t!==void 0?t:-1,this.blendMode=n!==void 0?n:Pi,this.uuid=Ke.generateUUID(),this.duration<0&&this.resetDuration()}function N0(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return il;case"vector":case"vector2":case"vector3":case"vector4":return al;case"color":return th;case"quaternion":return Mc;case"bool":case"boolean":return eh;case"string":return rh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function z0(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=N0(r.type);if(r.times===void 0){var e=[],n=[];nn.flattenJSON(r.keys,e,n,"value"),r.times=e,r.values=n}return t.parse!==void 0?t.parse(r):new t(r.name,r.times,r.values,r.interpolation)}Object.assign(Xr,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),a=0,o=n.length;a!==o;++a)e.push(z0(n[a]).scale(i));var l=new Xr(t.name,t.duration,e,t.blendMode);return l.uuid=t.uuid,l},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},a=0,o=n.length;a!==o;++a)e.push(_n.toJSON(n[a]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var a=e.length,o=[],l=0;l<a;l++){var c=[],h=[];c.push((l+a-1)%a,l,(l+1)%a),h.push(0,1,0);var d=nn.getKeyframeOrder(c);c=nn.sortedArray(c,1,d),h=nn.sortedArray(h,1,d),!i&&c[0]===0&&(c.push(a),h.push(h[0])),o.push(new il(".morphTargetInfluences["+e[l].name+"]",c,h).scale(1/n))}return new Xr(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var a=0;a<n.length;a++)if(n[a].name===e)return n[a];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},a=/^([\w-]*?)([\d]+)$/,o=0,l=t.length;o<l;o++){var c=t[o],h=c.name.match(a);if(h&&h.length>1){var d=h[1],p=i[d];p||(i[d]=p=[]),p.push(c)}}var v=[];for(var m in i)v.push(Xr.CreateFromMorphTargetSequence(m,i[m],e,n));return v},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(R,N,V,X,z){if(V.length!==0){var D=[],H=[];nn.flattenJSON(V,D,H,X),D.length!==0&&z.push(new R(N,D,H))}},i=[],a=t.name||"default",o=t.fps||30,l=t.blendMode,c=t.length||-1,h=t.hierarchy||[],d=0;d<h.length;d++){var p=h[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){var v={},m=void 0;for(m=0;m<p.length;m++)if(p[m].morphTargets)for(var x=0;x<p[m].morphTargets.length;x++)v[p[m].morphTargets[x]]=-1;for(var M in v){for(var A=[],S=[],y=0;y!==p[m].morphTargets.length;++y){var O=p[m];A.push(O.time),S.push(O.morphTarget===M?1:0)}i.push(new il(".morphTargetInfluence["+M+"]",A,S))}c=v.length*(o||1)}else{var P=".bones["+e[d].name+"]";n(al,P+".position",p,"pos",i),n(Mc,P+".quaternion",p,"rot",i),n(al,P+".scale",p,"scl",i)}}if(i.length===0)return null;var L=new Xr(a,c,i,l);return L}}),Object.assign(Xr.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var a=this.tracks[n];e=Math.max(e,a.times[a.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Xr(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Xr.toJSON(this)}});var Ks={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Id(r,t,e){var n=this,i=!1,a=0,o=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=r,this.onProgress=t,this.onError=e,this.itemStart=function(h){o++,i===!1&&n.onStart!==void 0&&n.onStart(h,a,o),i=!0},this.itemEnd=function(h){a++,n.onProgress!==void 0&&n.onProgress(h,a,o),a===o&&(i=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(h){n.onError!==void 0&&n.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return c.push(h,d),this},this.removeHandler=function(h){var d=c.indexOf(h);return d!==-1&&c.splice(d,2),this},this.getHandler=function(h){for(var d=0,p=c.length;d<p;d+=2){var v=c[d],m=c[d+1];if(v.global&&(v.lastIndex=0),v.test(h))return m}return null}}var Cv=new Id;function Vt(r){this.manager=r!==void 0?r:Cv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Vt.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise(function(i,a){n.load(t,i,e,a)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Xi={};function Si(r){Vt.call(this,r)}Si.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Si,load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,o=Ks.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;if(Xi[t]!==void 0){Xi[t].push({onLoad:e,onProgress:n,onError:i});return}var l=/^data:(.*?)(;base64)?,(.*)$/,c=t.match(l),h;if(c){var d=c[1],p=!!c[2],v=c[3];v=decodeURIComponent(v),p&&(v=atob(v));try{var m,x=(this.responseType||"").toLowerCase();switch(x){case"arraybuffer":case"blob":for(var M=new Uint8Array(v.length),A=0;A<v.length;A++)M[A]=v.charCodeAt(A);x==="blob"?m=new Blob([M.buffer],{type:d}):m=M.buffer;break;case"document":var S=new DOMParser;m=S.parseFromString(v,d);break;case"json":m=JSON.parse(v);break;default:m=v;break}setTimeout(function(){e&&e(m),a.manager.itemEnd(t)},0)}catch(O){setTimeout(function(){i&&i(O),a.manager.itemError(t),a.manager.itemEnd(t)},0)}}else{Xi[t]=[],Xi[t].push({onLoad:e,onProgress:n,onError:i}),h=new XMLHttpRequest,h.open("GET",t,!0),h.addEventListener("load",function(O){var P=this.response,L=Xi[t];if(delete Xi[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ks.add(t,P);for(var C=0,R=L.length;C<R;C++){var N=L[C];N.onLoad&&N.onLoad(P)}a.manager.itemEnd(t)}else{for(var V=0,X=L.length;V<X;V++){var z=L[V];z.onError&&z.onError(O)}a.manager.itemError(t),a.manager.itemEnd(t)}},!1),h.addEventListener("progress",function(O){for(var P=Xi[t],L=0,C=P.length;L<C;L++){var R=P[L];R.onProgress&&R.onProgress(O)}},!1),h.addEventListener("error",function(O){var P=Xi[t];delete Xi[t];for(var L=0,C=P.length;L<C;L++){var R=P[L];R.onError&&R.onError(O)}a.manager.itemError(t),a.manager.itemEnd(t)},!1),h.addEventListener("abort",function(O){var P=Xi[t];delete Xi[t];for(var L=0,C=P.length;L<C;L++){var R=P[L];R.onError&&R.onError(O)}a.manager.itemError(t),a.manager.itemEnd(t)},!1),this.responseType!==void 0&&(h.responseType=this.responseType),this.withCredentials!==void 0&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var y in this.requestHeader)h.setRequestHeader(y,this.requestHeader[y]);h.send(null)}return a.manager.itemStart(t),h},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}});function Bd(r){Vt.call(this,r)}Bd.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Bd,load:function(t,e,n,i){var a=this,o=new Si(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(l){try{e(a.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),a.manager.itemError(t)}},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Xr.parse(t[n]);e.push(i)}return e}});function Dd(r){Vt.call(this,r)}Dd.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Dd,load:function(t,e,n,i){var a=this,o=[],l=new el;l.image=o;var c=new Si(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);var h=0;function d(m){c.load(t[m],function(x){var M=a.parse(x,!0);o[m]={width:M.width,height:M.height,format:M.format,mipmaps:M.mipmaps},h+=1,h===6&&(M.mipmapCount===1&&(l.minFilter=Tn),l.format=M.format,l.needsUpdate=!0,e&&e(l))},n,i)}if(Array.isArray(t))for(var p=0,v=t.length;p<v;++p)d(p);else c.load(t,function(m){var x=a.parse(m,!0);if(x.isCubemap)for(var M=x.mipmaps.length/x.mipmapCount,A=0;A<M;A++){o[A]={mipmaps:[]};for(var S=0;S<x.mipmapCount;S++)o[A].mipmaps.push(x.mipmaps[A*x.mipmapCount+S]),o[A].format=x.format,o[A].width=x.width,o[A].height=x.height}else l.image.width=x.width,l.image.height=x.height,l.mipmaps=x.mipmaps;x.mipmapCount===1&&(l.minFilter=Tn),l.format=x.format,l.needsUpdate=!0,e&&e(l)},n,i);return l}});function ol(r){Vt.call(this,r)}ol.prototype=Object.assign(Object.create(Vt.prototype),{constructor:ol,load:function(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,o=Ks.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1),Ks.add(t,this),e&&e(this),a.manager.itemEnd(t)}function h(d){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1),i&&i(d),a.manager.itemError(t),a.manager.itemEnd(t)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(t),l.src=t,l}});function ih(r){Vt.call(this,r)}ih.prototype=Object.assign(Object.create(Vt.prototype),{constructor:ih,load:function(t,e,n,i){var a=new cn,o=new ol(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var l=0;function c(d){o.load(t[d],function(p){a.images[d]=p,l++,l===6&&(a.needsUpdate=!0,e&&e(a))},void 0,i)}for(var h=0;h<t.length;++h)c(h);return a}});function ah(r){Vt.call(this,r)}ah.prototype=Object.assign(Object.create(Vt.prototype),{constructor:ah,load:function(t,e,n,i){var a=this,o=new qn,l=new Si(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(t,function(c){var h=a.parse(c);!h||(h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:Un,o.wrapT=h.wrapT!==void 0?h.wrapT:Un,o.magFilter=h.magFilter!==void 0?h.magFilter:Tn,o.minFilter=h.minFilter!==void 0?h.minFilter:Tn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=xo),h.mipmapCount===1&&(o.minFilter=Tn),o.needsUpdate=!0,e&&e(o,h))},n,i),o}});function oh(r){Vt.call(this,r)}oh.prototype=Object.assign(Object.create(Vt.prototype),{constructor:oh,load:function(t,e,n,i){var a=new $e,o=new ol(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(l){a.image=l;var c=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;a.format=c?qt:Wt,a.needsUpdate=!0,e!==void 0&&e(a)},n,i),a}});function je(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(je.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],n,i=this.getPoint(0),a=0;e.push(0);for(var o=1;o<=t;o++)n=this.getPoint(o/t),a+=n.distanceTo(i),e.push(a),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n=this.getLengths(),i=0,a=n.length,o;e?o=e:o=t*n[a-1];for(var l=0,c=a-1,h;l<=c;)if(i=Math.floor(l+(c-l)/2),h=n[i]-o,h<0)l=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(a-1);var d=n[i],p=n[i+1],v=p-d,m=(o-d)/v,x=(i+m)/(a-1);return x},getTangent:function(t,e){var n=1e-4,i=t-n,a=t+n;i<0&&(i=0),a>1&&(a=1);var o=this.getPoint(i),l=this.getPoint(a),c=e||(o.isVector2?new se:new I);return c.copy(l).sub(o).normalize(),c},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new I,i=[],a=[],o=[],l=new I,c=new ct,h=0;h<=t;h++){var d=h/t;i[h]=this.getTangentAt(d,new I),i[h].normalize()}a[0]=new I,o[0]=new I;var p=Number.MAX_VALUE,v=Math.abs(i[0].x),m=Math.abs(i[0].y),x=Math.abs(i[0].z);v<=p&&(p=v,n.set(1,0,0)),m<=p&&(p=m,n.set(0,1,0)),x<=p&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],l),o[0].crossVectors(i[0],a[0]);for(var M=1;M<=t;M++){if(a[M]=a[M-1].clone(),o[M]=o[M-1].clone(),l.crossVectors(i[M-1],i[M]),l.length()>Number.EPSILON){l.normalize();var A=Math.acos(Ke.clamp(i[M-1].dot(i[M]),-1,1));a[M].applyMatrix4(c.makeRotationAxis(l,A))}o[M].crossVectors(i[M],a[M])}if(e===!0){var S=Math.acos(Ke.clamp(a[0].dot(a[t]),-1,1));S/=t,i[0].dot(l.crossVectors(a[0],a[t]))>0&&(S=-S);for(var y=1;y<=t;y++)a[y].applyMatrix4(c.makeRotationAxis(i[y],S*y)),o[y].crossVectors(i[y],a[y])}return{tangents:i,normals:a,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function Yr(r,t,e,n,i,a,o,l){je.call(this),this.type="EllipseCurve",this.aX=r||0,this.aY=t||0,this.xRadius=e||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=l||0}Yr.prototype=Object.create(je.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isEllipseCurve=!0,Yr.prototype.getPoint=function(r,t){for(var e=t||new se,n=Math.PI*2,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(a?i=0:i=n),this.aClockwise===!0&&!a&&(i===n?i=-n:i=i-n);var o=this.aStartAngle+r*i,l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){var h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,v=c-this.aY;l=p*h-v*d+this.aX,c=p*d+v*h+this.aY}return e.set(l,c)},Yr.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this},Yr.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r},Yr.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this};function sl(r,t,e,n,i,a){Yr.call(this,r,t,e,e,n,i,a),this.type="ArcCurve"}sl.prototype=Object.create(Yr.prototype),sl.prototype.constructor=sl,sl.prototype.isArcCurve=!0;function Fd(){var r=0,t=0,e=0,n=0;function i(a,o,l,c){r=a,t=l,e=-3*a+3*o-2*l-c,n=2*a-2*o+l+c}return{initCatmullRom:function(o,l,c,h,d){i(l,c,d*(c-o),d*(h-l))},initNonuniformCatmullRom:function(o,l,c,h,d,p,v){var m=(l-o)/d-(c-o)/(d+p)+(c-l)/p,x=(c-l)/p-(h-l)/(p+v)+(h-c)/v;m*=p,x*=p,i(l,c,m,x)},calc:function(o){var l=o*o,c=l*o;return r+t*o+e*l+n*c}}}var sh=new I,Nd=new Fd,zd=new Fd,Gd=new Fd;function er(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"centripetal",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;je.call(this),this.type="CatmullRomCurve3",this.points=r,this.closed=t,this.curveType=e,this.tension=n}er.prototype=Object.create(je.prototype),er.prototype.constructor=er,er.prototype.isCatmullRomCurve3=!0,er.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=t,n=this.points,i=n.length,a=(i-(this.closed?0:1))*r,o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:l===0&&o===i-1&&(o=i-2,l=1);var c,h;this.closed||o>0?c=n[(o-1)%i]:(sh.subVectors(n[0],n[1]).add(n[0]),c=sh);var d=n[o%i],p=n[(o+1)%i];if(this.closed||o+2<i?h=n[(o+2)%i]:(sh.subVectors(n[i-1],n[i-2]).add(n[i-1]),h=sh),this.curveType==="centripetal"||this.curveType==="chordal"){var v=this.curveType==="chordal"?.5:.25,m=Math.pow(c.distanceToSquared(d),v),x=Math.pow(d.distanceToSquared(p),v),M=Math.pow(p.distanceToSquared(h),v);x<1e-4&&(x=1),m<1e-4&&(m=x),M<1e-4&&(M=x),Nd.initNonuniformCatmullRom(c.x,d.x,p.x,h.x,m,x,M),zd.initNonuniformCatmullRom(c.y,d.y,p.y,h.y,m,x,M),Gd.initNonuniformCatmullRom(c.z,d.z,p.z,h.z,m,x,M)}else this.curveType==="catmullrom"&&(Nd.initCatmullRom(c.x,d.x,p.x,h.x,this.tension),zd.initCatmullRom(c.y,d.y,p.y,h.y,this.tension),Gd.initCatmullRom(c.z,d.z,p.z,h.z,this.tension));return e.set(Nd.calc(l),zd.calc(l),Gd.calc(l)),e},er.prototype.copy=function(r){je.prototype.copy.call(this,r),this.points=[];for(var t=0,e=r.points.length;t<e;t++){var n=r.points[t];this.points.push(n.clone())}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this},er.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);r.points=[];for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];r.points.push(n.toArray())}return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r},er.prototype.fromJSON=function(r){je.prototype.fromJSON.call(this,r),this.points=[];for(var t=0,e=r.points.length;t<e;t++){var n=r.points[t];this.points.push(new I().fromArray(n))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this};function Rv(r,t,e,n,i){var a=(n-t)*.5,o=(i-e)*.5,l=r*r,c=r*l;return(2*e-2*n+a+o)*c+(-3*e+3*n-2*a-o)*l+a*r+e}function G0(r,t){var e=1-r;return e*e*t}function U0(r,t){return 2*(1-r)*r*t}function H0(r,t){return r*r*t}function Sc(r,t,e,n){return G0(r,t)+U0(r,e)+H0(r,n)}function k0(r,t){var e=1-r;return e*e*e*t}function V0(r,t){var e=1-r;return 3*e*e*r*t}function _0(r,t){return 3*(1-r)*r*r*t}function W0(r,t){return r*r*r*t}function wc(r,t,e,n,i){return k0(r,t)+V0(r,e)+_0(r,n)+W0(r,i)}function Yi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new se,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new se,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new se;je.call(this),this.type="CubicBezierCurve",this.v0=r,this.v1=t,this.v2=e,this.v3=n}Yi.prototype=Object.create(je.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isCubicBezierCurve=!0,Yi.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=t,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return e.set(wc(r,n.x,i.x,a.x,o.x),wc(r,n.y,i.y,a.y,o.y)),e},Yi.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},Yi.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},Yi.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this};function Ta(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new I,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new I,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new I;je.call(this),this.type="CubicBezierCurve3",this.v0=r,this.v1=t,this.v2=e,this.v3=n}Ta.prototype=Object.create(je.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isCubicBezierCurve3=!0,Ta.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=t,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return e.set(wc(r,n.x,i.x,a.x,o.x),wc(r,n.y,i.y,a.y,o.y),wc(r,n.z,i.z,a.z,o.z)),e},Ta.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},Ta.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},Ta.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this};function Pr(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new se,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se;je.call(this),this.type="LineCurve",this.v1=r,this.v2=t}Pr.prototype=Object.create(je.prototype),Pr.prototype.constructor=Pr,Pr.prototype.isLineCurve=!0,Pr.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=t;return r===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(r).add(this.v1)),e},Pr.prototype.getPointAt=function(r,t){return this.getPoint(r,t)},Pr.prototype.getTangent=function(r,t){var e=t||new se;return e.copy(this.v2).sub(this.v1).normalize(),e},Pr.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Pr.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Pr.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this};function Ji(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new I,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I;je.call(this),this.type="LineCurve3",this.v1=r,this.v2=t}Ji.prototype=Object.create(je.prototype),Ji.prototype.constructor=Ji,Ji.prototype.isLineCurve3=!0,Ji.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=t;return r===1?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(r).add(this.v1)),e},Ji.prototype.getPointAt=function(r,t){return this.getPoint(r,t)},Ji.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Ji.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Ji.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this};function Zi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new se,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new se;je.call(this),this.type="QuadraticBezierCurve",this.v0=r,this.v1=t,this.v2=e}Zi.prototype=Object.create(je.prototype),Zi.prototype.constructor=Zi,Zi.prototype.isQuadraticBezierCurve=!0,Zi.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=t,n=this.v0,i=this.v1,a=this.v2;return e.set(Sc(r,n.x,i.x,a.x),Sc(r,n.y,i.y,a.y)),e},Zi.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Zi.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Zi.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this};function Aa(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new I,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new I;je.call(this),this.type="QuadraticBezierCurve3",this.v0=r,this.v1=t,this.v2=e}Aa.prototype=Object.create(je.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isQuadraticBezierCurve3=!0,Aa.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I,e=t,n=this.v0,i=this.v1,a=this.v2;return e.set(Sc(r,n.x,i.x,a.x),Sc(r,n.y,i.y,a.y),Sc(r,n.z,i.z,a.z)),e},Aa.prototype.copy=function(r){return je.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Aa.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Aa.prototype.fromJSON=function(r){return je.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this};function Qi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];je.call(this),this.type="SplineCurve",this.points=r}Qi.prototype=Object.create(je.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isSplineCurve=!0,Qi.prototype.getPoint=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new se,e=t,n=this.points,i=(n.length-1)*r,a=Math.floor(i),o=i-a,l=n[a===0?a:a-1],c=n[a],h=n[a>n.length-2?n.length-1:a+1],d=n[a>n.length-3?n.length-1:a+2];return e.set(Rv(o,l.x,c.x,h.x,d.x),Rv(o,l.y,c.y,h.y,d.y)),e},Qi.prototype.copy=function(r){je.prototype.copy.call(this,r),this.points=[];for(var t=0,e=r.points.length;t<e;t++){var n=r.points[t];this.points.push(n.clone())}return this},Qi.prototype.toJSON=function(){var r=je.prototype.toJSON.call(this);r.points=[];for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];r.points.push(n.toArray())}return r},Qi.prototype.fromJSON=function(r){je.prototype.fromJSON.call(this,r),this.points=[];for(var t=0,e=r.points.length;t<e;t++){var n=r.points[t];this.points.push(new se().fromArray(n))}return this};var Ud=Object.freeze({__proto__:null,ArcCurve:sl,CatmullRomCurve3:er,CubicBezierCurve:Yi,CubicBezierCurve3:Ta,EllipseCurve:Yr,LineCurve:Pr,LineCurve3:Ji,QuadraticBezierCurve:Zi,QuadraticBezierCurve3:Aa,SplineCurve:Qi});function ao(){je.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}ao.prototype=Object.assign(Object.create(je.prototype),{constructor:ao,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Pr(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var a=n[i]-e,o=this.curves[i],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:12,e=[],n,i=0,a=this.curves;i<a.length;i++)for(var o=a[i],l=o&&o.isEllipseCurve?t*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,c=o.getPoints(l),h=0;h<c.length;h++){var d=c[h];n&&n.equals(d)||(e.push(d),n=d)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){je.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=je.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){je.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(new Ud[i.type]().fromJSON(i))}return this}});function Ki(r){ao.call(this),this.type="Path",this.currentPoint=new se,r&&this.setFromPoints(r)}Ki.prototype=Object.assign(Object.create(ao.prototype),{constructor:Ki,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new Pr(this.currentPoint.clone(),new se(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){var a=new Zi(this.currentPoint.clone(),new se(t,e),new se(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,a,o){var l=new Yi(this.currentPoint.clone(),new se(t,e),new se(n,i),new se(a,o));return this.curves.push(l),this.currentPoint.set(a,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Qi(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,a,o){var l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+l,e+c,n,i,a,o),this},absarc:function(t,e,n,i,a,o){return this.absellipse(t,e,n,n,i,a,o),this},ellipse:function(t,e,n,i,a,o,l,c){var h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+h,e+d,n,i,a,o,l,c),this},absellipse:function(t,e,n,i,a,o,l,c){var h=new Yr(t,e,n,i,a,o,l,c);if(this.curves.length>0){var d=h.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(h);var p=h.getPoint(1);return this.currentPoint.copy(p),this},copy:function(t){return ao.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=ao.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return ao.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function rs(r){Ki.call(this,r),this.uuid=Ke.generateUUID(),this.type="Shape",this.holes=[]}rs.prototype=Object.assign(Object.create(Ki.prototype),{constructor:rs,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ki.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Ki.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Ki.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(new Ki().fromJSON(i))}return this}});function Qt(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Fe.call(this),this.type="Light",this.color=new Pe(r),this.intensity=t}Qt.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Qt,isLight:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Fe.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function uh(r,t,e){Qt.call(this,r,e),this.type="HemisphereLight",this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.groundColor=new Pe(t)}uh.prototype=Object.assign(Object.create(Qt.prototype),{constructor:uh,isHemisphereLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function oo(r){this.camera=r,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new se(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wo,this._frameExtents=new se(1,1),this._viewportCount=1,this._viewports=[new it(0,0,1,1)]}Object.assign(oo.prototype,{_projScreenMatrix:new ct,_lightPositionWorld:new I,_lookTarget:new I,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,a=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),a.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(a),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function Hd(){oo.call(this,new xt(50,1,.5,500)),this.focus=1}Hd.prototype=Object.assign(Object.create(oo.prototype),{constructor:Hd,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=Ke.RAD2DEG*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=t.distance||e.far;(n!==e.fov||i!==e.aspect||a!==e.far)&&(e.fov=n,e.aspect=i,e.far=a,e.updateProjectionMatrix()),oo.prototype.updateMatrices.call(this,t)}});function lh(r,t,e,n,i,a){Qt.call(this,r,t),this.type="SpotLight",this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.target=new Fe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(l){this.intensity=l/Math.PI}}),this.distance=e!==void 0?e:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=a!==void 0?a:1,this.shadow=new Hd}lh.prototype=Object.assign(Object.create(Qt.prototype),{constructor:lh,isSpotLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function kd(){oo.call(this,new xt(90,1,.5,500)),this._frameExtents=new se(4,2),this._viewportCount=6,this._viewports=[new it(2,1,1,1),new it(0,1,1,1),new it(3,1,1,1),new it(1,1,1,1),new it(3,0,1,1),new it(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}kd.prototype=Object.assign(Object.create(oo.prototype),{constructor:kd,isPointLightShadow:!0,updateMatrices:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.camera,i=this.matrix,a=this._lightPositionWorld,o=this._lookTarget,l=this._projScreenMatrix;a.setFromMatrixPosition(t.matrixWorld),n.position.copy(a),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-a.x,-a.y,-a.z),l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l)}});function ch(r,t,e,n){Qt.call(this,r,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}}),this.distance=e!==void 0?e:0,this.decay=n!==void 0?n:1,this.shadow=new kd}ch.prototype=Object.assign(Object.create(Qt.prototype),{constructor:ch,isPointLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function $s(r,t,e,n,i,a){Kn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r!==void 0?r:-1,this.right=t!==void 0?t:1,this.top=e!==void 0?e:1,this.bottom=n!==void 0?n:-1,this.near=i!==void 0?i:.1,this.far=a!==void 0?a:2e3,this.updateProjectionMatrix()}$s.prototype=Object.assign(Object.create(Kn.prototype),{constructor:$s,isOrthographicCamera:!0,copy:function(t,e){return Kn.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=n-t,o=n+t,l=i+e,c=i-e;if(this.view!==null&&this.view.enabled){var h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,o=a+h*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=Fe.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function Vd(){oo.call(this,new $s(-5,5,5,-5,.5,500))}Vd.prototype=Object.assign(Object.create(oo.prototype),{constructor:Vd,isDirectionalLightShadow:!0,updateMatrices:function(t){oo.prototype.updateMatrices.call(this,t)}});function fh(r,t){Qt.call(this,r,t),this.type="DirectionalLight",this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.target=new Fe,this.shadow=new Vd}fh.prototype=Object.assign(Object.create(Qt.prototype),{constructor:fh,isDirectionalLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function hh(r,t){Qt.call(this,r,t),this.type="AmbientLight"}hh.prototype=Object.assign(Object.create(Qt.prototype),{constructor:hh,isAmbientLight:!0});function dh(r,t,e,n){Qt.call(this,r,t),this.type="RectAreaLight",this.width=e!==void 0?e:10,this.height=n!==void 0?n:10}dh.prototype=Object.assign(Object.create(Qt.prototype),{constructor:dh,isRectAreaLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Qt.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var Pv=function(){function r(){Object(pe.a)(this,r),Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new I)}return Object(Ge.a)(r,[{key:"set",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,n){var i=e.x,a=e.y,o=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.282095),n.addScaledVector(l[1],.488603*a),n.addScaledVector(l[2],.488603*o),n.addScaledVector(l[3],.488603*i),n.addScaledVector(l[4],1.092548*(i*a)),n.addScaledVector(l[5],1.092548*(a*o)),n.addScaledVector(l[6],.315392*(3*o*o-1)),n.addScaledVector(l[7],1.092548*(i*o)),n.addScaledVector(l[8],.546274*(i*i-a*a)),n}},{key:"getIrradianceAt",value:function(e,n){var i=e.x,a=e.y,o=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.886227),n.addScaledVector(l[1],2*.511664*a),n.addScaledVector(l[2],2*.511664*o),n.addScaledVector(l[3],2*.511664*i),n.addScaledVector(l[4],2*.429043*i*a),n.addScaledVector(l[5],2*.429043*a*o),n.addScaledVector(l[6],.743125*o*o-.247708),n.addScaledVector(l[7],2*.429043*i*o),n.addScaledVector(l[8],.429043*(i*i-a*a)),n}},{key:"add",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}},{key:"addScaledSH",value:function(e,n){for(var i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}},{key:"scale",value:function(e){for(var n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}},{key:"lerp",value:function(e,n){for(var i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}},{key:"equals",value:function(e){for(var n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.coefficients,a=0;a<9;a++)i[a].fromArray(e,n+a*3);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.coefficients,a=0;a<9;a++)i[a].toArray(e,n+a*3);return e}}],[{key:"getBasisAt",value:function(e,n){var i=e.x,a=e.y,o=e.z;n[0]=.282095,n[1]=.488603*a,n[2]=.488603*o,n[3]=.488603*i,n[4]=1.092548*i*a,n[5]=1.092548*a*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*i*o,n[8]=.546274*(i*i-a*a)}}]),r}();function wi(r,t){Qt.call(this,void 0,t),this.type="LightProbe",this.sh=r!==void 0?r:new Pv}wi.prototype=Object.assign(Object.create(Qt.prototype),{constructor:wi,isLightProbe:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=Qt.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}});function ph(r){Vt.call(this,r),this.textures={}}ph.prototype=Object.assign(Object.create(Vt.prototype),{constructor:ph,load:function(t,e,n,i){var a=this,o=new Si(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(l){try{e(a.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),a.manager.itemError(t)}},n,i)},parse:function(t){var e=this.textures;function n(h){return e[h]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",h),e[h]}var i=new F0[t.type];if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=new Pe().setHex(t.sheen)),t.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(t.specular),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==1&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(i.skinning=t.skinning),t.morphTargets!==void 0&&(i.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(i.morphNormals=t.morphNormals),t.dithering!==void 0&&(i.dithering=t.dithering),t.vertexTangents!==void 0&&(i.vertexTangents=t.vertexTangents),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(var a in t.uniforms){var o=t.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=n(o.value);break;case"c":i.uniforms[a].value=new Pe().setHex(o.value);break;case"v2":i.uniforms[a].value=new se().fromArray(o.value);break;case"v3":i.uniforms[a].value=new I().fromArray(o.value);break;case"v4":i.uniforms[a].value=new it().fromArray(o.value);break;case"m3":i.uniforms[a].value=new In().fromArray(o.value);break;case"m4":i.uniforms[a].value=new ct().fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var l in t.extensions)i.extensions[l]=t.extensions[l];if(t.shading!==void 0&&(i.flatShading=t.shading===1),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){var c=t.normalScale;Array.isArray(c)===!1&&(c=[c,c]),i.normalScale=new se().fromArray(c)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new se().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(i.transmission=t.transmission),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});var _d={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(a){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function bc(){Ne.call(this),this.type="InstancedBufferGeometry",this.instanceCount=Infinity}bc.prototype=Object.assign(Object.create(Ne.prototype),{constructor:bc,isInstancedBufferGeometry:!0,copy:function(t){return Ne.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=Ne.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function vh(r,t,e,n){typeof e=="number"&&(n=e,e=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),We.call(this,r,t,e),this.meshPerAttribute=n||1}vh.prototype=Object.assign(Object.create(We.prototype),{constructor:vh,isInstancedBufferAttribute:!0,copy:function(t){return We.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=We.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function mh(r){Vt.call(this,r)}mh.prototype=Object.assign(Object.create(Vt.prototype),{constructor:mh,load:function(t,e,n,i){var a=this,o=new Si(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(l){try{e(a.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),a.manager.itemError(t)}},n,i)},parse:function(t){var e={},n={};function i(Q,te){if(e[te]!==void 0)return e[te];var oe=Q.interleavedBuffers,he=oe[te],re=a(Q,he.buffer),de=Ns(he.type,re),Me=new Wr(de,he.stride);return Me.uuid=he.uuid,e[te]=Me,Me}function a(Q,te){if(n[te]!==void 0)return n[te];var oe=Q.arrayBuffers,he=oe[te],re=new Uint32Array(he).buffer;return n[te]=re,re}var o=t.isInstancedBufferGeometry?new bc:new Ne,l=t.data.index;if(l!==void 0){var c=Ns(l.type,l.array);o.setIndex(new We(c,1))}var h=t.data.attributes;for(var d in h){var p=h[d],v=void 0;if(p.isInterleavedBufferAttribute){var m=i(t.data,p.data);v=new $o(m,p.itemSize,p.offset,p.normalized)}else{var x=Ns(p.type,p.array),M=p.isInstancedBufferAttribute?vh:We;v=new M(x,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),o.setAttribute(d,v)}var A=t.data.morphAttributes;if(A)for(var S in A){for(var y=A[S],O=[],P=0,L=y.length;P<L;P++){var C=y[P],R=void 0;if(C.isInterleavedBufferAttribute){var N=i(t.data,C.data);R=new $o(N,C.itemSize,C.offset,C.normalized)}else{var V=Ns(C.type,C.array);R=new We(V,C.itemSize,C.normalized)}C.name!==void 0&&(R.name=C.name),O.push(R)}o.morphAttributes[S]=O}var X=t.data.morphTargetsRelative;X&&(o.morphTargetsRelative=!0);var z=t.data.groups||t.data.drawcalls||t.data.offsets;if(z!==void 0)for(var D=0,H=z.length;D!==H;++D){var j=z[D];o.addGroup(j.start,j.count,j.materialIndex)}var _=t.data.boundingSphere;if(_!==void 0){var W=new I;_.center!==void 0&&W.fromArray(_.center),o.boundingSphere=new ci(W,_.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}});var j0=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){return Object(pe.a)(this,e),t.call(this,n)}return Object(Ge.a)(e,[{key:"load",value:function(i,a,o,l){var c=this,h=this.path===""?_d.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||h;var d=new Si(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(i,function(p){var v=null;try{v=JSON.parse(p)}catch(x){l!==void 0&&l(x),console.error("THREE:ObjectLoader: Can't parse "+i+".",x.message);return}var m=v.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+i);return}c.parse(v,a)},o,l)}},{key:"parse",value:function(i,a){var o=this.parseAnimations(i.animations),l=this.parseShapes(i.shapes),c=this.parseGeometries(i.geometries,l),h=this.parseImages(i.images,function(){a!==void 0&&a(v)}),d=this.parseTextures(i.textures,h),p=this.parseMaterials(i.materials,d),v=this.parseObject(i.object,c,p,o),m=this.parseSkeletons(i.skeletons,v);if(this.bindSkeletons(v,m),a!==void 0){var x=!1;for(var M in h)if(h[M]instanceof HTMLImageElement){x=!0;break}x===!1&&a(v)}return v}},{key:"parseShapes",value:function(i){var a={};if(i!==void 0)for(var o=0,l=i.length;o<l;o++){var c=new rs().fromJSON(i[o]);a[c.uuid]=c}return a}},{key:"parseSkeletons",value:function(i,a){var o={},l={};if(a.traverse(function(p){p.isBone&&(l[p.uuid]=p)}),i!==void 0)for(var c=0,h=i.length;c<h;c++){var d=new lc().fromJSON(i[c],l);o[d.uuid]=d}return o}},{key:"parseGeometries",value:function(i,a){var o={},l;if(i!==void 0)for(var c=new mh,h=0,d=i.length;h<d;h++){var p=void 0,v=i[h];switch(v.type){case"PlaneGeometry":case"PlaneBufferGeometry":p=new hr[v.type](v.width,v.height,v.widthSegments,v.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":p=new hr[v.type](v.width,v.height,v.depth,v.widthSegments,v.heightSegments,v.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":p=new hr[v.type](v.radius,v.segments,v.thetaStart,v.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":p=new hr[v.type](v.radiusTop,v.radiusBottom,v.height,v.radialSegments,v.heightSegments,v.openEnded,v.thetaStart,v.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":p=new hr[v.type](v.radius,v.height,v.radialSegments,v.heightSegments,v.openEnded,v.thetaStart,v.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":p=new hr[v.type](v.radius,v.widthSegments,v.heightSegments,v.phiStart,v.phiLength,v.thetaStart,v.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":p=new hr[v.type](v.radius,v.detail);break;case"RingGeometry":case"RingBufferGeometry":p=new hr[v.type](v.innerRadius,v.outerRadius,v.thetaSegments,v.phiSegments,v.thetaStart,v.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":p=new hr[v.type](v.radius,v.tube,v.radialSegments,v.tubularSegments,v.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":p=new hr[v.type](v.radius,v.tube,v.tubularSegments,v.radialSegments,v.p,v.q);break;case"TubeGeometry":case"TubeBufferGeometry":p=new hr[v.type](new Ud[v.path.type]().fromJSON(v.path),v.tubularSegments,v.radius,v.radialSegments,v.closed);break;case"LatheGeometry":case"LatheBufferGeometry":p=new hr[v.type](v.points,v.segments,v.phiStart,v.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":p=new hr[v.type](v.vertices,v.indices,v.radius,v.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(var m=0,x=v.shapes.length;m<x;m++){var M=a[v.shapes[m]];l.push(M)}p=new hr[v.type](l,v.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":l=[];for(var A=0,S=v.shapes.length;A<S;A++){var y=a[v.shapes[A]];l.push(y)}var O=v.options.extrudePath;O!==void 0&&(v.options.extrudePath=new Ud[O.type]().fromJSON(O)),p=new hr[v.type](l,v.options);break;case"BufferGeometry":case"InstancedBufferGeometry":p=c.parse(v);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+v.type+'"');continue}p.uuid=v.uuid,v.name!==void 0&&(p.name=v.name),p.isBufferGeometry===!0&&v.userData!==void 0&&(p.userData=v.userData),o[v.uuid]=p}return o}},{key:"parseMaterials",value:function(i,a){var o={},l={};if(i!==void 0){var c=new ph;c.setTextures(a);for(var h=0,d=i.length;h<d;h++){var p=i[h];if(p.type==="MultiMaterial"){for(var v=[],m=0;m<p.materials.length;m++){var x=p.materials[m];o[x.uuid]===void 0&&(o[x.uuid]=c.parse(x)),v.push(o[x.uuid])}l[p.uuid]=v}else o[p.uuid]===void 0&&(o[p.uuid]=c.parse(p)),l[p.uuid]=o[p.uuid]}}return l}},{key:"parseAnimations",value:function(i){var a={};if(i!==void 0)for(var o=0;o<i.length;o++){var l=i[o],c=Xr.parse(l);a[c.uuid]=c}return a}},{key:"parseImages",value:function(i,a){var o=this,l={},c;function h(L){return o.manager.itemStart(L),c.load(L,function(){o.manager.itemEnd(L)},void 0,function(){o.manager.itemError(L),o.manager.itemEnd(L)})}function d(L){if(typeof L=="string"){var C=L,R=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(C)?C:o.resourcePath+C;return h(R)}else return L.data?{data:Ns(L.type,L.data),width:L.width,height:L.height}:null}if(i!==void 0&&i.length>0){var p=new Id(a);c=new ol(p),c.setCrossOrigin(this.crossOrigin);for(var v=0,m=i.length;v<m;v++){var x=i[v],M=x.url;if(Array.isArray(M)){l[x.uuid]=[];for(var A=0,S=M.length;A<S;A++){var y=M[A],O=d(y);O!==null&&(O instanceof HTMLImageElement?l[x.uuid].push(O):l[x.uuid].push(new qn(O.data,O.width,O.height)))}}else{var P=d(x.url);P!==null&&(l[x.uuid]=P)}}}return l}},{key:"parseTextures",value:function(i,a){function o(m,x){return typeof m=="number"?m:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",m),x[m])}var l={};if(i!==void 0)for(var c=0,h=i.length;c<h;c++){var d=i[c];d.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',d.uuid),a[d.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",d.image);var p=void 0,v=a[d.image];Array.isArray(v)?(p=new cn(v),v.length===6&&(p.needsUpdate=!0)):(v&&v.data?p=new qn(v.data,v.width,v.height):p=new $e(v),v&&(p.needsUpdate=!0)),p.uuid=d.uuid,d.name!==void 0&&(p.name=d.name),d.mapping!==void 0&&(p.mapping=o(d.mapping,X0)),d.offset!==void 0&&p.offset.fromArray(d.offset),d.repeat!==void 0&&p.repeat.fromArray(d.repeat),d.center!==void 0&&p.center.fromArray(d.center),d.rotation!==void 0&&(p.rotation=d.rotation),d.wrap!==void 0&&(p.wrapS=o(d.wrap[0],Ov),p.wrapT=o(d.wrap[1],Ov)),d.format!==void 0&&(p.format=d.format),d.type!==void 0&&(p.type=d.type),d.encoding!==void 0&&(p.encoding=d.encoding),d.minFilter!==void 0&&(p.minFilter=o(d.minFilter,Iv)),d.magFilter!==void 0&&(p.magFilter=o(d.magFilter,Iv)),d.anisotropy!==void 0&&(p.anisotropy=d.anisotropy),d.flipY!==void 0&&(p.flipY=d.flipY),d.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=d.premultiplyAlpha),d.unpackAlignment!==void 0&&(p.unpackAlignment=d.unpackAlignment),l[d.uuid]=p}return l}},{key:"parseObject",value:function(i,a,o,l){var c;function h(N){return a[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",N),a[N]}function d(N){if(N!==void 0){if(Array.isArray(N)){for(var V=[],X=0,z=N.length;X<z;X++){var D=N[X];o[D]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",D),V.push(o[D])}return V}return o[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",N),o[N]}}var p,v;switch(i.type){case"Scene":c=new Pf,i.background!==void 0&&Number.isInteger(i.background)&&(c.background=new Pe(i.background)),i.fog!==void 0&&(i.fog.type==="Fog"?c.fog=new Jp(i.fog.color,i.fog.near,i.fog.far):i.fog.type==="FogExp2"&&(c.fog=new Yp(i.fog.color,i.fog.density)));break;case"PerspectiveCamera":c=new xt(i.fov,i.aspect,i.near,i.far),i.focus!==void 0&&(c.focus=i.focus),i.zoom!==void 0&&(c.zoom=i.zoom),i.filmGauge!==void 0&&(c.filmGauge=i.filmGauge),i.filmOffset!==void 0&&(c.filmOffset=i.filmOffset),i.view!==void 0&&(c.view=Object.assign({},i.view));break;case"OrthographicCamera":c=new $s(i.left,i.right,i.top,i.bottom,i.near,i.far),i.zoom!==void 0&&(c.zoom=i.zoom),i.view!==void 0&&(c.view=Object.assign({},i.view));break;case"AmbientLight":c=new hh(i.color,i.intensity);break;case"DirectionalLight":c=new fh(i.color,i.intensity);break;case"PointLight":c=new ch(i.color,i.intensity,i.distance,i.decay);break;case"RectAreaLight":c=new dh(i.color,i.intensity,i.width,i.height);break;case"SpotLight":c=new lh(i.color,i.intensity,i.distance,i.angle,i.penumbra,i.decay);break;case"HemisphereLight":c=new uh(i.color,i.groundColor,i.intensity);break;case"LightProbe":c=new wi().fromJSON(i);break;case"SkinnedMesh":p=h(i.geometry),v=d(i.material),c=new sc(p,v),i.bindMode!==void 0&&(c.bindMode=i.bindMode),i.bindMatrix!==void 0&&c.bindMatrix.fromArray(i.bindMatrix),i.skeleton!==void 0&&(c.skeleton=i.skeleton);break;case"Mesh":p=h(i.geometry),v=d(i.material),c=new It(p,v);break;case"InstancedMesh":p=h(i.geometry),v=d(i.material);var m=i.count,x=i.instanceMatrix;c=new Nf(p,v,m),c.instanceMatrix=new We(new Float32Array(x.array),16);break;case"LOD":c=new oc;break;case"Line":c=new Mi(h(i.geometry),d(i.material),i.mode);break;case"LineLoop":c=new kf(h(i.geometry),d(i.material));break;case"LineSegments":c=new fr(h(i.geometry),d(i.material));break;case"PointCloud":case"Points":c=new qu(h(i.geometry),d(i.material));break;case"Sprite":c=new ac(d(i.material));break;case"Group":c=new Ko;break;case"Bone":c=new uc;break;default:c=new Fe}if(c.uuid=i.uuid,i.name!==void 0&&(c.name=i.name),i.matrix!==void 0?(c.matrix.fromArray(i.matrix),i.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=i.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(i.position!==void 0&&c.position.fromArray(i.position),i.rotation!==void 0&&c.rotation.fromArray(i.rotation),i.quaternion!==void 0&&c.quaternion.fromArray(i.quaternion),i.scale!==void 0&&c.scale.fromArray(i.scale)),i.castShadow!==void 0&&(c.castShadow=i.castShadow),i.receiveShadow!==void 0&&(c.receiveShadow=i.receiveShadow),i.shadow&&(i.shadow.bias!==void 0&&(c.shadow.bias=i.shadow.bias),i.shadow.normalBias!==void 0&&(c.shadow.normalBias=i.shadow.normalBias),i.shadow.radius!==void 0&&(c.shadow.radius=i.shadow.radius),i.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(i.shadow.mapSize),i.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(i.shadow.camera))),i.visible!==void 0&&(c.visible=i.visible),i.frustumCulled!==void 0&&(c.frustumCulled=i.frustumCulled),i.renderOrder!==void 0&&(c.renderOrder=i.renderOrder),i.userData!==void 0&&(c.userData=i.userData),i.layers!==void 0&&(c.layers.mask=i.layers),i.children!==void 0)for(var M=i.children,A=0;A<M.length;A++)c.add(this.parseObject(M[A],a,o,l));if(i.animations!==void 0)for(var S=i.animations,y=0;y<S.length;y++){var O=S[y];c.animations.push(l[O])}if(i.type==="LOD"){i.autoUpdate!==void 0&&(c.autoUpdate=i.autoUpdate);for(var P=i.levels,L=0;L<P.length;L++){var C=P[L],R=c.getObjectByProperty("uuid",C.object);R!==void 0&&c.addLevel(R,C.distance)}}return c}},{key:"bindSkeletons",value:function(i,a){Object.keys(a).length!==0&&i.traverse(function(o){if(o.isSkinnedMesh===!0&&o.skeleton!==void 0){var l=a[o.skeleton];l===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",o.skeleton):o.bind(l,o.bindMatrix)}})}},{key:"setTexturePath",value:function(i){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(i)}}]),e}(Vt),X0={UVMapping:su,CubeReflectionMapping:ds,CubeRefractionMapping:ps,EquirectangularReflectionMapping:uu,EquirectangularRefractionMapping:po,CubeUVReflectionMapping:vo,CubeUVRefractionMapping:mo},Ov={RepeatWrapping:go,ClampToEdgeWrapping:Un,MirroredRepeatWrapping:yo},Iv={NearestFilter:gn,NearestMipmapNearestFilter:vs,NearestMipmapLinearFilter:lu,LinearFilter:Tn,LinearMipmapNearestFilter:ms,LinearMipmapLinearFilter:xo};function Wd(r){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Vt.call(this,r),this.options={premultiplyAlpha:"none"}}Wd.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Wd,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,o=Ks.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;var l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(t,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,a.options)}).then(function(c){Ks.add(t,c),e&&e(c),a.manager.itemEnd(t)}).catch(function(c){i&&i(c),a.manager.itemError(t),a.manager.itemEnd(t)}),a.manager.itemStart(t)}});function jd(){this.type="ShapePath",this.color=new Pe,this.subPaths=[],this.currentPath=null}Object.assign(jd.prototype,{moveTo:function(t,e){return this.currentPath=new Ki,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,a,o){return this.currentPath.bezierCurveTo(t,e,n,i,a,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(oe){for(var he=[],re=0,de=oe.length;re<de;re++){var Me=oe[re],Xe=new rs;Xe.curves=Me.curves,he.push(Xe)}return he}function i(oe,he){for(var re=he.length,de=!1,Me=re-1,Xe=0;Xe<re;Me=Xe++){var $=he[Me],at=he[Xe],qe=at.x-$.x,Ze=at.y-$.y;if(Math.abs(Ze)>Number.EPSILON){if(Ze<0&&($=he[Xe],qe=-qe,at=he[Me],Ze=-Ze),oe.y<$.y||oe.y>at.y)continue;if(oe.y===$.y){if(oe.x===$.x)return!0}else{var Ae=Ze*(oe.x-$.x)-qe*(oe.y-$.y);if(Ae===0)return!0;if(Ae<0)continue;de=!de}}else{if(oe.y!==$.y)continue;if(at.x<=oe.x&&oe.x<=$.x||$.x<=oe.x&&oe.x<=at.x)return!0}}return de}var a=ro.isClockWise,o=this.subPaths;if(o.length===0)return[];if(e===!0)return n(o);var l,c,h,d=[];if(o.length===1)return c=o[0],h=new rs,h.curves=c.curves,d.push(h),d;var p=!a(o[0].getPoints());p=t?!p:p;var v=[],m=[],x=[],M=0,A;m[M]=void 0,x[M]=[];for(var S=0,y=o.length;S<y;S++)c=o[S],A=c.getPoints(),l=a(A),l=t?!l:l,l?(!p&&m[M]&&M++,m[M]={s:new rs,p:A},m[M].s.curves=c.curves,p&&M++,x[M]=[]):x[M].push({h:c,p:A[0]});if(!m[0])return n(o);if(m.length>1){for(var O=!1,P=[],L=0,C=m.length;L<C;L++)v[L]=[];for(var R=0,N=m.length;R<N;R++)for(var V=x[R],X=0;X<V.length;X++){for(var z=V[X],D=!0,H=0;H<m.length;H++)i(z.p,m[H].p)&&(R!==H&&P.push({froms:R,tos:H,hole:X}),D?(D=!1,v[H].push(z)):O=!0);D&&v[R].push(z)}P.length>0&&(O||(x=v))}for(var j,_=0,W=m.length;_<W;_++){h=m[_].s,d.push(h),j=x[_];for(var Q=0,te=j.length;Q<te;Q++)h.holes.push(j[Q].h)}return d}});function Xd(r){this.type="Font",this.data=r}Object.assign(Xd.prototype,{isFont:!0,generateShapes:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,n=[],i=Y0(t,e,this.data),a=0,o=i.length;a<o;a++)Array.prototype.push.apply(n,i[a].toShapes());return n}});function Y0(r,t,e){for(var n=Array.from?Array.from(r):String(r).split(""),i=t/e.resolution,a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,o=[],l=0,c=0,h=0;h<n.length;h++){var d=n[h];if(d===`
`)l=0,c-=a;else{var p=J0(d,i,l,c,e);l+=p.offsetX,o.push(p.path)}}return o}function J0(r,t,e,n,i){var a=i.glyphs[r]||i.glyphs["?"];if(!a){console.error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");return}var o=new jd,l,c,h,d,p,v,m,x;if(a.o)for(var M=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),A=0,S=M.length;A<S;){var y=M[A++];switch(y){case"m":l=M[A++]*t+e,c=M[A++]*t+n,o.moveTo(l,c);break;case"l":l=M[A++]*t+e,c=M[A++]*t+n,o.lineTo(l,c);break;case"q":h=M[A++]*t+e,d=M[A++]*t+n,p=M[A++]*t+e,v=M[A++]*t+n,o.quadraticCurveTo(p,v,h,d);break;case"b":h=M[A++]*t+e,d=M[A++]*t+n,p=M[A++]*t+e,v=M[A++]*t+n,m=M[A++]*t+e,x=M[A++]*t+n,o.bezierCurveTo(p,v,m,x,h,d);break}}return{offsetX:a.ha*t,path:o}}function Yd(r){Vt.call(this,r)}Yd.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Yd,load:function(t,e,n,i){var a=this,o=new Si(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(l){var c;try{c=JSON.parse(l)}catch(d){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(l.substring(65,l.length-2))}var h=a.parse(c);e&&e(h)},n,i)},parse:function(t){return new Xd(t)}});var gh,Jd={getContext:function(){return gh===void 0&&(gh=new(window.AudioContext||window.webkitAudioContext)),gh},setContext:function(t){gh=t}};function yh(r){Vt.call(this,r)}yh.prototype=Object.assign(Object.create(Vt.prototype),{constructor:yh,load:function(t,e,n,i){var a=this,o=new Si(a.manager);o.setResponseType("arraybuffer"),o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(l){try{var c=l.slice(0),h=Jd.getContext();h.decodeAudioData(c,function(d){e(d)})}catch(d){i?i(d):console.error(d),a.manager.itemError(t)}},n,i)}});function Zd(r,t,e){wi.call(this,void 0,e);var n=new Pe().set(r),i=new Pe().set(t),a=new I(n.r,n.g,n.b),o=new I(i.r,i.g,i.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}Zd.prototype=Object.assign(Object.create(wi.prototype),{constructor:Zd,isHemisphereLightProbe:!0,copy:function(t){return wi.prototype.copy.call(this,t),this},toJSON:function(t){var e=wi.prototype.toJSON.call(this,t);return e}});function Qd(r,t){wi.call(this,void 0,t);var e=new Pe().set(r);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}Qd.prototype=Object.assign(Object.create(wi.prototype),{constructor:Qd,isAmbientLightProbe:!0,copy:function(t){return wi.prototype.copy.call(this,t),this},toJSON:function(t){var e=wi.prototype.toJSON.call(this,t);return e}});var Bv=new ct,Dv=new ct;function Fv(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Fv.prototype,{update:function(t){var e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var i=t.projectionMatrix.clone(),a=e.eyeSep/2,o=a*e.near/e.focus,l=e.near*Math.tan(Ke.DEG2RAD*e.fov*.5)/e.zoom,c,h;Dv.elements[12]=-a,Bv.elements[12]=a,c=-l*e.aspect+o,h=l*e.aspect+o,i.elements[0]=2*e.near/(h-c),i.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(i),c=-l*e.aspect-o,h=l*e.aspect-o,i.elements[0]=2*e.near/(h-c),i.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Dv),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Bv)}});var Kd=function(){function r(t){Object(pe.a)(this,r),this.autoStart=t!==void 0?t:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Object(Ge.a)(r,[{key:"start",value:function(){this.startTime=Nv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var n=Nv();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}]),r}();function Nv(){return(typeof performance=="undefined"?Date:performance).now()}var qs=new I,zv=new Ot,Z0=new I,eu=new I,Q0=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n;return Object(pe.a)(this,e),n=t.call(this),n.type="AudioListener",n.context=Jd.getContext(),n.gain=n.context.createGain(),n.gain.connect(n.context.destination),n.filter=null,n.timeDelta=0,n._clock=new Kd,n}return Object(Ge.a)(e,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(i){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=i,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(i){return this.gain.gain.setTargetAtTime(i,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(i){Lt(Object(Wn.a)(e.prototype),"updateMatrixWorld",this).call(this,i);var a=this.context.listener,o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(qs,zv,Z0),eu.set(0,0,-1).applyQuaternion(zv),a.positionX){var l=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(qs.x,l),a.positionY.linearRampToValueAtTime(qs.y,l),a.positionZ.linearRampToValueAtTime(qs.z,l),a.forwardX.linearRampToValueAtTime(eu.x,l),a.forwardY.linearRampToValueAtTime(eu.y,l),a.forwardZ.linearRampToValueAtTime(eu.z,l),a.upX.linearRampToValueAtTime(o.x,l),a.upY.linearRampToValueAtTime(o.y,l),a.upZ.linearRampToValueAtTime(o.z,l)}else a.setPosition(qs.x,qs.y,qs.z),a.setOrientation(eu.x,eu.y,eu.z,o.x,o.y,o.z)}}]),e}(Fe),$d=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i;return Object(pe.a)(this,e),i=t.call(this),i.type="Audio",i.listener=n,i.context=n.context,i.gain=i.context.createGain(),i.gain.connect(n.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return Object(Ge.a)(e,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(i){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=i,this.connect(),this}},{key:"setMediaElementSource",value:function(i){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(i),this.connect(),this}},{key:"setMediaStreamSource",value:function(i){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(i),this.connect(),this}},{key:"setBuffer",value:function(i){return this.buffer=i,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+i;var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},{key:"pause",value:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}},{key:"stop",value:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var i=1,a=this.filters.length;i<a;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var i=1,a=this.filters.length;i<a;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(i){return i||(i=[]),this._connected===!0?(this.disconnect(),this.filters=i.slice(),this.connect()):this.filters=i.slice(),this}},{key:"setDetune",value:function(i){if(this.detune=i,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(i){return this.setFilters(i?[i]:[])}},{key:"setPlaybackRate",value:function(i){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=i,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(i){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=i,this.isPlaying===!0&&(this.source.loop=this.loop),this}},{key:"setLoopStart",value:function(i){return this.loopStart=i,this}},{key:"setLoopEnd",value:function(i){return this.loopEnd=i,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(i){return this.gain.gain.setTargetAtTime(i,this.context.currentTime,.01),this}}]),e}(Fe),tu=new I,Gv=new Ot,K0=new I,nu=new I,$0=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i;return Object(pe.a)(this,e),i=t.call(this,n),i.panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return Object(Ge.a)(e,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(i){return this.panner.refDistance=i,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(i){return this.panner.rolloffFactor=i,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(i){return this.panner.distanceModel=i,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(i){return this.panner.maxDistance=i,this}},{key:"setDirectionalCone",value:function(i,a,o){return this.panner.coneInnerAngle=i,this.panner.coneOuterAngle=a,this.panner.coneOuterGain=o,this}},{key:"updateMatrixWorld",value:function(i){if(Lt(Object(Wn.a)(e.prototype),"updateMatrixWorld",this).call(this,i),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(tu,Gv,K0),nu.set(0,0,1).applyQuaternion(Gv);var a=this.panner;if(a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(tu.x,o),a.positionY.linearRampToValueAtTime(tu.y,o),a.positionZ.linearRampToValueAtTime(tu.z,o),a.orientationX.linearRampToValueAtTime(nu.x,o),a.orientationY.linearRampToValueAtTime(nu.y,o),a.orientationZ.linearRampToValueAtTime(nu.z,o)}else a.setPosition(tu.x,tu.y,tu.z),a.setOrientation(nu.x,nu.y,nu.z)}}}]),e}($d),Uv=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2048;Object(pe.a)(this,r),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return Object(Ge.a)(r,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,n=this.getFrequencyData(),i=0;i<n.length;i++)e+=n[i];return e/n.length}}]),r}();function qd(r,t,e){this.binding=r,this.valueSize=e;var n,i,a;switch(t){case"quaternion":n=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(e*6),this._workIndex=5;break;case"string":case"bool":n=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(e*5);break;default:n=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(e*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(qd.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,a=t*i+i,o=this.cumulativeWeight;if(o===0){for(var l=0;l!==i;++l)n[a+l]=n[l];o=e}else{o+=e;var c=e/o;this._mixBufferRegion(n,a,0,c,i)}this.cumulativeWeight=o},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var c=e*this._origIndex;this._mixBufferRegion(n,i,c,1-a,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var h=e,d=e+e;h!==d;++h)if(n[h]!==n[h+e]){l.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var a=n,o=i;a!==o;++a)e[a]=e[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,a){if(i>=.5)for(var o=0;o!==a;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){Ot.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,a){var o=this._workIndex*a;Ot.multiplyQuaternionsFlat(t,o,t,e,t,n),Ot.slerpFlat(t,e,t,e,t,o,i)},_lerp:function(t,e,n,i,a){for(var o=1-i,l=0;l!==a;++l){var c=e+l;t[c]=t[c]*o+t[n+l]*i}},_lerpAdditive:function(t,e,n,i,a){for(var o=0;o!==a;++o){var l=e+o;t[l]=t[l]+t[n+o]*i}}});var ep="\\[\\]\\.:\\/",q0=new RegExp("["+ep+"]","g"),tp="[^"+ep+"]",ex="[^"+ep.replace("\\.","")+"]",tx=/((?:WC+[\/:])*)/.source.replace("WC",tp),nx=/(WCOD+)?/.source.replace("WCOD",ex),rx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tp),ix=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tp),ax=new RegExp("^"+tx+nx+rx+ix+"$"),ox=["material","materials","bones"];function Hv(r,t,e){var n=e||tr.parseTrackName(t);this._targetGroup=r,this._bindings=r.subscribe_(t,n)}Object.assign(Hv.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}});function tr(r,t,e){this.path=t,this.parsedPath=e||tr.parseTrackName(t),this.node=tr.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r}Object.assign(tr,{Composite:Hv,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new tr.Composite(t,e,n):new tr(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(q0,"")},parseTrackName:function(t){var e=ax.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){var a=n.nodeName.substring(i+1);ox.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){var i=function o(l){for(var c=0;c<l.length;c++){var h=l[c];if(h.name===e||h.uuid===e)return h;var d=o(h.children);if(d)return d}return null},a=i(t.children);if(a)return a}return null}}),Object.assign(tr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,a=e.propertyIndex;if(t||(t=tr.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(var l=0;l<t.length;l++)if(t[l].name===o){o=l;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(o!==void 0){if(t[o]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[o]}}var c=t[i];if(c===void 0){var h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t);return}var d=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);var p=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}p=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=a}else c.fromArray!==void 0&&c.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(p=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=i;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][d]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(tr.prototype,{_getValue_unbound:tr.prototype.getValue,_setValue_unbound:tr.prototype.setValue});function kv(){this.uuid=Ke.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var r={};this._indicesByUUID=r;for(var t=0,e=arguments.length;t!==e;++t)r[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(kv.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length,l=void 0,c=t.length,h=this.nCachedObjects_,d=0,p=arguments.length;d!==p;++d){var v=arguments[d],m=v.uuid,x=e[m];if(x===void 0){x=c++,e[m]=x,t.push(v);for(var M=0,A=o;M!==A;++M)a[M].push(new tr(v,n[M],i[M]))}else if(x<h){l=t[x];var S=--h,y=t[S];e[y.uuid]=x,t[x]=y,e[m]=S,t[S]=v;for(var O=0,P=o;O!==P;++O){var L=a[O],C=L[S],R=L[x];L[x]=C,R===void 0&&(R=new tr(v,n[O],i[O])),L[S]=R}}else t[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,a=this.nCachedObjects_,o=0,l=arguments.length;o!==l;++o){var c=arguments[o],h=c.uuid,d=e[h];if(d!==void 0&&d>=a){var p=a++,v=t[p];e[v.uuid]=d,t[d]=v,e[h]=p,t[p]=c;for(var m=0,x=i;m!==x;++m){var M=n[m],A=M[p],S=M[d];M[d]=A,M[p]=S}}}this.nCachedObjects_=a},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,a=this.nCachedObjects_,o=t.length,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,p=e[d];if(p!==void 0)if(delete e[d],p<a){var v=--a,m=t[v],x=--o,M=t[x];e[m.uuid]=p,t[p]=m,e[M.uuid]=v,t[v]=M,t.pop();for(var A=0,S=i;A!==S;++A){var y=n[A],O=y[v],P=y[x];y[p]=O,y[v]=P,y.pop()}}else{var L=--o,C=t[L];L>0&&(e[C.uuid]=p),t[p]=C,t.pop();for(var R=0,N=i;R!==N;++R){var V=n[R];V[p]=V[L],V.pop()}}}this.nCachedObjects_=a},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],a=this._bindings;if(i!==void 0)return a[i];var o=this._paths,l=this._parsedPaths,c=this._objects,h=c.length,d=this.nCachedObjects_,p=new Array(h);i=a.length,n[t]=i,o.push(t),l.push(e),a.push(p);for(var v=d,m=c.length;v!==m;++v){var x=c[v];p[v]=new tr(x,t,e)}return p},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){var i=this._paths,a=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],h=t[l];e[h]=n,o[n]=c,o.pop(),a[n]=a[l],a.pop(),i[n]=i[l],i.pop()}}});var sx=function(){function r(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e.blendMode;Object(pe.a)(this,r),this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;for(var a=e.tracks,o=a.length,l=new Array(o),c={endingStart:On,endingEnd:On},h=0;h!==o;++h){var d=a[h].createInterpolant(null);l[h]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rf,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(Ge.a)(r,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,n){return this.loop=e,this.repetitions=n,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){var a=this._clip.duration,o=e._clip.duration,l=o/a,c=a/o;e.warp(1,l,n),this.warp(c,1,n)}return this}},{key:"crossFadeTo",value:function(e,n,i){return e.crossFadeFrom(this,n,i)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,n,i){var a=this._mixer,o=a.time,l=this.timeScale,c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);var h=c.parameterPositions,d=c.sampleValues;return h[0]=o,h[1]=o+i,d[0]=e/l,d[1]=n/l,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,n,i,a){if(!this.enabled){this._updateWeight(e);return}var o=this._startTime;if(o!==null){var l=(e-o)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(e);var c=this._updateTime(n),h=this._updateWeight(e);if(h>0){var d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case Ao:for(var v=0,m=d.length;v!==m;++v)d[v].evaluate(c),p[v].accumulateAdditive(h);break;case Pi:default:for(var x=0,M=d.length;x!==M;++x)d[x].evaluate(c),p[x].accumulate(a,h)}}}},{key:"_updateWeight",value:function(e){var n=0;if(this.enabled){n=this.weight;var i=this._weightInterpolant;if(i!==null){var a=i.evaluate(e)[0];n*=a,e>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}},{key:"_updateTimeScale",value:function(e){var n=0;if(!this.paused){n=this.timeScale;var i=this._timeScaleInterpolant;if(i!==null){var a=i.evaluate(e)[0];n*=a,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}},{key:"_updateTime",value:function(e){var n=this._clip.duration,i=this.loop,a=this.time+e,o=this._loopCount,l=i===ar;if(e===0)return o===-1?a:l&&(o&1)==1?n-a:a;if(i===nf){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),a>=n||a<0){var c=Math.floor(a/n);a-=n*c,o+=Math.abs(c);var h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?n:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){var d=e<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(l&&(o&1)==1)return n-a}return a}},{key:"_setEndings",value:function(e,n,i){var a=this._interpolantSettings;i?(a.endingStart=ni,a.endingEnd=ni):(e?a.endingStart=this.zeroSlopeAtStart?ni:On:a.endingStart=ca,n?a.endingEnd=this.zeroSlopeAtEnd?ni:On:a.endingEnd=ca)}},{key:"_scheduleFading",value:function(e,n,i){var a=this._mixer,o=a.time,l=this._weightInterpolant;l===null&&(l=a._lendControlInterpolant(),this._weightInterpolant=l);var c=l.parameterPositions,h=l.sampleValues;return c[0]=o,h[0]=n,c[1]=o+e,h[1]=i,this}}]),r}();function np(r){this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}np.prototype=Object.assign(Object.create(Nr.prototype),{constructor:np,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,a=i.length,o=t._propertyBindings,l=t._interpolants,c=n.uuid,h=this._bindingsByRootAndName,d=h[c];d===void 0&&(d={},h[c]=d);for(var p=0;p!==a;++p){var v=i[p],m=v.name,x=d[m];if(x!==void 0)o[p]=x;else{if(x=o[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,m));continue}var M=e&&e._propertyBindings[p].binding.parsedPath;x=new qd(tr.create(n,m,M),v.ValueTypeName,v.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,m),o[p]=x}l[p].resultBuffer=x.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var a=t._propertyBindings,o=0,l=a.length;o!==l;++o){var c=a[o];c.useCount++==0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var a=e[n];--a.useCount==0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,a=this._actionsByClip,o=a[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[e]=o;else{var l=o.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var a=t._clip.uuid,o=this._actionsByClip,l=o[a],c=l.knownActions,h=c[c.length-1],d=t._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),t._byClipCacheIndex=null;var p=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete p[v],c.length===0&&delete o[a],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var a=e[n];--a.referenceCount==0&&this._removeInactiveBinding(a)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,a=e[i];t._cacheIndex=i,e[i]=t,a._cacheIndex=n,e[n]=a},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,a=e[i];t._cacheIndex=i,e[i]=t,a._cacheIndex=n,e[n]=a},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,a=this._bindings,o=i[e];o===void 0&&(o={},i[e]=o),o[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,l=o[i],c=e[e.length-1],h=t._cacheIndex;c._cacheIndex=h,e[h]=c,e.pop(),delete l[a],Object.keys(l).length===0&&delete o[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,a=e[i];t._cacheIndex=i,e[i]=t,a._cacheIndex=n,e[n]=a},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,a=e[i];t._cacheIndex=i,e[i]=t,a._cacheIndex=n,e[n]=a},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return n===void 0&&(n=new xc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,a=e[i];t.__cacheIndex=i,e[i]=t,a.__cacheIndex=n,e[n]=a},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var i=e||this._root,a=i.uuid,o=typeof t=="string"?Xr.findByName(i,t):t,l=o!==null?o.uuid:t,c=this._actionsByClip[l],h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Pi),c!==void 0){var d=c.actionByRoot[a];if(d!==void 0&&d.blendMode===n)return d;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;var p=new sx(this,o,e,n);return this._bindAction(p,h),this._addInactiveAction(p,l,a),p},existingAction:function(t,e){var n=e||this._root,i=n.uuid,a=typeof t=="string"?Xr.findByName(n,t):t,o=a?a.uuid:t,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,a=Math.sign(t),o=this._accuIndex^=1,l=0;l!==n;++l){var c=e[l];c._update(i,t,a,o)}for(var h=this._bindings,d=this._nActiveBindings,p=0;p!==d;++p)h[p].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,a=i[n];if(a!==void 0){for(var o=a.knownActions,l=0,c=o.length;l!==c;++l){var h=o[l];this._deactivateAction(h);var d=h._cacheIndex,p=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=d,e[d]=p,e.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var a=n[i].actionByRoot,o=a[e];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var l=this._bindingsByRootAndName,c=l[e];if(c!==void 0)for(var h in c){var d=c[h];d.restoreOriginalState(),this._removeInactiveBinding(d)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var Vv=function(){function r(t){Object(pe.a)(this,r),typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return Object(Ge.a)(r,[{key:"clone",value:function(){return new r(this.value.clone===void 0?this.value:this.value.clone())}}]),r}();function rp(r,t,e){Wr.call(this,r,t),this.meshPerAttribute=e||1}rp.prototype=Object.assign(Object.create(Wr.prototype),{constructor:rp,isInstancedInterleavedBuffer:!0,copy:function(t){return Wr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=Wr.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=Wr.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function ip(r,t,e,n,i){this.buffer=r,this.type=t,this.itemSize=e,this.elementSize=n,this.count=i,this.version=0}Object.defineProperty(ip.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(ip.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function xh(r,t,e,n){this.ray=new Bo(r,t),this.near=e||0,this.far=n||Infinity,this.camera=null,this.layers=new Os,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function _v(r,t){return r.distance-t.distance}function ap(r,t,e,n){if(r.layers.test(t.layers)&&r.raycast(t,e),n===!0)for(var i=r.children,a=0,o=i.length;a<o;a++)ap(i[a],t,e,!0)}Object.assign(xh.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return ap(t,this,i,e),i.sort(_v),i},intersectObjects:function(t,e,n){var i=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var a=0,o=t.length;a<o;a++)ap(t[a],this,i,e);return i.sort(_v),i}});var ux=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(pe.a)(this,r),this.radius=t,this.phi=e,this.theta=n,this}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ke.clamp(n/this.radius,-1,1))),this}}]),r}(),lx=function(){function r(t,e,n){return Object(pe.a)(this,r),this.radius=t!==void 0?t:1,this.theta=e!==void 0?e:0,this.y=n!==void 0?n:0,this}return Object(Ge.a)(r,[{key:"set",value:function(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}}]),r}(),Wv=new se,jv=function(){function r(t,e){Object(pe.a)(this,r),Object.defineProperty(this,"isBox2",{value:!0}),this.min=t!==void 0?t:new se(Infinity,Infinity),this.max=e!==void 0?e:new se(-Infinity,-Infinity)}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.min.copy(e),this.max.copy(n),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}},{key:"setFromCenterAndSize",value:function(e,n){var i=Wv.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new se),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new se),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new se),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new se),n.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var n=Wv.copy(e).clamp(this.min,this.max);return n.sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),r}(),Xv=new I,Mh=new I,Yv=function(){function r(t,e){Object(pe.a)(this,r),this.start=t!==void 0?t:new I,this.end=e!==void 0?e:new I}return Object(Ge.a)(r,[{key:"set",value:function(e,n){return this.start.copy(e),this.end.copy(n),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new I),e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new I),e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,n){return n===void 0&&(console.warn("THREE.Line3: .at() target is now required"),n=new I),this.delta(n).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,n){Xv.subVectors(e,this.start),Mh.subVectors(this.end,this.start);var i=Mh.dot(Mh),a=Mh.dot(Xv),o=a/i;return n&&(o=Ke.clamp(o,0,1)),o}},{key:"closestPointToPoint",value:function(e,n,i){var a=this.closestPointToPointParameter(e,n);return i===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new I),this.delta(i).multiplyScalar(a).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),r}();function Ec(r){Fe.call(this),this.material=r,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Ec.prototype=Object.create(Fe.prototype),Ec.prototype.constructor=Ec,Ec.prototype.isImmediateRenderObject=!0;var Jv=new I,cx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i){var a;Object(pe.a)(this,e),a=t.call(this),a.light=n,a.light.updateMatrixWorld(),a.matrix=n.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;for(var o=new Ne,l=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,h=1,d=32;c<d;c++,h++){var p=c/d*Math.PI*2,v=h/d*Math.PI*2;l.push(Math.cos(p),Math.sin(p),1,Math.cos(v),Math.sin(v),1)}o.setAttribute("position",new Se(l,3));var m=new fn({fog:!1,toneMapped:!1});return a.cone=new fr(o,m),a.add(a.cone),a.update(),a}return Object(Ge.a)(e,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,a=i*Math.tan(this.light.angle);this.cone.scale.set(a,a,i),Jv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Jv),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),e}(Fe),is=new I,Sh=new ct,op=new ct,Zv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i;Object(pe.a)(this,e);for(var a=Qv(n),o=new Ne,l=[],c=[],h=new Pe(0,0,1),d=new Pe(0,1,0),p=0;p<a.length;p++){var v=a[p];v.parent&&v.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),c.push(h.r,h.g,h.b),c.push(d.r,d.g,d.b))}o.setAttribute("position",new Se(l,3)),o.setAttribute("color",new Se(c,3));var m=new fn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return i=t.call(this,o,m),i.type="SkeletonHelper",i.isSkeletonHelper=!0,i.root=n,i.bones=a,i.matrix=n.matrixWorld,i.matrixAutoUpdate=!1,i}return Object(Ge.a)(e,[{key:"updateMatrixWorld",value:function(i){var a=this.bones,o=this.geometry,l=o.getAttribute("position");op.copy(this.root.matrixWorld).invert();for(var c=0,h=0;c<a.length;c++){var d=a[c];d.parent&&d.parent.isBone&&(Sh.multiplyMatrices(op,d.matrixWorld),is.setFromMatrixPosition(Sh),l.setXYZ(h,is.x,is.y,is.z),Sh.multiplyMatrices(op,d.parent.matrixWorld),is.setFromMatrixPosition(Sh),l.setXYZ(h+1,is.x,is.y,is.z),h+=2)}o.getAttribute("position").needsUpdate=!0,Lt(Object(Wn.a)(e.prototype),"updateMatrixWorld",this).call(this,i)}}]),e}(fr);function Qv(r){var t=[];r&&r.isBone&&t.push(r);for(var e=0;e<r.children.length;e++)t.push.apply(t,Qv(r.children[e]));return t}var fx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a){var o;Object(pe.a)(this,e);var l=new Kf(i,4,2),c=new Qn({wireframe:!0,fog:!1,toneMapped:!1});return o=t.call(this,l,c),o.light=n,o.light.updateMatrixWorld(),o.color=a,o.type="PointLightHelper",o.matrix=o.light.matrixWorld,o.matrixAutoUpdate=!1,o.update(),o}return Object(Ge.a)(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),e}(It),hx=new I,Kv=new Pe,$v=new Pe,dx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a){var o;Object(pe.a)(this,e),o=t.call(this),o.light=n,o.light.updateMatrixWorld(),o.matrix=n.matrixWorld,o.matrixAutoUpdate=!1,o.color=a;var l=new Qf(i);l.rotateY(Math.PI*.5),o.material=new Qn({wireframe:!0,fog:!1,toneMapped:!1}),o.color===void 0&&(o.material.vertexColors=!0);var c=l.getAttribute("position"),h=new Float32Array(c.count*3);return l.setAttribute("color",new We(h,3)),o.add(new It(l,o.material)),o.update(),o}return Object(Ge.a)(e,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var i=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var a=i.geometry.getAttribute("color");Kv.copy(this.light.color),$v.copy(this.light.groundColor);for(var o=0,l=a.count;o<l;o++){var c=o<l/2?Kv:$v;a.setXYZ(o,c.r,c.g,c.b)}a.needsUpdate=!0}i.lookAt(hx.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),e}(Fe),qv=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4473924,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:8947848;Object(pe.a)(this,e),o=new Pe(o),l=new Pe(l);for(var c=a/2,h=i/a,d=i/2,p=[],v=[],m=0,x=0,M=-d;m<=a;m++,M+=h){p.push(-d,0,M,d,0,M),p.push(M,0,-d,M,0,d);var A=m===c?o:l;A.toArray(v,x),x+=3,A.toArray(v,x),x+=3,A.toArray(v,x),x+=3,A.toArray(v,x),x+=3}var S=new Ne;S.setAttribute("position",new Se(p,3)),S.setAttribute("color",new Se(v,3));var y=new fn({vertexColors:!0,toneMapped:!1});return n=t.call(this,S,y),n.type="GridHelper",n}return e}(fr),px=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:64,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4473924,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:8947848;Object(pe.a)(this,e),c=new Pe(c),h=new Pe(h);for(var d=[],p=[],v=0;v<=a;v++){var m=v/a*(Math.PI*2),x=Math.sin(m)*i,M=Math.cos(m)*i;d.push(0,0,0),d.push(x,0,M);var A=v&1?c:h;p.push(A.r,A.g,A.b),p.push(A.r,A.g,A.b)}for(var S=0;S<=o;S++)for(var y=S&1?c:h,O=i-i/o*S,P=0;P<l;P++){var L=P/l*(Math.PI*2),C=Math.sin(L)*O,R=Math.cos(L)*O;d.push(C,0,R),p.push(y.r,y.g,y.b),L=(P+1)/l*(Math.PI*2),C=Math.sin(L)*O,R=Math.cos(L)*O,d.push(C,0,R),p.push(y.r,y.g,y.b)}var N=new Ne;N.setAttribute("position",new Se(d,3)),N.setAttribute("color",new Se(p,3));var V=new fn({vertexColors:!0,toneMapped:!1});return n=t.call(this,N,V),n.type="PolarGridHelper",n}return e}(fr),em=new I,wh=new I,tm=new I,vx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a){var o;Object(pe.a)(this,e),o=t.call(this),o.light=n,o.light.updateMatrixWorld(),o.matrix=n.matrixWorld,o.matrixAutoUpdate=!1,o.color=a,i===void 0&&(i=1);var l=new Ne;l.setAttribute("position",new Se([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var c=new fn({fog:!1,toneMapped:!1});return o.lightPlane=new Mi(l,c),o.add(o.lightPlane),l=new Ne,l.setAttribute("position",new Se([0,0,0,0,0,1],3)),o.targetLine=new Mi(l,c),o.add(o.targetLine),o.update(),o}return Object(Ge.a)(e,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){em.setFromMatrixPosition(this.light.matrixWorld),wh.setFromMatrixPosition(this.light.target.matrixWorld),tm.subVectors(wh,em),this.lightPlane.lookAt(wh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wh),this.targetLine.scale.z=tm.length()}}]),e}(Fe),bh=new I,xn=new Kn,mx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i;Object(pe.a)(this,e);var a=new Ne,o=new fn({color:16777215,vertexColors:!0,toneMapped:!1}),l=[],c=[],h={},d=new Pe(16755200),p=new Pe(16711680),v=new Pe(43775),m=new Pe(16777215),x=new Pe(3355443);M("n1","n2",d),M("n2","n4",d),M("n4","n3",d),M("n3","n1",d),M("f1","f2",d),M("f2","f4",d),M("f4","f3",d),M("f3","f1",d),M("n1","f1",d),M("n2","f2",d),M("n3","f3",d),M("n4","f4",d),M("p","n1",p),M("p","n2",p),M("p","n3",p),M("p","n4",p),M("u1","u2",v),M("u2","u3",v),M("u3","u1",v),M("c","t",m),M("p","c",x),M("cn1","cn2",x),M("cn3","cn4",x),M("cf1","cf2",x),M("cf3","cf4",x);function M(S,y,O){A(S,O),A(y,O)}function A(S,y){l.push(0,0,0),c.push(y.r,y.g,y.b),h[S]===void 0&&(h[S]=[]),h[S].push(l.length/3-1)}return a.setAttribute("position",new Se(l,3)),a.setAttribute("color",new Se(c,3)),i=t.call(this,a,o),i.type="CameraHelper",i.camera=n,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=n.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=h,i.update(),i}return Object(Ge.a)(e,[{key:"update",value:function(){var i=this.geometry,a=this.pointMap,o=1,l=1;xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wn("c",a,i,xn,0,0,-1),wn("t",a,i,xn,0,0,1),wn("n1",a,i,xn,-o,-l,-1),wn("n2",a,i,xn,o,-l,-1),wn("n3",a,i,xn,-o,l,-1),wn("n4",a,i,xn,o,l,-1),wn("f1",a,i,xn,-o,-l,1),wn("f2",a,i,xn,o,-l,1),wn("f3",a,i,xn,-o,l,1),wn("f4",a,i,xn,o,l,1),wn("u1",a,i,xn,o*.7,l*1.1,-1),wn("u2",a,i,xn,-o*.7,l*1.1,-1),wn("u3",a,i,xn,0,l*2,-1),wn("cf1",a,i,xn,-o,0,1),wn("cf2",a,i,xn,o,0,1),wn("cf3",a,i,xn,0,-l,1),wn("cf4",a,i,xn,0,l,1),wn("cn1",a,i,xn,-o,0,-1),wn("cn2",a,i,xn,o,0,-1),wn("cn3",a,i,xn,0,-l,-1),wn("cn4",a,i,xn,0,l,-1),i.getAttribute("position").needsUpdate=!0}}]),e}(fr);function wn(r,t,e,n,i,a,o){bh.set(i,a,o).unproject(n);var l=t[r];if(l!==void 0)for(var c=e.getAttribute("position"),h=0,d=l.length;h<d;h++)c.setXYZ(l[h],bh.x,bh.y,bh.z)}var Eh=new Fn,nm=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16776960;Object(pe.a)(this,e);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Float32Array(8*3),c=new Ne;return c.setIndex(new We(o,1)),c.setAttribute("position",new We(l,3)),i=t.call(this,c,new fn({color:a,toneMapped:!1})),i.object=n,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return Object(Ge.a)(e,[{key:"update",value:function(i){if(i!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Eh.setFromObject(this.object),!Eh.isEmpty()){var a=Eh.min,o=Eh.max,l=this.geometry.attributes.position,c=l.array;c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=a.x,c[4]=o.y,c[5]=o.z,c[6]=a.x,c[7]=a.y,c[8]=o.z,c[9]=o.x,c[10]=a.y,c[11]=o.z,c[12]=o.x,c[13]=o.y,c[14]=a.z,c[15]=a.x,c[16]=o.y,c[17]=a.z,c[18]=a.x,c[19]=a.y,c[20]=a.z,c[21]=o.x,c[22]=a.y,c[23]=a.z,l.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(i){return this.object=i,this.update(),this}},{key:"copy",value:function(i){return fr.prototype.copy.call(this,i),this.object=i.object,this}}]),e}(fr),gx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16776960;Object(pe.a)(this,e);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],c=new Ne;return c.setIndex(new We(o,1)),c.setAttribute("position",new Se(l,3)),i=t.call(this,c,new fn({color:a,toneMapped:!1})),i.box=n,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return Object(Ge.a)(e,[{key:"updateMatrixWorld",value:function(i){var a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5),Lt(Object(Wn.a)(e.prototype),"updateMatrixWorld",this).call(this,i))}}]),e}(fr),yx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:16776960;Object(pe.a)(this,e);var l=o,c=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],h=new Ne;h.setAttribute("position",new Se(c,3)),h.computeBoundingSphere(),i=t.call(this,h,new fn({color:l,toneMapped:!1})),i.type="PlaneHelper",i.plane=n,i.size=a;var d=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],p=new Ne;return p.setAttribute("position",new Se(d,3)),p.computeBoundingSphere(),i.add(new It(p,new Qn({color:l,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return Object(Ge.a)(e,[{key:"updateMatrixWorld",value:function(i){var a=-this.plane.constant;Math.abs(a)<1e-8&&(a=1e-8),this.scale.set(.5*this.size,.5*this.size,a),this.children[0].material.side=a<0?un:Ei,this.lookAt(this.plane.normal),Lt(Object(Wn.a)(e.prototype),"updateMatrixWorld",this).call(this,i)}}]),e}(Mi),rm=new I,Th,sp,xx=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(n,i,a,o,l,c){var h;return Object(pe.a)(this,e),h=t.call(this),h.type="ArrowHelper",n===void 0&&(n=new I(0,0,1)),i===void 0&&(i=new I(0,0,0)),a===void 0&&(a=1),o===void 0&&(o=16776960),l===void 0&&(l=.2*a),c===void 0&&(c=.2*l),Th===void 0&&(Th=new Ne,Th.setAttribute("position",new Se([0,0,0,0,1,0],3)),sp=new dc(0,.5,1,5,1),sp.translate(0,-.5,0)),h.position.copy(i),h.line=new Mi(Th,new fn({color:o,toneMapped:!1})),h.line.matrixAutoUpdate=!1,h.add(h.line),h.cone=new It(sp,new Qn({color:o,toneMapped:!1})),h.cone.matrixAutoUpdate=!1,h.add(h.cone),h.setDirection(n),h.setLength(a,l,c),h}return Object(Ge.a)(e,[{key:"setDirection",value:function(i){if(i.y>.99999)this.quaternion.set(0,0,0,1);else if(i.y<-.99999)this.quaternion.set(1,0,0,0);else{rm.set(i.z,0,-i.x).normalize();var a=Math.acos(i.y);this.quaternion.setFromAxisAngle(rm,a)}}},{key:"setLength",value:function(i,a,o){a===void 0&&(a=.2*i),o===void 0&&(o=.2*a),this.line.scale.set(1,Math.max(1e-4,i-a),1),this.line.updateMatrix(),this.cone.scale.set(o,a,o),this.cone.position.y=i,this.cone.updateMatrix()}},{key:"setColor",value:function(i){this.line.material.color.set(i),this.cone.material.color.set(i)}},{key:"copy",value:function(i){return Lt(Object(Wn.a)(e.prototype),"copy",this).call(this,i,!1),this.line.copy(i.line),this.cone.copy(i.cone),this}}]),e}(Fe),im=function(r){Object(Re.a)(e,r);var t=Object(De.a)(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Object(pe.a)(this,e);var a=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],l=new Ne;l.setAttribute("position",new Se(a,3)),l.setAttribute("color",new Se(o,3));var c=new fn({vertexColors:!0,toneMapped:!1});return n=t.call(this,l,c),n.type="AxesHelper",n}return e}(fr),am=new Float32Array(1),Mx=new Int32Array(am.buffer),Sx={toHalfFloat:function(t){am[0]=t;var e=Mx[0],n=e>>16&32768,i=e>>12&2047,a=e>>23&255;return a<103?n:a>142?(n|=31744,n|=(a==255?0:1)&&e&8388607,n):a<113?(i|=2048,n|=(i>>114-a)+(i>>113-a&1),n):(n|=a-112<<10|i>>1,n+=i&1,n)}},ul=4,as=8,La=Math.pow(2,as),om=[.125,.215,.35,.446,.526,.582],sm=as-ul+1+om.length,ll=20,Ca=(jn={},Object(_e.a)(jn,Bn,0),Object(_e.a)(jn,Mr,1),Object(_e.a)(jn,Fr,2),Object(_e.a)(jn,Mu,3),Object(_e.a)(jn,ri,4),Object(_e.a)(jn,ii,5),Object(_e.a)(jn,kn,6),jn),up=new $s,lp=Ex(),Tc=lp._lodPlanes,um=lp._sizeLods,Ah=lp._sigmas,cp=null,ru=(1+Math.sqrt(5))/2,cl=1/ru,lm=[new I(1,1,1),new I(-1,1,1),new I(1,1,-1),new I(-1,1,-1),new I(0,ru,cl),new I(0,ru,-cl),new I(cl,0,ru),new I(-cl,0,ru),new I(ru,cl,0),new I(-ru,cl,0)],wx=function(){function r(t){Object(pe.a)(this,r),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=Tx(ll),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return Object(Ge.a)(r,[{key:"fromScene",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:100;cp=this._renderer.getRenderTarget();var o=this._allocateTargets();return this._sceneToCubeUV(e,i,a,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){this._cubemapShader===null&&(this._cubemapShader=hm(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){this._equirectShader===null&&(this._equirectShader=fm(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var e=0;e<Tc.length;e++)Tc[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(cp),e.scissorTest=!1,Lh(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){cp=this._renderer.getRenderTarget();var n=this._allocateTargets(e);return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(e){var n={magFilter:gn,minFilter:gn,generateMipmaps:!1,type:Mo,format:Hn,encoding:bx(e)?e.encoding:Fr,depthBuffer:!1},i=cm(n);return i.depthBuffer=!e,this._pingPongRenderTarget=cm(n),i}},{key:"_compileMaterial",value:function(e){var n=new It(Tc[0],e);this._renderer.compile(n,up)}},{key:"_sceneToCubeUV",value:function(e,n,i,a){var o=90,l=1,c=new xt(o,l,n,i),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,v=p.outputEncoding,m=p.toneMapping,x=p.getClearColor(),M=p.getClearAlpha();p.toneMapping=Da,p.outputEncoding=Bn;var A=e.background;if(A&&A.isColor){A.convertSRGBToLinear();var S=Math.max(A.r,A.g,A.b),y=Math.min(Math.max(Math.ceil(Math.log2(S)),-128),127);A=A.multiplyScalar(Math.pow(2,-y));var O=(y+128)/255;p.setClearColor(A,O),e.background=null}for(var P=0;P<6;P++){var L=P%3;L==0?(c.up.set(0,h[P],0),c.lookAt(d[P],0,0)):L==1?(c.up.set(0,0,h[P]),c.lookAt(0,d[P],0)):(c.up.set(0,h[P],0),c.lookAt(0,0,d[P])),Lh(a,L*La,P>2?La:0,La,La),p.setRenderTarget(a),p.render(e,c)}p.toneMapping=m,p.outputEncoding=v,p.setClearColor(x,M)}},{key:"_textureToCubeUV",value:function(e,n){var i=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=hm()):this._equirectShader==null&&(this._equirectShader=fm());var a=e.isCubeTexture?this._cubemapShader:this._equirectShader,o=new It(Tc[0],a),l=a.uniforms;l.envMap.value=e,e.isCubeTexture||l.texelSize.value.set(1/e.image.width,1/e.image.height),l.inputEncoding.value=Ca[e.encoding],l.outputEncoding.value=Ca[n.texture.encoding],Lh(n,0,0,3*La,2*La),i.setRenderTarget(n),i.render(o,up)}},{key:"_applyPMREM",value:function(e){var n=this._renderer,i=n.autoClear;n.autoClear=!1;for(var a=1;a<sm;a++){var o=Math.sqrt(Ah[a]*Ah[a]-Ah[a-1]*Ah[a-1]),l=lm[(a-1)%lm.length];this._blur(e,a-1,a,o,l)}n.autoClear=i}},{key:"_blur",value:function(e,n,i,a,o){var l=this._pingPongRenderTarget;this._halfBlur(e,l,n,i,a,"latitudinal",o),this._halfBlur(l,e,i,i,a,"longitudinal",o)}},{key:"_halfBlur",value:function(e,n,i,a,o,l,c){var h=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var p=3,v=new It(Tc[a],d),m=d.uniforms,x=um[i]-1,M=isFinite(o)?Math.PI/(2*x):2*Math.PI/(2*ll-1),A=o/M,S=isFinite(o)?1+Math.floor(p*A):ll;S>ll&&console.warn("sigmaRadians, ".concat(o,", is too large and will clip, as it requested ").concat(S," samples when the maximum is set to ").concat(ll));for(var y=[],O=0,P=0;P<ll;++P){var L=P/A,C=Math.exp(-L*L/2);y.push(C),P==0?O+=C:P<S&&(O+=2*C)}for(var R=0;R<y.length;R++)y[R]=y[R]/O;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=y,m.latitudinal.value=l==="latitudinal",c&&(m.poleAxis.value=c),m.dTheta.value=M,m.mipInt.value=as-i,m.inputEncoding.value=Ca[e.texture.encoding],m.outputEncoding.value=Ca[e.texture.encoding];var N=um[a],V=3*Math.max(0,La-2*N),X=(a===0?0:2*La)+2*N*(a>as-ul?a-as+ul:0);Lh(n,V,X,3*N,2*N),h.setRenderTarget(n),h.render(v,up)}}]),r}();function bx(r){return r===void 0||r.type!==Mo?!1:r.encoding===Bn||r.encoding===Mr||r.encoding===kn}function Ex(){for(var r=[],t=[],e=[],n=as,i=0;i<sm;i++){var a=Math.pow(2,n);t.push(a);var o=1/a;i>as-ul?o=om[i-as+ul-1]:i==0&&(o=0),e.push(o);for(var l=1/(a-1),c=-l/2,h=1+l/2,d=[c,c,h,c,h,h,c,c,h,h,c,h],p=6,v=6,m=3,x=2,M=1,A=new Float32Array(m*v*p),S=new Float32Array(x*v*p),y=new Float32Array(M*v*p),O=0;O<p;O++){var P=O%3*2/3-1,L=O>2?0:-1,C=[P,L,0,P+2/3,L,0,P+2/3,L+1,0,P,L,0,P+2/3,L+1,0,P,L+1,0];A.set(C,m*v*O),S.set(d,x*v*O);var R=[O,O,O,O,O,O];y.set(R,M*v*O)}var N=new Ne;N.setAttribute("position",new We(A,m)),N.setAttribute("uv",new We(S,x)),N.setAttribute("faceIndex",new We(y,M)),r.push(N),n>ul&&n--}return{_lodPlanes:r,_sizeLods:t,_sigmas:e}}function cm(r){var t=new Dn(3*La,3*La,r);return t.texture.mapping=vo,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Lh(r,t,e,n,i){r.viewport.set(t,e,n,i),r.scissor.set(t,e,n,i)}function Tx(r){var t=new Float32Array(r),e=new I(0,1,0),n=new io({name:"SphericalGaussianBlur",defines:{n:r},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:Ca[Bn]},outputEncoding:{value:Ca[Bn]}},vertexShader:fp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			`.concat(hp(),`

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Br,depthTest:!1,depthWrite:!1});return n}function fm(){var r=new se(1,1),t=new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:r},inputEncoding:{value:Ca[Bn]},outputEncoding:{value:Ca[Bn]}},vertexShader:fp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			`.concat(hp(),`

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Br,depthTest:!1,depthWrite:!1});return t}function hm(){var r=new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ca[Bn]},outputEncoding:{value:Ca[Bn]}},vertexShader:fp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			`.concat(hp(),`

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`),blending:Br,depthTest:!1,depthWrite:!1});return r}function fp(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hp(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function Ax(r,t,e,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new qa(r,t,e,i,a,o)}var Lx=0,Cx=1,Rx=0,Px=1,Ox=2;function Ix(r){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),r}function Bx(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),r.isMultiMaterial=!0,r.materials=r,r.clone=function(){return r.slice()},r}function Dx(r,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new qu(r,t)}function Fx(r){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ac(r)}function Nx(r,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new qu(r,t)}function zx(r){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ji(r)}function Gx(r){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ji(r)}function Ux(r){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ji(r)}function Hx(r,t,e){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new I(r,t,e)}function kx(r,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new We(r,t).setUsage(Oi)}function Vx(r,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new da(r,t)}function _x(r,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new pa(r,t)}function Wx(r,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new va(r,t)}function jx(r,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ma(r,t)}function Xx(r,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vi(r,t)}function Yx(r,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ui(r,t)}function Jx(r,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Hi(r,t)}function Zx(r,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Se(r,t)}function Qx(r,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ho(r,t)}je.create=function(r,t){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(je.prototype),r.prototype.constructor=r,r.prototype.getPoint=t,r},Object.assign(ao.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Xt,n=0,i=t.length;n<i;n++){var a=t[n];e.vertices.push(new I(a.x,a.y,a.z||0))}return e}}),Object.assign(Ki.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});function dm(r){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),er.call(this,r),this.type="catmullrom",this.closed=!0}dm.prototype=Object.create(er.prototype);function pm(r){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),er.call(this,r),this.type="catmullrom"}pm.prototype=Object.create(er.prototype);function dp(r){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),er.call(this,r),this.type="catmullrom"}dp.prototype=Object.create(er.prototype),Object.assign(dp.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function Kx(r){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new im(r)}function $x(r,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new nm(r,t)}function qx(r,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new fr(new gd(r.geometry),new fn({color:t!==void 0?t:16777215}))}qv.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Zv.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function eM(r,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new fr(new Od(r.geometry),new fn({color:t!==void 0?t:16777215}))}Object.assign(Vt.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),_d.extractUrlBase(t)}}),Vt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function tM(r){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Si(r)}function nM(r){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ah(r)}Object.assign(jv.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Fn.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ci.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Wo.prototype.setFromMatrix=function(r){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(r)},Yv.prototype.center=function(r){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(r)},Object.assign(Ke,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ke.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ke.ceilPowerOfTwo(t)}}),Object.assign(In.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(ct.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new I().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,a,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Zn.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)},Object.assign(Ot.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Bo.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(br.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(br,{barycoordFromPoint:function(t,e,n,i,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),br.getBarycoord(t,e,n,i,a)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),br.getNormal(t,e,n,i)}}),Object.assign(rs.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Md(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Td(this,t)}}),Object.assign(se.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(I.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(it.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Fe.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Fe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(It.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(It.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),yu},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(oc.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(lc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),sc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(je.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xt.prototype.setLens=function(r,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(r)},Object.defineProperties(Qt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(We.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Oi},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Oi)}}}),Object.assign(We.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Oi:Xn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ne.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new We(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Ne.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(bc.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(xh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Wr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Oi},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Wr.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Oi:Xn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(gc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Pf.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Vv.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Qe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Ti}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(ns.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ts.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(Sn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ju.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ju.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Mr:Bn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Wp.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function rM(r,t,e){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new yi(r,e)}Object.defineProperties(Dn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties($d.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new yh;return n.load(t,function(i){e.setBuffer(i)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Uv.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},gi.prototype.updateCubeMap=function(r,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,t)},gi.prototype.clear=function(r,t,e,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(r,t,e,n)};var iM={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};Ln.crossOrigin=void 0,Ln.loadTexture=function(r,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new oh;i.setCrossOrigin(this.crossOrigin);var a=i.load(r,e,void 0,n);return t&&(a.mapping=t),a},Ln.loadTextureCube=function(r,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ih;i.setCrossOrigin(this.crossOrigin);var a=i.load(r,e,void 0,n);return t&&(a.mapping=t),a},Ln.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ln.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function aM(){console.error("THREE.CanvasRenderer has been removed")}function oM(){console.error("THREE.JSONLoader has been removed.")}var sM={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function uM(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uo}}));var lM=w("NJdT"),cM=w.n(lM),pp=w("QCnb"),Je=w("q1tI"),iu=w.n(Je),fM=w("wOJ8"),Ch=[],Rh=function(t,e){return t.length===e.length&&t.every(function(n,i){return n===e[i]})};function Ph(r,t,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=Object(Yt.a)(t),o;try{for(a.s();!(o=a.n()).done;){var l=o.value;if(Rh(e,l.args)){if(i)return;if(l.error)throw l.error;if(l.response)return l.response;throw l.promise}}}catch(h){a.e(h)}finally{a.f()}var c={args:e,promise:r.apply(void 0,Object(dt.a)(e)).then(function(h){return c.response=h==null||h}).catch(function(h){return c.error=h}).then(function(){n>0&&setTimeout(function(){var h=t.indexOf(c);h!==-1&&t.splice(h,1)},n)})};if(t.push(c),!i)throw c.promise}function vm(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];if(e===void 0)r.splice(0,r.length);else{var i=r.find(function(o){return Rh(e,o.args)});if(i){var a=r.indexOf(i);a!==-1&&r.splice(a,1)}}}function RM(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=[];return{read:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return Ph(r,e,a,t)},preload:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];Ph(r,e,a,t,!0)},clear:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return vm.apply(void 0,[e].concat(a))},peek:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var l;return(l=e.find(function(c){return Rh(a,c.args)}))==null?void 0:l.response}}}function os(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return Object(Je.useMemo)(function(){return Ph(r,Ch,e,os.lifespan)},e)}os.lifespan=0,os.clear=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return vm.apply(void 0,[Ch].concat(t))},os.preload=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];Ph(r,Ch,e,os.lifespan,!0)},os.peek=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];var n;return(n=Ch.find(function(i){return Rh(t,i.args)}))==null?void 0:n.response};var hM=w("iEE2");function dM(r){return function(t){r.forEach(function(e){typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var pM=dM,vM="react-three-fiber",mM="5.3.14",ss=new Map,vp={},Nn={obj:function(t){return t===Object(t)&&!Nn.arr(t)},fun:function(t){return typeof t=="function"},str:function(t){return typeof t=="string"},num:function(t){return typeof t=="number"},und:function(t){return t===void 0},arr:function(t){return Array.isArray(t)},equ:function(t,e){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Nn.str(t)||Nn.num(t)||Nn.obj(t))return t===e;if(Nn.arr(t)&&t==e)return!0;var n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Nn.und(n)?t===e:!0}};function mp(r,t){var e=t.length;return t.push(r),function(){return void t.splice(e,1)}}var Ac=[],Lc=[],gp=[],PM=function(t){return mp(t,Ac)},OM=function(t){return mp(t,Lc)},IM=function(t){return mp(t,gp)};function mm(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i;if(n)for(i=0;i<Ac.length;i++)Ac[i](t),e++;var a=r.current.clock.getDelta();for(i=0;i<r.current.subscribers.length;i++)r.current.subscribers[i].ref.current(r.current,a);if(r.current.frames=Math.max(0,r.current.frames-1),e+=r.current.invalidateFrameloop?r.current.frames:1,!r.current.manual&&r.current.gl.render&&r.current.gl.render(r.current.scene,r.current.camera),n)for(i=0;i<Lc.length;i++)Lc[i](t);return e}var Oh=!1;function gm(r){Oh=!0;var t=0,e;for(e=0;e<Ac.length;e++)Ac[e](r),t++;for(ss.forEach(function(n){var i=n.containerInfo.__state;i.current.active&&i.current.ready&&(!i.current.invalidateFrameloop||i.current.frames>0)?t=mm(i,r,t):t=0}),e=0;e<Lc.length;e++)Lc[e](r);if(t!==0)return requestAnimationFrame(gm);for(e=0;e<gp.length;e++)gp[e](r);Oh=!1}function Ih(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(r===!0)ss.forEach(function(e){var n=e.containerInfo.__state;n.current.frames=n.current.ready?n.current.frames+t:t});else if(r&&r.current){if(r.current.vr)return;r.current.frames=r.current.ready?r.current.frames+t:t}Oh||(Oh=!0,requestAnimationFrame(gm))}function BM(){ss.forEach(function(r){return r.containerInfo.__state.current.forceResize()})}var yp={},DM=function(t){return void(yp=Object(et.a)(Object(et.a)({},yp),t))};function Bh(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=r.__container,a=[],o=[],l,c=Object.keys(t);for(l=0;l<c.length;l++)Nn.equ(t[c[l]],e[c[l]])&&a.push(c[l]),Nn.fun(t[c[l]])&&c[l].startsWith("on")&&(c[l].includes("Pointer")||c[l].includes("Click")||c[l].includes("ContextMenu")||c[l].includes("Wheel"))&&o.push(c[l]);var h=[];if(c=Object.keys(e),n)for(l=0;l<c.length;l++)t[c[l]]===void 0&&h.push(c[l]);var d=[].concat(a,["children","key","ref"]);r.__instance&&d.push("object");var p=Object(et.a)({},t);for(c=Object.keys(p),l=0;l<c.length;l++)d.indexOf(c[l])>-1&&delete p[c[l]];for(c=Object.keys(h),l=0;l<c.length;l++)c[l]!=="children"&&(p[c[l]]=void 0);var v=Object.entries(p);if(v.length>0){if(v.forEach(function(x){var M=Object(Ft.a)(x,2),A=M[0],S=M[1];if(!o.includes(A)){var y,O,P=r,L=P[A];if(A.includes("-")){var C=A.split("-");if(L=C.reduce(function(H,j){return H[j]},r),!(L&&L.set)){var R=C.reverse(),N=Object(me.a)(R),V=N[0],X=N.slice(1);P=X.reverse().reduce(function(H,j){return H[j]},r),A=V}}var z=(y=r.__container)==null||(O=y.__state)==null?void 0:O.current.colorManagement;if(L&&L.set&&(L.copy||L instanceof Os))if(Array.isArray(S)){var D;(D=L).set.apply(D,Object(dt.a)(S))}else L.copy&&S&&S.constructor&&L.constructor.name===S.constructor.name?L.copy(S):S!==void 0&&(L.set(S),z&&L instanceof Pe&&L.convertSRGBToLinear());else P[A]=S,z&&P[A]instanceof $e&&(P[A].encoding=Mr);fl(r)}}),n&&i&&r.raycast&&r.__handlers){r.__handlers=void 0;var m=i.__interaction.indexOf(r);m>-1&&i.__interaction.splice(m,1)}o.length&&(n&&i&&r.raycast&&i.__interaction.push(r),r.__handlers=o.reduce(function(x,M){return x[M.charAt(2).toLowerCase()+M.substr(3)]=t[M],x},{})),r.parent&&xp(r)}}function fl(r){r.__container&&r.__container.__state&&Ih(r.__container.__state)}function xp(r){r.onUpdate&&r.onUpdate(r)}function ym(r,t,e,n,i){var a=t.args,o=a===void 0?[]:a,l=Object(Tt.a)(t,["args"]),c="".concat(r[0].toUpperCase()).concat(r.slice(1)),h;if(r==="primitive")l=Object(et.a)({dispose:null},l),h=l.object,h.__instance=!0,h.__dispose=h.dispose;else{var d=yp[c]||b[c];if(!d)throw'"'.concat(c,'" is not part of the THREE namespace! Did you forget to extend it? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively');h=Nn.arr(o)?Ye(d,Object(dt.a)(o)):new d(o)}for(;e.__container;)e=e.__container;if(!ss.has(e)){var p=function v(m){return m.return?v(m.return):m.stateNode&&m.stateNode.containerInfo};e=p(i)}return h.__objects=[],h.__container=e,c.endsWith("Geometry")?l=Object(et.a)({attach:"geometry"},l):c.endsWith("Material")&&(l=Object(et.a)({attach:"material"},l)),Bh(h,l,{}),h}function Cc(r,t){t&&(t.isObject3D?r.add(t):(r.__objects.push(t),t.parent=r,t.attachArray?(Nn.arr(r[t.attachArray])||(r[t.attachArray]=[]),r[t.attachArray].push(t)):t.attachObject?(Nn.obj(r[t.attachObject[0]])||(r[t.attachObject[0]]={}),r[t.attachObject[0]][t.attachObject[1]]=t):t.attach&&(r[t.attach]=t)),xp(t),fl(t))}function xm(r,t,e){if(t){if(t.isObject3D){t.parent=r,t.dispatchEvent({type:"added"});var n=r.children.filter(function(a){return a!==t}),i=n.indexOf(e);r.children=[].concat(Object(dt.a)(n.slice(0,i)),[t],Object(dt.a)(n.slice(i))),xp(t)}else Cc(r,t);fl(t)}}function Mm(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r){var n=e?Object(dt.a)(r):r;n.forEach(function(i){return Dh(t,i)})}}function Dh(r,t){t&&(t.isObject3D?r.remove(t):(t.parent=null,r.__objects&&(r.__objects=r.__objects.filter(function(e){return e!==t})),t.attachArray?r[t.attachArray]=r[t.attachArray].filter(function(e){return e!==t}):t.attachObject?delete r[t.attachObject[0]][t.attachObject[1]]:t.attach&&(r[t.attach]=null)),t.__container&&(t.__container.__interaction=t.__container.__interaction.filter(function(e){return e!==t})),fl(t),t.dispose!==null&&Object(pp.unstable_runWithPriority)(pp.unstable_IdlePriority,function(){Mm(t.__objects,t),Mm(t.children,t,!0),t.dispose&&t.type!=="Scene"?t.dispose():t.__dispose&&t.__dispose(),delete t.__container,delete t.__objects}))}function Sm(r,t,e,n){var i=r.parent,a=ym(t,e,r.__container,null,n);Dh(i,r),Cc(i,a),[n,n.alternate].forEach(function(o){o!==null&&(o.stateNode=a,o.ref&&(Nn.fun(o.ref)?o.ref(a):o.ref.current=a))})}var Rc=cM()({now:pp.unstable_now,createInstance:ym,removeChild:Dh,appendChild:Cc,insertBefore:xm,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:Nn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Nn.fun(clearTimeout)?clearTimeout:void 0,setTimeout:Nn.fun(setTimeout)?setTimeout:void 0,clearTimeout:Nn.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendInitialChild:Cc,appendChildToContainer:Cc,removeChildFromContainer:Dh,insertInContainerBefore:xm,commitUpdate:function(t,e,n,i,a,o){if(t.__instance&&a.object&&a.object!==t)Sm(t,n,a,o);else{var l=a.args,c=l===void 0?[]:l,h=Object(Tt.a)(a,["args"]),d=i.args,p=d===void 0?[]:d,v=Object(Tt.a)(i,["args"]),m=c.some(function(x,M){return Nn.obj(x)?Object.entries(x).some(function(A){var S=Object(Ft.a)(A,2),y=S[0],O=S[1];return O!==p[M][y]}):x!==p[M]});m?Sm(t,n,a,o):Bh(t,h,v,!0)}},hideInstance:function(t){t.isObject3D&&(t.visible=!1,fl(t))},unhideInstance:function(t,e){(t.isObject3D&&e.visible==null||e.visible)&&(t.visible=!0,fl(t))},hideTextInstance:function(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},getPublicInstance:function(t){return t},getRootHostContext:function(){return vp},getChildHostContext:function(){return vp},createTextInstance:function(){},finalizeInitialChildren:function(t){return t.__handlers},commitMount:function(t){var e=t.__container;e&&t.raycast&&t.__handlers&&e.__interaction.push(t)},prepareUpdate:function(){return vp},shouldDeprioritizeSubtree:function(){return!1},prepareForCommit:function(){return null},preparePortalMount:function(){return null},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1}}),gM=Nn.fun(Symbol)&&Symbol.for,yM=gM?Symbol.for("react.portal"):60106;function xM(r,t,e){var n=ss.get(t);if(!n){t.__state=e;var i=n=Rc.createContainer(t,e!==void 0&&e.current.concurrent?2:0,!1,null);ss.set(t,i)}return Rc.updateContainer(r,n,null,function(){}),Rc.getPublicRootInstance(n)}function MM(r,t){var e=ss.get(r);e&&Rc.updateContainer(null,e,null,function(){ss.delete(r),t&&t(r)})}function FM(r,t,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return t.__objects||(t.__objects=[]),{$$typeof:yM,key:n==null?null:""+n,children:r,containerInfo:t,implementation:e}}Rc.injectIntoDevTools({bundleType:0,findHostInstanceByFiber:function(){return null},version:mM,rendererPackageName:vM});var NM=Object.freeze({__proto__:null});function wm(r){return r.isOrthographicCamera}function Mp(r){return(r.eventObject||r.object).uuid+"/"+r.index}var Fh=Object(Je.createContext)({}),SM=function(t){var e=t.children,n=t.gl,i=t.camera,a=t.orthographic,o=t.raycaster,l=t.size,c=t.pixelRatio,h=t.vr,d=h===void 0?!1:h,p=t.concurrent,v=p===void 0?!1:p,m=t.shadowMap,x=m===void 0?!1:m,M=t.colorManagement,A=M===void 0?!0:M,S=t.invalidateFrameloop,y=S===void 0?!1:S,O=t.updateDefaultCamera,P=O===void 0?!0:O,L=t.noEvents,C=L===void 0?!1:L,R=t.onCreated,N=t.onPointerMissed,V=t.forceResize,X=Object(Je.useState)(!1),z=Object(Ft.a)(X,2),D=z[0],H=z[1],j=Object(Je.useState)(function(){return new se}),_=Object(Ft.a)(j,1),W=_[0],Q=Object(Je.useState)(function(){var q=new xh;if(o){var ie=o.filter,ye=o.computeOffsets,ce=Object(Tt.a)(o,["filter","computeOffsets"]);Bh(q,ce,{})}return q}),te=Object(Ft.a)(Q,1),oe=te[0],he=Object(Je.useState)(function(){var q=new Pf;return q.__interaction=[],q.__objects=[],q}),re=Object(Ft.a)(he,1),de=re[0],Me=Object(Je.useState)(function(){var q=a?new $s(0,0,0,0,.1,1e3):new xt(75,0,.1,1e3);return q.position.z=5,i&&Bh(q,i,{}),q.lookAt(0,0,0),q}),Xe=Object(Ft.a)(Me,2),$=Xe[0],at=Xe[1],qe=Object(Je.useState)(function(){return new Kd}),Ze=Object(Ft.a)(qe,1),Ae=Ze[0],fe=Object(Je.useRef)({ready:!1,active:!0,manual:0,colorManagement:A,vr:d,concurrent:v,noEvents:C,invalidateFrameloop:!1,frames:0,aspect:0,subscribers:[],camera:$,scene:de,raycaster:oe,mouse:W,clock:Ae,gl:n,size:l,viewport:null,initialClick:[0,0],initialHits:[],pointer:new fM.TinyEmitter,captured:void 0,events:void 0,subscribe:function(ie){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ye&&fe.current.manual++,fe.current.subscribers.push({ref:ie,priority:ye}),fe.current.subscribers=fe.current.subscribers.sort(function(ce,ue){return ce.priority-ue.priority}),function(){var ce;((ce=fe.current)==null?void 0:ce.subscribers)&&(ye&&fe.current.manual--,fe.current.subscribers=fe.current.subscribers.filter(function(ue){return ue.ref!==ie}))}},setDefaultCamera:function(ie){return at(ie)},invalidate:function(){return Ih(fe)},intersect:function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ge(ie,ye)},forceResize:V}),rt=new I,yt=Object(Je.useCallback)(function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe.current.camera,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new I(0,0,0),ye=fe.current.size,ce=ye.width,ue=ye.height,xe=q.getWorldPosition(rt).distanceTo(ie);if(wm(q))return{width:ce/q.zoom,height:ue/q.zoom,factor:1,distance:xe};var ze=q.fov*Math.PI/180,lt=2*Math.tan(ze/2)*xe,ft=lt*(ce/ue);return{width:ft,height:lt,factor:ce/ft,distance:xe}},[]);Object(Je.useMemo)(function(){fe.current.ready=D,fe.current.size=l,fe.current.camera=$,fe.current.invalidateFrameloop=y,fe.current.vr=d,fe.current.gl=n,fe.current.concurrent=v,fe.current.noEvents=C,fe.current.viewport=yt},[y,d,v,C,D,l,$,n]),Object(Je.useMemo)(function(){fe.current.aspect=l.width/l.height,Object.assign(fe.current.viewport,yt()),P&&(wm($)?($.left=l.width/-2,$.right=l.width/2,$.top=l.height/2,$.bottom=l.height/-2):$.aspect=fe.current.aspect,$.updateProjectionMatrix(),$.updateMatrixWorld()),n.setSize(l.width,l.height),D&&Ih(fe)},[$,n,l,P,D]);var st=Object(Je.useRef)(null);Object(Je.useMemo)(function(){var q=fe.current,ie=q.ready,ye=q.manual,ce=q.vr,ue=q.noEvents,xe=q.invalidateFrameloop,ze=q.frames,lt=q.subscribers,ft=q.captured,vt=q.initialClick,mt=q.initialHits,zt=Object(Tt.a)(q,["ready","manual","vr","noEvents","invalidateFrameloop","frames","subscribers","captured","initialClick","initialHits"]);st.current=zt},[l,$]),Object(Je.useLayoutEffect)(function(){c&&(Array.isArray(c)?n.setPixelRatio(Math.max(Math.min(c[0],window.devicePixelRatio),c[1])):n.setPixelRatio(c))},[n,c]),Object(Je.useLayoutEffect)(function(){x&&(n.shadowMap.enabled=!0,typeof x=="object"?Object.assign(n.shadowMap,x):n.shadowMap.type=Kr),A&&(n.toneMapping=ml,n.outputEncoding=Mr)},[x,A]);var At=Object(Je.useMemo)(function(){return new Map},[]),Kt=new I,rn=Object(Je.useCallback)(function(q){var ie=(o==null||o.computeOffsets==null?void 0:o.computeOffsets(q,st.current))||q.nativeEvent;if(ie){var ye=ie.offsetX,ce=ie.offsetY,ue=fe.current.size,xe=ue.width,ze=ue.height;W.set(ye/xe*2-1,-(ce/ze)*2+1),oe.setFromCamera(W,fe.current.camera)}},[]),an=Object(Je.useCallback)(function(q){if(fe.current.noEvents)return[];var ie=new Set,ye=[],ce=q?q(fe.current.scene.__interaction):fe.current.scene.__interaction,ue=oe.intersectObjects(ce,!0).filter(function(mt){var zt=Mp(mt);return ie.has(zt)?!1:(ie.add(zt),!0)});o&&o.filter&&st.current&&(ue=o.filter(ue,st.current));var xe=Object(Yt.a)(ue),ze;try{for(xe.s();!(ze=xe.n()).done;)for(var lt=ze.value,ft=lt.object;ft;){var vt=ft.__handlers;vt&&ye.push(Object(et.a)(Object(et.a)({},lt),{},{eventObject:ft})),ft=ft.parent}}catch(mt){xe.e(mt)}finally{xe.f()}return ye},[]),Bt=Object(Je.useCallback)(function(q){var ie=q.nativeEvent.offsetX-fe.current.initialClick[0],ye=q.nativeEvent.offsetY-fe.current.initialClick[1];return Math.round(Math.sqrt(ie*ie+ye*ye))},[]),U=Object(Je.useCallback)(function(q,ie){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;fe.current.pointer.emit("pointerCancel",q),ye&&rn(q),Array.from(At.values()).forEach(function(ce){if(ie&&(!ie.length||!ie.find(function(lt){return lt.object===ce.object&&lt.index===ce.index}))){var ue=ce.eventObject,xe=ue.__handlers;if(At.delete(Mp(ce)),xe){var ze=Object(et.a)(Object(et.a)({},ce),{},{intersections:ie||[]});xe.pointerOut&&xe.pointerOut(Object(et.a)(Object(et.a)({},ze),{},{type:"pointerout"})),xe.pointerLeave&&xe.pointerLeave(Object(et.a)(Object(et.a)({},ze),{},{type:"pointerleave"}))}}})},[]),G=Object(Je.useCallback)(function(q,ie){var ye=an(ie);return fe.current.captured&&q.type!=="click"&&q.type!=="wheel"&&fe.current.captured.forEach(function(ce){ye.find(function(ue){return ue.eventObject===ce.eventObject})||ye.push(ce)}),ye},[]),be=Object(Je.useCallback)(function(q,ie,ye){return q.length&&function(){var ce=Kt.set(W.x,W.y,0).unproject(fe.current.camera),ue=ie.type==="click"?Bt(ie):0,xe=function(dr){return ie.target.releasePointerCapture(dr)},ze={stopped:!1,captured:!1},lt=Object(Yt.a)(q),ft;try{var vt=function(){var dr=ft.value,$i=function(vr){ze.captured||(ze.captured=!0,fe.current.captured=[]),fe.current.captured&&fe.current.captured.push(dr),ie.target.setPointerCapture(vr)},pr=Object(et.a)(Object(et.a)(Object(et.a)({},ie),dr),{},{intersections:q,stopped:ze.stopped,delta:ue,unprojectedPoint:ce,ray:oe.ray,camera:fe.current.camera,stopPropagation:function(){var vr=fe.current.captured;if((!vr||vr.find(function(bi){return bi.eventObject.id===dr.eventObject.id}))&&(pr.stopped=ze.stopped=!0,At.size&&Array.from(At.values()).find(function(bi){return bi.eventObject===dr.eventObject}))){var ea=q.slice(0,q.indexOf(dr));U(pr,[].concat(Object(dt.a)(ea),[dr]))}},target:Object(et.a)(Object(et.a)({},ie.target),{},{setPointerCapture:$i,releasePointerCapture:xe}),currentTarget:Object(et.a)(Object(et.a)({},ie.currentTarget),{},{setPointerCapture:$i,releasePointerCapture:xe}),sourceEvent:ie});if(ye(pr),ze.stopped===!0)return"break"};for(lt.s();!(ft=lt.n()).done;){var mt=vt();if(mt==="break")break}}catch(zt){lt.e(zt)}finally{lt.f()}}(),q},[]),ge=Object(Je.useCallback)(function(q){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;fe.current.pointer.emit("pointerMove",q),ie&&rn(q);var ye=G(q,function(ce){return ce.filter(function(ue){return["Move","Over","Enter","Out","Leave"].some(function(xe){return ue.__handlers["pointer"+xe]})})});return U(q,ye),be(ye,q,function(ce){var ue=ce.eventObject,xe=ue.__handlers;if(!!xe){if(xe.pointerOver||xe.pointerEnter||xe.pointerOut||xe.pointerLeave){var ze=Mp(ce),lt=At.get(ze);lt?lt.stopped&&ce.stopPropagation():(At.set(ze,ce),xe.pointerOver&&xe.pointerOver(Object(et.a)(Object(et.a)({},ce),{},{type:"pointerover"})),xe.pointerEnter&&xe.pointerEnter(Object(et.a)(Object(et.a)({},ce),{},{type:"pointerenter"})))}xe.pointerMove&&xe.pointerMove(ce)}}),ye},[]),He=Object(Je.useCallback)(function(q){return function(ie){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;fe.current.pointer.emit(q,ie),ye&&rn(ie);var ce=G(ie);be(ce,ie,function(ue){var xe=ue.eventObject,ze=xe.__handlers;ze&&ze[q]&&(q!=="click"&&q!=="contextMenu"&&q!=="doubleClick"||fe.current.initialHits.includes(xe))&&(ze[q](ue),bm(ie,de.__interaction,function(lt){return lt!==xe}))}),q==="pointerDown"&&(fe.current.initialClick=[ie.nativeEvent.offsetX,ie.nativeEvent.offsetY],fe.current.initialHits=ce.map(function(ue){return ue.eventObject})),(q==="click"||q==="contextMenu"||q==="doubleClick")&&!ce.length&&Bt(ie)<=2&&(bm(ie,de.__interaction),N&&N())}},[N,Bt,G,be,rn]);Object(Je.useMemo)(function(){fe.current.events={onClick:He("click"),onContextMenu:He("contextMenu"),onDoubleClick:He("doubleClick"),onWheel:He("wheel"),onPointerDown:He("pointerDown"),onPointerUp:He("pointerUp"),onPointerLeave:function(ie){return U(ie,[])},onPointerMove:ge,onGotPointerCaptureLegacy:function(ie){return fe.current.captured=an(ie)},onLostPointerCapture:function(ie){return fe.current.captured=void 0,U(ie)}}},[He,an,U,ge]);var J=Object(Je.useCallback)(function(ie){var ye=function(){return H(!0)};return Object(Je.useEffect)(function(){var ce=R&&R(fe.current);ce&&ce.then?ce.then(ye):ye()},[]),ie.children},[]);return Object(Je.useLayoutEffect)(function(){xM(Object(Je.createElement)(J,null,Object(Je.createElement)(Fh.Provider,{value:st.current},typeof e=="function"?e(fe.current):e)),de,fe)},[D,e,st.current]),Object(Je.useLayoutEffect)(function(){D&&(fe.current.vr?(n.xr||n.vr)&&n.setAnimationLoop?((n.xr||n.vr).enabled=!0,n.setAnimationLoop(function(q){return mm(fe,q,0,!0)})):console.warn("the gl instance does not support VR!"):fe.current.frames===0&&Ih(fe))},[n,D,y]),Object(Je.useEffect)(function(){return function(){fe.current.gl&&(fe.current.gl.renderLists&&fe.current.gl.renderLists.dispose(),fe.current.gl.forceContextLoss&&fe.current.gl.forceContextLoss(),Nh(fe.current.gl)),MM(fe.current.scene,function(){Nh(fe.current.raycaster),Nh(fe.current.camera),Nh(fe.current)})}},[]),fe.current.events};function bm(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(n){return!0};t.filter(e).forEach(function(n){var i,a;return(i=(a=n.__handlers).pointerMissed)==null?void 0:i.call(a,r)})}function Nh(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(var t in r)typeof t=="object"&&t.dispose&&t.dispose(),delete r[t]}function Sp(r){var t=Object(Je.useContext)(r);if(!("subscribe"in t))throw new Error("\u26A1\uFE0F react-three-fiber hooks can only be used within the Canvas component! https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#hooks");return t}function wM(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=Sp(Fh),n=e.subscribe,i=Object(Je.useRef)(r);return Object(Je.useLayoutEffect)(function(){return void(i.current=r)},[r]),Object(Je.useEffect)(function(){var a=n(i,t);return function(){return a()}},[t,n]),null}function zM(){return Sp(Fh)}function GM(r,t,e){var n=Sp(Fh),i=n.invalidate,a=Object(Je.useRef)(),o=e||a;return Object(Je.useLayoutEffect)(function(){o.current&&(r(o.current),i())},t),o}function UM(r){var t=Object(Je.useState)(!1),e=Object(Ft.a)(t,2),n=e[0],i=e[1],a=Object(Je.useRef)(void 0),o=r||a;return Object(Je.useLayoutEffect)(function(){return void i(function(l){return!l})},[]),o}function Em(r){var t={nodes:{},materials:{}};return r&&r.traverse(function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function HM(r){return Object(Je.useMemo)(function(){return Em(r)},[r])}function Tm(r,t){return function(e,n){var i=new e;r&&r(i);var a=Array.isArray(n)?n:[n];return Promise.all(a.map(function(o){return new Promise(function(l,c){return i.load(o,function(h){h.scene&&Object.assign(h,Em(h.scene)),l(h)},t,function(h){return c(h.message)})})}))}}function bM(r,t,e,n){var i=os(Tm(e,n),r,t);return Array.isArray(t)?i:i[0]}bM.preload=function(r,t,e){return os.preload(Tm(e),r,t)};var Am={position:"relative",width:"100%",height:"100%",overflow:"hidden"};function EM(r){var t=r.children,e=r.setEvents,n=r.container,i=r.renderer,a=r.effects,o=Object(Tt.a)(r,["children","setEvents","container","renderer","effects"]),l=Object(Je.useState)(i),c=Object(Ft.a)(l,1),h=c[0];h||console.warn("No renderer created!"),Object(Je.useEffect)(function(){a&&a(h,n)},[n,a,h]);var d=SM(Object(et.a)(Object(et.a)({},o),{},{children:t,gl:h}));return Object(Je.useEffect)(function(){e(d)},[d,e]),null}var TM=iu.a.memo(function(t){var e=t.renderer,n=t.effects,i=t.children,a=t.vr,o=t.webgl1,l=t.concurrent,c=t.shadowMap,h=t.colorManagement,d=t.orthographic,p=t.invalidateFrameloop,v=t.updateDefaultCamera,m=t.noEvents,x=t.gl,M=t.camera,A=t.raycaster,S=t.pixelRatio,y=t.onCreated,O=t.onPointerMissed,P=t.preRender,L=t.resize,C=t.style,R=Object(Tt.a)(t,["renderer","effects","children","vr","webgl1","concurrent","shadowMap","colorManagement","orthographic","invalidateFrameloop","updateDefaultCamera","noEvents","gl","camera","raycaster","pixelRatio","onCreated","onPointerMissed","preRender","resize","style"]),N=Object(Je.useRef)(),V=Object(Je.useState)({}),X=Object(Ft.a)(V,2),z=X[0],D=z.onGotPointerCaptureLegacy,H=Object(Tt.a)(z,["onGotPointerCaptureLegacy"]),j=X[1],_=Object(hM.a)(Object(et.a)({scroll:!0,debounce:{scroll:50,resize:0}},L)),W=Object(Ft.a)(_,3),Q=W[0],te=W[1],oe=W[2],he=Object(Je.useRef)(!1),re=Object(Je.useMemo)(function(){return he.current=he.current||!!te.width&&!!te.height},[te]),de=Object(Je.useMemo)(function(){return{size:te,forceResize:oe,setEvents:j,container:N.current}},[oe,te]);return typeof window=="undefined"?iu.a.createElement("div",Object(Jt.a)({style:Object(et.a)(Object(et.a)({},Am),C)},R),P):iu.a.createElement("div",Object(Jt.a)({ref:pM([Q,N]),style:Object(et.a)(Object(et.a)({},Am),C)},H,R),P,re&&iu.a.createElement(EM,Object(Jt.a)({},t,de)))}),AM=iu.a.memo(function(t){var e=t.children,n=Object(Tt.a)(t,["children"]),i=Object(Je.useRef)(),a=n.webgl1?Rf:Ju;return iu.a.createElement(TM,Object(Jt.a)({},n,{renderer:function(){if(i.current){var l=Object(et.a)({antialias:!0,alpha:!0},n.gl),c=new a(Object(et.a)({powerPreference:"high-performance",canvas:i.current},l));return c}},preRender:iu.a.createElement("canvas",{ref:i,style:{display:"block"}})}),e)})},NJdT:function(Qr,ta,w){"use strict";Qr.exports=w("+IsV")},iEE2:function(Qr,ta,w){"use strict";(function(b){var Yt=w("KQm4"),ve=w("ODXe"),Be=w("1OyB"),Ye=w("q1tI"),Tt=w.n(Ye),dt=w("sBL/"),me=w.n(dt);function Ft(){var Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{debounce:0,scroll:!1},_e=Lt.debounce,dn=Lt.scroll,Re=Lt.polyfill,De=Re||(typeof window=="undefined"?function mn(){Object(Be.a)(this,mn)}:window.ResizeObserver);if(!De)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var pe=Object(Ye.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Ge=Object(ve.a)(pe,2),jn=Ge[0],uo=Ge[1],$t=Object(Ye.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:jn}),Pa=_e?typeof _e=="number"?_e:_e.scroll:null,sn=_e?typeof _e=="number"?_e:_e.resize:null,na=Object(Ye.useRef)(!1);Object(Ye.useEffect)(function(){return na.current=!0,function(){return void(na.current=!1)}});var ra=Object(Ye.useMemo)(function(){var mn=function(){if(!!$t.current.element){var $r=$t.current.element.getBoundingClientRect(),Br=$r.left,ia=$r.top,us=$r.width,Ia=$r.height,co=$r.bottom,ls=$r.right,Dr=$r.x,cs=$r.y,Ba={left:Br,top:ia,width:us,height:Ia,bottom:co,right:ls,x:Dr,y:cs};Object.freeze(Ba),na.current&&!Ra($t.current.lastBounds,Ba)&&uo($t.current.lastBounds=Ba)}};return[mn,sn?Object(dt.debounce)(mn,sn):mn,Pa?Object(dt.debounce)(mn,Pa):mn]},[uo,Pa,sn]),Or=Object(ve.a)(ra,3),lo=Or[0],Oa=Or[1],Kr=Or[2];function Ir(){$t.current.scrollContainers&&($t.current.scrollContainers.forEach(function(mn){return mn.removeEventListener("scroll",Kr,!0)}),$t.current.scrollContainers=null),$t.current.resizeObserver&&($t.current.resizeObserver.disconnect(),$t.current.resizeObserver=null)}function Ei(){!$t.current.element||($t.current.resizeObserver=new De(Kr),$t.current.resizeObserver.observe($t.current.element),dn&&$t.current.scrollContainers&&$t.current.scrollContainers.forEach(function(mn){return mn.addEventListener("scroll",Kr,{capture:!0,passive:!0})}))}var un=function(Ti){!Ti||Ti===$t.current.element||(Ir(),$t.current.element=Ti,$t.current.scrollContainers=vn(Ti),Ei())};return Jt(Kr,Boolean(dn)),et(Oa),Object(Ye.useEffect)(function(){Ir(),Ei()},[dn,Kr,Oa]),Object(Ye.useEffect)(function(){return Ir},[]),[un,jn,lo]}function et(Lt){Object(Ye.useEffect)(function(){var _e=Lt;return window.addEventListener("resize",_e),function(){return void window.removeEventListener("resize",_e)}},[Lt])}function Jt(Lt,_e){Object(Ye.useEffect)(function(){if(_e){var dn=Lt;return window.addEventListener("scroll",dn,{capture:!0,passive:!0}),function(){return void window.removeEventListener("scroll",dn,!0)}}},[Lt,_e])}function vn(Lt){var _e=[];if(!Lt||Lt===document.body)return _e;var dn=window.getComputedStyle(Lt),Re=dn.overflow,De=dn.overflowX,pe=dn.overflowY;return[Re,De,pe].some(function(Ge){return Ge==="auto"||Ge==="scroll"})&&_e.push(Lt),[].concat(_e,Object(Yt.a)(vn(Lt.parentElement)))}var Wn=["x","y","top","bottom","left","right","width","height"],Ra=function(_e,dn){return Wn.every(function(Re){return _e[Re]===dn[Re]})};Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(b,"exports").writable&&(b.exports=Ft),ta.a=Ft}).call(this,w("3UD+")(Qr))},"sBL/":function(Qr,ta){function w(b,Yt,ve){var Be,Ye,Tt,dt,me;Yt==null&&(Yt=100);function Ft(){var Jt=Date.now()-dt;Jt<Yt&&Jt>=0?Be=setTimeout(Ft,Yt-Jt):(Be=null,ve||(me=b.apply(Tt,Ye),Tt=Ye=null))}var et=function(){Tt=this,Ye=arguments,dt=Date.now();var vn=ve&&!Be;return Be||(Be=setTimeout(Ft,Yt)),vn&&(me=b.apply(Tt,Ye),Tt=Ye=null),me};return et.clear=function(){Be&&(clearTimeout(Be),Be=null)},et.flush=function(){Be&&(me=b.apply(Tt,Ye),Tt=Ye=null,clearTimeout(Be),Be=null)},et}w.debounce=w,Qr.exports=w},uFwe:function(Qr,ta,w){"use strict";w.d(ta,"a",function(){return Yt});var b=w("BsWD");function Yt(ve,Be){var Ye;if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(Ye=Object(b.a)(ve))||Be&&ve&&typeof ve.length=="number"){Ye&&(ve=Ye);var Tt=0,dt=function(){};return{s:dt,n:function(){return Tt>=ve.length?{done:!0}:{done:!1,value:ve[Tt++]}},e:function(vn){throw vn},f:dt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var me=!0,Ft=!1,et;return{s:function(){Ye=ve[Symbol.iterator]()},n:function(){var vn=Ye.next();return me=vn.done,vn},e:function(vn){Ft=!0,et=vn},f:function(){try{!me&&Ye.return!=null&&Ye.return()}finally{if(Ft)throw et}}}}},wOJ8:function(Qr,ta){function w(){}w.prototype={on:function(Yt,ve,Be){var Ye=this.e||(this.e={});return(Ye[Yt]||(Ye[Yt]=[])).push({fn:ve,ctx:Be}),this},once:function(Yt,ve,Be){var Ye=this;function Tt(){Ye.off(Yt,Tt),ve.apply(Be,arguments)}return Tt._=ve,this.on(Yt,Tt,Be)},emit:function(Yt){var ve=[].slice.call(arguments,1),Be=((this.e||(this.e={}))[Yt]||[]).slice(),Ye=0,Tt=Be.length;for(Ye;Ye<Tt;Ye++)Be[Ye].fn.apply(Be[Ye].ctx,ve);return this},off:function(Yt,ve){var Be=this.e||(this.e={}),Ye=Be[Yt],Tt=[];if(Ye&&ve)for(var dt=0,me=Ye.length;dt<me;dt++)Ye[dt].fn!==ve&&Ye[dt].fn._!==ve&&Tt.push(Ye[dt]);return Tt.length?Be[Yt]=Tt:delete Be[Yt],this}},Qr.exports=w,Qr.exports.TinyEmitter=w}}]);
